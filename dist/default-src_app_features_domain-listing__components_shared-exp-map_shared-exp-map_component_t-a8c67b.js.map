{"version":3,"file":"default-src_app_features_domain-listing__components_shared-exp-map_shared-exp-map_component_t-a8c67b.js","mappings":"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AI0B,UAAU;EACtB;EACA,OAAOT,MAAM;AACf;;;;;;;;;;;;;;;;;;;ACzJA;AACA;AACA;AAC+B;AACL;AAIC;AACc;;AAEzC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,MAAMkB,QAAQ,GAAG;EACfC,YAAY,EAAE;AAChB,CAAC;;AAED;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,MAAMC,eAAe,SAASP,iDAAK,CAAC;EAClC;AACF;AACA;EACEvd,WAAW,CAACuT,OAAO,EAAE;IACnBA,OAAO,GAAGA,OAAO,GAAGA,OAAO,GAAG,CAAC,CAAC;IAEhC,MAAMwK,WAAW,GAAGC,MAAM,CAACC,MAAM,CAAC,CAAC,CAAC,EAAE1K,OAAO,CAAC;IAE9C,OAAOwK,WAAW,CAACpM,KAAK;IACxB,OAAOoM,WAAW,CAACG,YAAY;IAC/B,OAAOH,WAAW,CAACI,oBAAoB;IACvC,OAAOJ,WAAW,CAACK,sBAAsB;IACzC,KAAK,CAACL,WAAW,CAAC;;IAElB;AACJ;AACA;AACA;IACI,IAAI,CAACM,UAAU,GACb9K,OAAO,CAAC+K,SAAS,KAAK1b,SAAS,GAAG2Q,OAAO,CAAC+K,SAAS,GAAG,KAAK;;IAE7D;AACJ;AACA;AACA;IACI,IAAI,CAACC,aAAa,GAChBhL,OAAO,CAAC2K,YAAY,KAAKtb,SAAS,GAAG2Q,OAAO,CAAC2K,YAAY,GAAG,GAAG;;IAEjE;AACJ;AACA;AACA;AACA;IACI,IAAI,CAACtN,MAAM,GAAG,IAAI;;IAElB;AACJ;AACA;AACA;AACA;IACI,IAAI,CAACC,cAAc,GAAGjO,SAAS;IAE/B,IAAI,CAA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AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,MAAMpC,YAAY,SAASswC,kDAAM,CAAC;EAChC;AACF;AACA;EACE7vC,WAAW,CAACuT,OAAO,EAAE;IACnBA,OAAO,GAAGA,OAAO,IAAI,CAAC,CAAC;IAEvB,KAAK,CAAC;MACJ68B,YAAY,EAAE78B,OAAO,CAAC68B,YAAY;MAClCp0B,WAAW,EAAE,IAAI;MACjBnE,UAAU,EAAEjV,SAAS;MACrB0hB,KAAK,EAAE,OAAO;MACdiiB,KAAK,EAAEhzB,OAAO,CAACgzB,KAAK,KAAK3jC,SAAS,GAAG2Q,OAAO,CAACgzB,KAAK,GAAG;IACvD,CAAC,CAAC;;IAEF;AACJ;AACA;IACI,IAAI,CAACh2B,EAAE;;IAEP;AACJ;AACA;IACI,IAAI,CAACC,IAAI;;IAET;AACJ;AACA;IACI,IAAI,CAACC,EAAE;;IAEP;AACJ;AACA;AACA;IACI,IAAI,CAAC4/B,OAAO,GAAG/4B,+CAAI;;IAEnB;AACJ;AACA;AACA;IACI,IAAI,CAACg5B,OAAO,GAAG/8B,OAAO,CAACmE,MAAM;;IAE7B;AACJ;AACA;AACA;IACI,IAAI,CAAC+e,SAAS,GAAGljB,OAAO,CAACyZ,QAAQ,KAAKpqB,SAAS,GAAG,IAAI,GAAG2Q,OAAO,CAACyZ,QAAQ;;IAEzE;AACJ;AACA;AACA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,IAAI80B,OAAO,GAAG,KAAK;IACnB,KAAK,MAAMzwC,EAAE,IAAI,IAAI,CAACisC,QAAQ,EAAE;MAC9B,IAAI,IAAI,CAACA,QAAQ,CAACjsC,EAAE,CAAC,KAAK2b,OAAO,EAAE;QACjC,OAAO,IAAI,CAACswB,QAAQ,CAACjsC,EAAE,CAAC;QACxBywC,OAAO,GAAG,IAAI;QACd;MACF;IACF;IACA,OAAOA,OAAO;EAChB;;EAEA;AACF;AACA;AACA;AACA;AACA;EACEC,SAAS,CAACjF,MAAM,EAAE;IAChB,IAAI,CAACH,OAAO,GAAGG,MAAM;EACvB;;EAEA;AACF;AACA;AACA;AACA;EACEkF,MAAM,CAACj+B,GAAG,EAAE;IACVtH,mDAAM,CAAC,IAAI,CAACmgC,OAAO,EAAE,CAAC,CAAC,CAAC,CAAC;IACzB,IAAI,CAACC,IAAI,GAAG94B,GAAG;IACf,IAAI,CAACg+B,SAAS,CAACz9B,sDAAG,CAACP,GAAG,EAAE,IAAI,CAAC64B,OAAO,CAAC,CAAC;EACxC;AACF;AAEA,iEAAe/wC,YAAY;;;;;;;;;;;;;;;ACtmC3B;AACA;AACA;;AAEA;AACA;AACA;AACA,iEAAe;EACb;AACF;AACA;AACA;AACA;EACEsyC,UAAU,EAAE,YAAY;EAExB;AACF;AACA;AACA;AACA;EACE6C,aAAa,EAAE,eAAe;EAE9B;AACF;AACA;AACA;AACA;EACE5B,KAAK,EAAE,OAAO;EAEd;AACF;AACA;AACA;AACA;AACA;EACET,aAAa,EAAE,eAAe;EAE9B;AACF;AACA;AACA;AACA;EACE6C,iBAAiB,EAAE,mBAAmB;EAEtC;AACF;AACA;AACA;AACA;EACEC,eAAe,EAAE,iBAAiB;EAElC;AACF;AACA;AACA;AACA;EACEC,iBAAiB,EAAE;AACrB,CAAC,EAAC;;AAEF;AACA;AACA;;;;;;;;;;;;;;;;;;;AC7DA;AACA;AACA;AAC2B;AACyB;AAClB;AACA;;AAElC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,MAAMhpC,KAAK,CAAC;EACV;AACF;AACA;EACEpM,WAAW,CAAC41C,UAAU,EAAE;IACtB;AACJ;AACA;IACI,IAAI,CAACC,MAAM,GAAG,IAAIF,kCAAM,CAACC,UAAU,CAAC;;IAEpC;AACJ;AACA;AACA;AACA;AACA;IACI,IAAI,CAACE,MAAM,GAAG,CAAC,CAAC;EAClB;;EAEA;AACF;AACA;AACA;AACA;EACEnnC,MAAM,CAACgJ,MAAM,EAAE2Z,KAAK,EAAE;IACpB;IACA,MAAMqa,IAAI,GAAG;MACX99B,IAAI,EAAE8J,MAAM,CAAC,CAAC,CAAC;MACf7J,IAAI,EAAE6J,MAAM,CAAC,CAAC,CAAC;MACf5J,IAAI,EAAE4J,MAAM,CAAC,CAAC,CAAC;MACf3J,IAAI,EAAE2J,MAAM,CAAC,CAAC,CAAC;MACf2Z,KAAK,EAAEA;IACT,CAAC;IAED,IAAI,CAACukB,MAAM,CAAClnC,MAAM,CAACg9B,IAAI,CAAC;IACxB,IAAI,CAACmK,MAAM,CAAC/T,gDAAM,CAACzQ,KAAK,CAAC,CAAC,GAAGqa,IAAI;EACnC;;EAEA;AACF;AACA;AACA;AACA;EACEj9B,IAAI,CAAC2R,OAAO,EAAEkzB,MAAM,EAAE;IACpB,MAAMwC,KAAK,GAAG,IAAItjC,KAAK,CAAC8gC,MAAM,CAAC/tC,MAAM,CAAC;IACtC,KAAK,IAAIsG,CAAC,GAAG,CAAC,EAAEa,CAAC,GAAG4mC,MAAM,CAAC/tC,MAAM,EAAEsG,CAAC,GAAGa,CAAC,EAAEb,CAAC,EAAE,EAAE;MAC7C,MAAM6L,MAAM,GAAG0I,OAAO,CAACvU,CAAC,CAAC;MACzB,MAAMwlB,KAAK,GAAGiiB,MAAM,CAACznC,CAAC,CAAC;;MAEvB;MACA,MAAM6/B,IAAI,GAAG;QACX99B,IAAI,EAAE8J,MAAM,CAAC,CAAC,CAAC;QACf7J,IAAI,EAAE6J,MAAM,CAAC,CAAC,CAAC;QACf5J,IAAI,EAAE4J,MAAM,CAAC,CAAC,CAAC;QACf3J,IAAI,EAAE2J,MAAM,CAAC,CAAC,CAAC;QACf2Z,KAAK,EAAEA;MACT,CAAC;MACDykB,KAAK,CAACjqC,CAAC,CAAC,GAAG6/B,IAAI;MACf,IAAI,CAACmK,MAAM,CAAC/T,gDAAM,CAACzQ,KAAK,CAAC,CAAC,GAAGqa,IAAI;IACnC;IACA,IAAI,CAACkK,MAAM,CAACnnC,IAAI,CAACqnC,KAAK,CAAC;EACzB;;EAEA;AACF;AACA;AACA;AACA;EACE/mC,MAAM,CAACsiB,KAAK,EAAE;IACZ,MAAM8iB,GAAG,GAAGrS,gDAAM,CAACzQ,KAAK,CAAC;;IAEzB;IACA;IACA,MAAMqa,IAAI,GAAG,IAAI,CAACmK,MAAM,CAAC1B,GAAG,CAAC;IAC7B,OAAO,IAAI,CAAC0B,MAAM,CAAC1B,GAAG,CAAC;IACvB,OAAO,IAAI,CAACyB,MAAM,CAAC7mC,MAAM,CAAC28B,IAAI,CAAC,KAAK,IAAI;EAC1C;;EAEA;AACF;AACA;AACA;AACA;EACE4I,MAAM,CAAC58B,MAAM,EAAE2Z,KAAK,EAAE;IACpB,MAAMqa,IAAI,GAAG,IAAI,CAACmK,MAAM,CAAC/T,gDAAM,CAACzQ,KAAK,CAAC,CAAC;IACvC,MAAMxR,IAAI,GAAG,CAAC6rB,IAAI,CAAC99B,IAAI,EAAE89B,IAAI,CAAC79B,IAAI,EAAE69B,IAAI,CAAC59B,IAAI,EAAE49B,IAAI,CAAC39B,IAAI,CAAC;IACzD,IAAI,CAACqV,kDAAM,CAACvD,IAAI,EAAEnI,MAAM,CAAC,EAAE;MACzB,IAAI,CAAC3I,MAAM,CAACsiB,KAAK,CAAC;MAClB,IAAI,CAAC3iB,MAAM,CAACgJ,MAAM,EAAE2Z,KAAK,CAAC;IAC5B;EACF;;EAEA;AACF;AACA;AACA;EACEgiB,MAAM,GAAG;IACP,MAAMyC,KAAK,GAAG,IAAI,CAACF,MAAM,CAACxnC,GAAG,EAAE;IAC/B,OAAO0nC,KAAK,CAAC10C,GAAG,CAAC,UAAUsqC,IAAI,EAAE;MAC/B,OAAOA,IAAI,CAACra,KAAK;IACnB,CAAC,CAAC;EACJ;;EAEA;AACF;AACA;AACA;AACA;EACEmiB,WAAW,CAAC97B,MAAM,EAAE;IAClB;IACA,MAAMmI,IAAI,GAAG;MACXjS,IAAI,EAAE8J,MAAM,CAAC,CAAC,CAAC;MACf7J,IAAI,EAAE6J,MAAM,CAAC,CAAC,CAAC;MACf5J,IAAI,EAAE4J,MAAM,CAAC,CAAC,CAAC;MACf3J,IAAI,EAAE2J,MAAM,CAAC,CAAC;IAChB,CAAC;IACD,MAAMo+B,KAAK,GAAG,IAAI,CAACF,MAAM,CAACtnC,MAAM,CAACuR,IAAI,CAAC;IACtC,OAAOi2B,KAAK,CAAC10C,GAAG,CAAC,UAAUsqC,IAAI,EAAE;MAC/B,OAAOA,IAAI,CAACra,KAAK;IACnB,CAAC,CAAC;EACJ;;EAEA;AACF;AACA;AACA;AACA;AACA;AACA;EACE5lB,OAAO,CAAC8rB,QAAQ,EAAE;IAChB,OAAO,IAAI,CAACwe,QAAQ,CAAC,IAAI,CAAC1C,MAAM,EAAE,EAAE9b,QAAQ,CAAC;EAC/C;;EAEA;AACF;AACA;AACA;AACA;AACA;EACE2b,eAAe,CAACx7B,MAAM,EAAE6f,QAAQ,EAAE;IAChC,OAAO,IAAI,CAACwe,QAAQ,CAAC,IAAI,CAACvC,WAAW,CAAC97B,MAAM,CAAC,EAAE6f,QAAQ,CAAC;EAC1D;;EAEA;AACF;AACA;AACA;AACA;AACA;EACEwe,QAAQ,CAACzC,MAAM,EAAE/b,QAAQ,EAAE;IACzB,IAAI9a,MAAM;IACV,KAAK,IAAI5Q,CAAC,GAAG,CAAC,EAAEa,CAAC,GAAG4mC,MAAM,CAAC/tC,MAAM,EAAEsG,CAAC,GAAGa,CAAC,EAAEb,CAAC,EAAE,EAAE;MAC7C4Q,MAAM,GAAG8a,QAAQ,CAAC+b,MAAM,CAACznC,CAAC,CAAC,CAAC;MAC5B,IAAI4Q,MAAM,EAAE;QACV,OAAOA,MAAM;MACf;IACF;IACA,OAAOA,MAAM;EACf;;EAEA;AACF;AACA;EACE2Z,OAAO,GAAG;IACR,OAAOA,gDAAO,CAAC,IAAI,CAACyf,MAAM,CAAC;EAC7B;;EAEA;AACF;AACA;EACEpoC,KAAK,GAAG;IACN,IAAI,CAACmoC,MAAM,CAACnoC,KAAK,EAAE;IACnB,IAAI,CAACooC,MAAM,GAAG,CAAC,CAAC;EAClB;;EAEA;AACF;AACA;AACA;EACEniB,SAAS,CAAChc,MAAM,EAAE;IAChB,MAAM1X,IAAI,GAAG,IAAI,CAAC41C,MAAM,CAACxmC,MAAM,EAAE;IACjC,OAAOkc,0DAAc,CAACtrB,IAAI,CAAC4N,IAAI,EAAE5N,IAAI,CAAC6N,IAAI,EAAE7N,IAAI,CAAC8N,IAAI,EAAE9N,IAAI,CAAC+N,IAAI,EAAE2J,MAAM,CAAC;EAC3E;;EAEA;AACF;AACA;EACElT,MAAM,CAACwxC,KAAK,EAAE;IACZ,IAAI,CAACJ,MAAM,CAACnnC,IAAI,CAACunC,KAAK,CAACJ,MAAM,CAACxnC,GAAG,EAAE,CAAC;IACpC,KAAK,MAAMvC,CAAC,IAAImqC,KAAK,CAACH,MAAM,EAAE;MAC5B,IAAI,CAACA,MAAM,CAAChqC,CAAC,CAAC,GAAGmqC,KAAK,CAACH,MAAM,CAAChqC,CAAC,CAAC;IAClC;EACF;AACF;AAEA,iEAAeM,KAAK;;;;;;;;;;;;;;;;AC3NpB;AACA;AACA;;AAE6C;;AAE7C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,MAAM+pC,WAAW,SAASD,wDAAY,CAAC;EACrC;AACF;AACA;EACEl2C,WAAW,CAACuT,OAAO,EAAE;IACnBA,OAAO,GAAGA,OAAO,GAAGA,OAAO,GAAG;MAAColB,MAAM,EAAE;IAAC,CAAC;IAEzC,KAAK,CAAC;MACJyd,MAAM,EAAEv2B,QAAQ;MAChB1e,IAAI,EAAEoS,OAAO,CAACpS,IAAI;MAClBw3B,MAAM,EAAEplB,OAAO,CAAColB,MAAM;MACtB5I,MAAM,EAAExc,OAAO,CAACwc,MAAM;MACtBrU,KAAK,EAAEnI,OAAO,CAACmI,KAAK,KAAK9Y,SAAS,GAAG2Q,OAAO,CAACmI,KAAK,GAAG,CAAC;MACtDG,QAAQ,EAAEtI,OAAO,CAACsI,QAAQ,KAAKjZ,SAAS,GAAG2Q,OAAO,CAACsI,QAAQ,GAAG,CAAC;MAC/DwY,cAAc,EACZ9gB,OAAO,CAAC8gB,cAAc,KAAKzxB,SAAS,GAAG2Q,OAAO,CAAC8gB,cAAc,GAAG,KAAK;MACvEgiB,YAAY,EACV9iC,OAAO,CAAC8iC,YAAY,KAAKzzC,SAAS,GAAG2Q,OAAO,CAAC8iC,YAAY,GAAG,CAAC,CAAC,EAAE,CAAC,CAAC;MACpE/hB,aAAa,EAAE/gB,OAAO,CAAC+gB;IACzB,CAAC,CAAC;EACJ;;EAEA;AACF;AACA;AACA;AACA;EACEjjB,KAAK,GAAG;IACN,MAAMqK,KAAK,GAAG,IAAI,CAACwpB,QAAQ,EAAE;IAC7B,MAAMvzB,KAAK,GAAG,IAAIwkC,WAAW,CAAC;MAC5Bh1C,IAAI,EAAE,IAAI,CAACk9B,OAAO,EAAE,GAAG,IAAI,CAACA,OAAO,EAAE,CAAChtB,KAAK,EAAE,GAAGzO,SAAS;MACzDmtB,MAAM,EAAE,IAAI,CAACuO,SAAS,EAAE,GAAG,IAAI,CAACA,SAAS,EAAE,CAACjtB,KAAK,EAAE,GAAGzO,SAAS;MAC/D+1B,MAAM,EAAE,IAAI,CAAC2d,SAAS,EAAE;MACxB56B,KAAK,EAAEjJ,KAAK,CAACC,OAAO,CAACgJ,KAAK,CAAC,GAAGA,KAAK,CAAC7M,KAAK,EAAE,GAAG6M,KAAK;MACnDG,QAAQ,EAAE,IAAI,CAAC+e,WAAW,EAAE;MAC5BvG,cAAc,EAAE,IAAI,CAACsG,iBAAiB,EAAE;MACxC0b,YAAY,EAAE,IAAI,CAACE,eAAe,EAAE,CAAC1nC,KAAK,EAAE;MAC5CylB,aAAa,EAAE,IAAI,CAACwG,gBAAgB;IACtC,CAAC,CAAC;IACFnpB,KAAK,CAAC6kC,UAAU,CAAC,IAAI,CAAC9b,UAAU,EAAE,CAAC;IACnC,OAAO/oB,KAAK;EACd;;EAEA;AACF;AACA;AACA;AACA;AACA;EACE8kC,SAAS,CAAC9d,MAAM,EAAE;IAChB,IAAI,CAAC+d,OAAO,GAAG/d,MAAM;IACrB,IAAI,CAAC0R,MAAM,EAAE;EACf;AACF;AAEA,iEAAe8L,WAAW;;;;;;;;;;;;;;;ACjF1B;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,MAAMz2C,IAAI,CAAC;EACT;AACF;AACA;EACEM,WAAW,CAACuT,OAAO,EAAE;IACnBA,OAAO,GAAGA,OAAO,IAAI,CAAC,CAAC;;IAEvB;AACJ;AACA;AACA;IACI,IAAI,CAACojC,MAAM,GAAGpjC,OAAO,CAACnS,KAAK,KAAKwB,SAAS,GAAG2Q,OAAO,CAACnS,KAAK,GAAG,IAAI;EAClE;;EAEA;AACF;AACA;AACA;AACA;EACEiQ,KAAK,GAAG;IACN,MAAMjQ,KAAK,GAAG,IAAI,CAAC2lB,QAAQ,EAAE;IAC7B,OAAO,IAAIrnB,IAAI,CAAC;MACd0B,KAAK,EAAEqR,KAAK,CAACC,OAAO,CAACtR,KAAK,CAAC,GAAGA,KAAK,CAACyN,KAAK,EAAE,GAAGzN,KAAK,IAAIwB;IACzD,CAAC,CAAC;EACJ;;EAEA;AACF;AACA;AACA;AACA;EACEmkB,QAAQ,GAAG;IACT,OAAO,IAAI,CAAC4vB,MAAM;EACpB;;EAEA;AACF;AACA;AACA;AACA;AACA;EACEnS,QAAQ,CAACpjC,KAAK,EAAE;IACd,IAAI,CAACu1C,MAAM,GAAGv1C,KAAK;EACrB;AACF;AAEA,iEAAe1B,IAAI;;;;;;;;;;;;;;;;;;;;;;AC9DnB;AACA;AACA;AAC+C;AACL;AACN;AACA;AACC;AACc;AACjB;;AAElC;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAASq3C,cAAc,CAAC1tB,KAAK,EAAEnb,MAAM,EAAE8oC,WAAW,EAAEC,YAAY,EAAE;EAChE,IAAID,WAAW,KAAKp0C,SAAS,IAAIq0C,YAAY,KAAKr0C,SAAS,EAAE;IAC3D,OAAO,CAACo0C,WAAW,GAAG3tB,KAAK,EAAE4tB,YAAY,GAAG/oC,MAAM,CAAC;EACrD;EACA,IAAI8oC,WAAW,KAAKp0C,SAAS,EAAE;IAC7B,OAAOo0C,WAAW,GAAG3tB,KAAK;EAC5B;EACA,IAAI4tB,YAAY,KAAKr0C,SAAS,EAAE;IAC9B,OAAOq0C,YAAY,GAAG/oC,MAAM;EAC9B;EACA,OAAO,CAAC;AACV;;AAEA;AACA;AACA;AACA;AACA;AACA,MAAMy1B,IAAI,SAASiT,iDAAU,CAAC;EAC5B;AACF;AACA;EACE52C,WAAW,CAACuT,OAAO,EAAE;IACnBA,OAAO,GAAGA,OAAO,IAAI,CAAC,CAAC;;IAEvB;AACJ;AACA;IACI,MAAMqe,OAAO,GAAGre,OAAO,CAACqe,OAAO,KAAKhvB,SAAS,GAAG2Q,OAAO,CAACqe,OAAO,GAAG,CAAC;;IAEnE;AACJ;AACA;IACI,MAAM/V,QAAQ,GAAGtI,OAAO,CAACsI,QAAQ,KAAKjZ,SAAS,GAAG2Q,OAAO,CAACsI,QAAQ,GAAG,CAAC;;IAEtE;AACJ;AACA;IACI,MAAMH,KAAK,GAAGnI,OAAO,CAACmI,KAAK,KAAK9Y,SAAS,GAAG2Q,OAAO,CAACmI,KAAK,GAAG,CAAC;;IAE7D;AACJ;AACA;IACI,MAAM2Y,cAAc,GAClB9gB,OAAO,CAAC8gB,cAAc,KAAKzxB,SAAS,GAAG2Q,OAAO,CAAC8gB,cAAc,GAAG,KAAK;IAEvE,KAAK,CAAC;MACJzC,OAAO,EAAEA,OAAO;MAChB/V,QAAQ,EAAEA,QAAQ;MAClBH,KAAK,EAAEA,KAAK;MACZ26B,YAAY,EACV9iC,OAAO,CAAC8iC,YAAY,KAAKzzC,SAAS,GAAG2Q,OAAO,CAAC8iC,YAAY,GAAG,CAAC,CAAC,EAAE,CAAC,CAAC;MACpEhiB,cAAc,EAAEA,cAAc;MAC9BC,aAAa,EAAE/gB,OAAO,CAAC+gB;IACzB,CAAC,CAAC;;IAEF;AACJ;AACA;AACA;IACI,IAAI,CAAC4iB,OAAO,GAAG3jC,OAAO,CAAC4mB,MAAM,KAAKv3B,SAAS,GAAG2Q,OAAO,CAAC4mB,MAAM,GAAG,CAAC,GAAG,EAAE,GAAG,CAAC;;IAEzE;AACJ;AACA;AACA;IACI,IAAI,CAACgd,iBAAiB,GAAG,IAAI;;IAE7B;AACJ;AACA;AACA;IACI,IAAI,CAACC,aAAa,GAChB7jC,OAAO,CAAC8jC,YAAY,KAAKz0C,SAAS,GAAG2Q,OAAO,CAAC8jC,YAAY,GAAG,UAAU;;IAExE;AACJ;AACA;AACA;IACI,IAAI,CAACC,aAAa,GAChB/jC,OAAO,CAACyxB,YAAY,KAAKpiC,SAAS,GAAG2Q,OAAO,CAACyxB,YAAY,GAAG,UAAU;;IAExE;AACJ;AACA;AACA;IACI,IAAI,CAACuS,aAAa,GAChBhkC,OAAO,CAAC0xB,YAAY,KAAKriC,SAAS,GAAG2Q,OAAO,CAAC0xB,YAAY,GAAG,UAAU;;IAExE;AACJ;AACA;AACA;IACI,IAAI,CAACuS,YAAY,GACfjkC,OAAO,CAACkkC,WAAW,KAAK70C,SAAS,GAAG2Q,OAAO,CAACkkC,WAAW,GAAG,IAAI;;IAEhE;AACJ;AACA;IACI,MAAMxkB,KAAK,GAAG1f,OAAO,CAACsxB,GAAG,KAAKjiC,SAAS,GAAG2Q,OAAO,CAACsxB,GAAG,GAAG,IAAI;;IAE5D;AACJ;AACA;AACA;IACI,IAAI,CAAC6S,QAAQ,GAAGnkC,OAAO,CAACmxB,OAAO;;IAE/B;AACJ;AACA;IACI,IAAIiT,GAAG,GAAGpkC,OAAO,CAACokC,GAAG;IAErBxnC,mDAAM,CAAC,EAAEwnC,GAAG,KAAK/0C,SAAS,IAAIqwB,KAAK,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC;IAC1C9iB,mDAAM,CAAC,CAAC8iB,KAAK,IAAKA,KAAK,IAAI,IAAI,CAACykB,QAAS,EAAE,CAAC,CAAC,CAAC,CAAC;;IAE/C,IAAI,CAACC,GAAG,KAAK/0C,SAAS,IAAI+0C,GAAG,CAACnyC,MAAM,KAAK,CAAC,KAAKytB,KAAK,EAAE;MACpD0kB,GAAG,GAAG,+BAAiC1kB,KAAK,CAAE0kB,GAAG,IAAI5V,gDAAM,CAAC9O,KAAK,CAAC;IACpE;IACA9iB,mDAAM,CAACwnC,GAAG,KAAK/0C,SAAS,IAAI+0C,GAAG,CAACnyC,MAAM,GAAG,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC;;IAEhD;IACA2K,mDAAM,CACJ,EACE,CAACoD,OAAO,CAAC8V,KAAK,KAAKzmB,SAAS,IAAI2Q,OAAO,CAACrF,MAAM,KAAKtL,SAAS,KAC5D2Q,OAAO,CAACmI,KAAK,KAAK9Y,SAAS,CAC5B,EACD,EAAE,CACH;;IAED;AACJ;AACA;IACI,MAAM2rC,UAAU,GACdh7B,OAAO,CAACokC,GAAG,KAAK/0C,SAAS,GAAG0qC,2DAAe,GAAGA,6DAAiB;;IAEjE;AACJ;AACA;AACA;IACI,IAAI,CAACqJ,MAAM,GAAGpjC,OAAO,CAACnS,KAAK,KAAKwB,SAAS,GAAGi0C,kDAAO,CAACtjC,OAAO,CAACnS,KAAK,CAAC,GAAG,IAAI;;IAEzE;AACJ;AACA;AACA;IACI,IAAI,CAACw2C,UAAU,GAAGd,kDAAY,CAC5B7jB,KAAK,EACL,qBAAuB0kB,GAAG,EAC1B,IAAI,CAACD,QAAQ,KAAK90C,SAAS,GAAG,IAAI,CAAC80C,QAAQ,GAAG,IAAI,EAClD,IAAI,CAACF,YAAY,EACjBjJ,UAAU,EACV,IAAI,CAACoI,MAAM,CACZ;;IAED;AACJ;AACA;AACA;IACI,IAAI,CAACkB,OAAO,GAAGtkC,OAAO,CAAC+F,MAAM,KAAK1W,SAAS,GAAG2Q,OAAO,CAAC+F,MAAM,GAAG,CAAC,CAAC,EAAE,CAAC,CAAC;IACrE;AACJ;AACA;AACA;IACI,IAAI,CAACw+B,aAAa,GAChBvkC,OAAO,CAACwkC,YAAY,KAAKn1C,SAAS,GAAG2Q,OAAO,CAACwkC,YAAY,GAAG,UAAU;;IAExE;AACJ;AACA;AACA;IACI,IAAI,CAACC,OAAO,GAAG,IAAI;;IAEnB;AACJ;AACA;AACA;IACI,IAAI,CAACC,KAAK,GAAG1kC,OAAO,CAACpO,IAAI,KAAKvC,SAAS,GAAG2Q,OAAO,CAACpO,IAAI,GAAG,IAAI;;IAE7D;AACJ;AACA;IACI,IAAIoO,OAAO,CAAC8V,KAAK,KAAKzmB,SAAS,IAAI2Q,OAAO,CAACrF,MAAM,KAAKtL,SAAS,EAAE;MAC/D,IAAIymB,KAAK,EAAEnb,MAAM;MACjB,IAAIqF,OAAO,CAACpO,IAAI,EAAE;QAChB,CAACkkB,KAAK,EAAEnb,MAAM,CAAC,GAAGqF,OAAO,CAACpO,IAAI;MAChC,CAAC,MAAM;QACL,MAAM8tB,KAAK,GAAG,IAAI,CAACwH,QAAQ,CAAC,CAAC,CAAC;QAC9B,IACExH,KAAK,YAAYilB,iBAAiB,IACjCjlB,KAAK,CAAC0kB,GAAG,IAAI1kB,KAAK,CAAC/wB,QAAS,EAC7B;UACAmnB,KAAK,GAAG4J,KAAK,CAAC5J,KAAK;UACnBnb,MAAM,GAAG+kB,KAAK,CAAC/kB,MAAM;QACvB,CAAC,MAAM;UACL,IAAI,CAACiqC,eAAe,GAAG5kC,OAAO;UAC9B,MAAM8E,MAAM,GAAG,MAAM;YACnB,IAAI,CAACs2B,mBAAmB,CAACt2B,MAAM,CAAC;YAChC,IAAI,CAAC,IAAI,CAAC8/B,eAAe,EAAE;cACzB;YACF;YACA,MAAM5Y,SAAS,GAAG,IAAI,CAACqY,UAAU,CAACvd,OAAO,EAAE;YAC3C,IAAI,CAAC+d,QAAQ,CACXrB,cAAc,CACZxX,SAAS,CAAC,CAAC,CAAC,EACZA,SAAS,CAAC,CAAC,CAAC,EACZhsB,OAAO,CAAC8V,KAAK,EACb9V,OAAO,CAACrF,MAAM,CACf,CACF;UACH,CAAC;UACD,IAAI,CAAC2gC,iBAAiB,CAACx2B,MAAM,CAAC;UAC9B;QACF;MACF;MACA,IAAIgR,KAAK,KAAKzmB,SAAS,EAAE;QACvB,IAAI,CAACw1C,QAAQ,CACXrB,cAAc,CAAC1tB,KAAK,EAAEnb,MAAM,EAAEqF,OAAO,CAAC8V,KAAK,EAAE9V,OAAO,CAACrF,MAAM,CAAC,CAC7D;MACH;IACF;EACF;;EAEA;AACF;AACA;AACA;AACA;EACEmD,KAAK,GAAG;IACN,IAAIqK,KAAK,EAAE2N,KAAK,EAAEnb,MAAM;IACxB,IAAI,IAAI,CAACiqC,eAAe,EAAE;MACxB9uB,KAAK,GAAG,IAAI,CAAC8uB,eAAe,CAAC9uB,KAAK;MAClCnb,MAAM,GAAG,IAAI,CAACiqC,eAAe,CAACjqC,MAAM;IACtC,CAAC,MAAM;MACLwN,KAAK,GAAG,IAAI,CAACwpB,QAAQ,EAAE;MACvBxpB,KAAK,GAAGjJ,KAAK,CAACC,OAAO,CAACgJ,KAAK,CAAC,GAAGA,KAAK,CAAC7M,KAAK,EAAE,GAAG6M,KAAK;IACtD;IACA,MAAMrK,KAAK,GAAG,IAAIsyB,IAAI,CAAC;MACrBxJ,MAAM,EAAE,IAAI,CAAC+c,OAAO,CAACroC,KAAK,EAAE;MAC5BwoC,YAAY,EAAE,IAAI,CAACD,aAAa;MAChCpS,YAAY,EAAE,IAAI,CAACsS,aAAa;MAChCrS,YAAY,EAAE,IAAI,CAACsS,aAAa;MAChCn2C,KAAK,EACH,IAAI,CAACu1C,MAAM,IAAI,IAAI,CAACA,MAAM,CAAC9nC,KAAK,GAC5B,IAAI,CAAC8nC,MAAM,CAAC9nC,KAAK,EAAE,GACnB,IAAI,CAAC8nC,MAAM,IAAI/zC,SAAS;MAC9B60C,WAAW,EAAE,IAAI,CAACD,YAAY;MAC9B9S,OAAO,EAAE,IAAI,CAACgT,QAAQ;MACtBp+B,MAAM,EAAE,IAAI,CAACu+B,OAAO,CAAChpC,KAAK,EAAE;MAC5BkpC,YAAY,EAAE,IAAI,CAACD,aAAa;MAChClmB,OAAO,EAAE,IAAI,CAAC8I,UAAU,EAAE;MAC1BrG,cAAc,EAAE,IAAI,CAACsG,iBAAiB,EAAE;MACxC9e,QAAQ,EAAE,IAAI,CAAC+e,WAAW,EAAE;MAC5Blf,KAAK;MACL2N,KAAK;MACLnb,MAAM;MACN/I,IAAI,EAAE,IAAI,CAAC8yC,KAAK,KAAK,IAAI,GAAG,IAAI,CAACA,KAAK,CAACppC,KAAK,EAAE,GAAGjM,SAAS;MAC1D+0C,GAAG,EAAE,IAAI,CAACU,MAAM,EAAE;MAClBhC,YAAY,EAAE,IAAI,CAACE,eAAe,EAAE,CAAC1nC,KAAK,EAAE;MAC5CylB,aAAa,EAAE,IAAI,CAACwG,gBAAgB;IACtC,CAAC,CAAC;IACF,OAAOzpB,KAAK;EACd;;EAEA;AACF;AACA;AACA;AACA;AACA;EACE+oB,SAAS,GAAG;IACV,IAAID,MAAM,GAAG,IAAI,CAACgd,iBAAiB;IACnC,IAAI,CAAChd,MAAM,EAAE;MACXA,MAAM,GAAG,IAAI,CAAC+c,OAAO;MACrB,MAAM/xC,IAAI,GAAG,IAAI,CAACk1B,OAAO,EAAE;MAC3B,IACE,IAAI,CAACid,aAAa,IAAI,UAAU,IAChC,IAAI,CAACC,aAAa,IAAI,UAAU,EAChC;QACA,IAAI,CAACpyC,IAAI,EAAE;UACT,OAAO,IAAI;QACb;QACAg1B,MAAM,GAAG,IAAI,CAAC+c,OAAO,CAACroC,KAAK,EAAE;QAC7B,IAAI,IAAI,CAACyoC,aAAa,IAAI,UAAU,EAAE;UACpCnd,MAAM,CAAC,CAAC,CAAC,IAAIh1B,IAAI,CAAC,CAAC,CAAC;QACtB;QACA,IAAI,IAAI,CAACoyC,aAAa,IAAI,UAAU,EAAE;UACpCpd,MAAM,CAAC,CAAC,CAAC,IAAIh1B,IAAI,CAAC,CAAC,CAAC;QACtB;MACF;MAEA,IAAI,IAAI,CAACiyC,aAAa,IAAI,UAAU,EAAE;QACpC,IAAI,CAACjyC,IAAI,EAAE;UACT,OAAO,IAAI;QACb;QACA,IAAIg1B,MAAM,KAAK,IAAI,CAAC+c,OAAO,EAAE;UAC3B/c,MAAM,GAAG,IAAI,CAAC+c,OAAO,CAACroC,KAAK,EAAE;QAC/B;QACA,IACE,IAAI,CAACuoC,aAAa,IAAI,WAAW,IACjC,IAAI,CAACA,aAAa,IAAI,cAAc,EACpC;UACAjd,MAAM,CAAC,CAAC,CAAC,GAAG,CAACA,MAAM,CAAC,CAAC,CAAC,GAAGh1B,IAAI,CAAC,CAAC,CAAC;QAClC;QACA,IACE,IAAI,CAACiyC,aAAa,IAAI,aAAa,IACnC,IAAI,CAACA,aAAa,IAAI,cAAc,EACpC;UACAjd,MAAM,CAAC,CAAC,CAAC,GAAG,CAACA,MAAM,CAAC,CAAC,CAAC,GAAGh1B,IAAI,CAAC,CAAC,CAAC;QAClC;MACF;MACA,IAAI,CAACgyC,iBAAiB,GAAGhd,MAAM;IACjC;IACA,MAAMkc,YAAY,GAAG,IAAI,CAACE,eAAe,EAAE;IAC3C,MAAM76B,KAAK,GAAG,IAAI,CAACmf,aAAa,EAAE;IAClC;IACA;IACA,OAAO,CACLV,MAAM,CAAC,CAAC,CAAC,GAAGkc,YAAY,CAAC,CAAC,CAAC,GAAG36B,KAAK,CAAC,CAAC,CAAC,EACtCye,MAAM,CAAC,CAAC,CAAC,GAAGkc,YAAY,CAAC,CAAC,CAAC,GAAG36B,KAAK,CAAC,CAAC,CAAC,CACvC;EACH;;EAEA;AACF;AACA;AACA;AACA;AACA;AACA;EACE48B,SAAS,CAACne,MAAM,EAAE;IAChB,IAAI,CAAC+c,OAAO,GAAG/c,MAAM;IACrB,IAAI,CAACgd,iBAAiB,GAAG,IAAI;EAC/B;;EAEA;AACF;AACA;AACA;AACA;EACEpwB,QAAQ,GAAG;IACT,OAAO,IAAI,CAAC4vB,MAAM;EACpB;;EAEA;AACF;AACA;AACA;AACA;AACA;EACElc,QAAQ,CAAC5W,UAAU,EAAE;IACnB,OAAO,IAAI,CAAC+zB,UAAU,CAACnd,QAAQ,CAAC5W,UAAU,CAAC;EAC7C;;EAEA;AACF;AACA;AACA;AACA;AACA;EACE0W,aAAa,CAAC1W,UAAU,EAAE;IACxB,OAAO,IAAI,CAAC+zB,UAAU,CAACrd,aAAa,CAAC1W,UAAU,CAAC;EAClD;;EAEA;AACF;AACA;EACE8gB,YAAY,GAAG;IACb,OAAO,IAAI,CAACiT,UAAU,CAACvd,OAAO,EAAE;EAClC;;EAEA;AACF;AACA;EACEmU,aAAa,GAAG;IACd,OAAO,IAAI,CAACoJ,UAAU,CAACpJ,aAAa,EAAE;EACxC;;EAEA;AACF;AACA;EACEhU,oBAAoB,GAAG;IACrB,OAAO,IAAI,CAACod,UAAU,CAACpd,oBAAoB,EAAE;EAC/C;;EAEA;AACF;AACA;AACA;AACA;EACEF,SAAS,GAAG;IACV,IAAI,IAAI,CAAC0d,OAAO,EAAE;MAChB,OAAO,IAAI,CAACA,OAAO;IACrB;IACA,IAAI1+B,MAAM,GAAG,IAAI,CAACu+B,OAAO;IAEzB,IAAI,IAAI,CAACC,aAAa,IAAI,UAAU,EAAE;MACpC,MAAM3yC,IAAI,GAAG,IAAI,CAACk1B,OAAO,EAAE;MAC3B,MAAMke,aAAa,GAAG,IAAI,CAACX,UAAU,CAACvd,OAAO,EAAE;MAC/C,IAAI,CAACl1B,IAAI,IAAI,CAACozC,aAAa,EAAE;QAC3B,OAAO,IAAI;MACb;MACAj/B,MAAM,GAAGA,MAAM,CAACzK,KAAK,EAAE;MACvB,IACE,IAAI,CAACipC,aAAa,IAAI,WAAW,IACjC,IAAI,CAACA,aAAa,IAAI,cAAc,EACpC;QACAx+B,MAAM,CAAC,CAAC,CAAC,GAAGi/B,aAAa,CAAC,CAAC,CAAC,GAAGpzC,IAAI,CAAC,CAAC,CAAC,GAAGmU,MAAM,CAAC,CAAC,CAAC;MACpD;MACA,IACE,IAAI,CAACw+B,aAAa,IAAI,aAAa,IACnC,IAAI,CAACA,aAAa,IAAI,cAAc,EACpC;QACAx+B,MAAM,CAAC,CAAC,CAAC,GAAGi/B,aAAa,CAAC,CAAC,CAAC,GAAGpzC,IAAI,CAAC,CAAC,CAAC,GAAGmU,MAAM,CAAC,CAAC,CAAC;MACpD;IACF;IACA,IAAI,CAAC0+B,OAAO,GAAG1+B,MAAM;IACrB,OAAO,IAAI,CAAC0+B,OAAO;EACrB;;EAEA;AACF;AACA;AACA;AACA;EACEK,MAAM,GAAG;IACP,OAAO,IAAI,CAACT,UAAU,CAACS,MAAM,EAAE;EACjC;;EAEA;AACF;AACA;AACA;AACA;EACEhe,OAAO,GAAG;IACR,OAAO,CAAC,IAAI,CAAC4d,KAAK,GAAG,IAAI,CAACL,UAAU,CAACvd,OAAO,EAAE,GAAG,IAAI,CAAC4d,KAAK;EAC7D;;EAEA;AACF;AACA;AACA;AACA;EACEnwB,QAAQ,GAAG;IACT,MAAMpM,KAAK,GAAG,IAAI,CAACmf,aAAa,EAAE;IAClC,IAAI,IAAI,CAACod,KAAK,EAAE;MACd,OAAO,IAAI,CAACA,KAAK,CAAC,CAAC,CAAC,GAAGv8B,KAAK,CAAC,CAAC,CAAC;IACjC;IACA,IAAI,IAAI,CAACk8B,UAAU,CAACpJ,aAAa,EAAE,IAAIlB,6DAAiB,EAAE;MACxD,OAAO,IAAI,CAACsK,UAAU,CAACvd,OAAO,EAAE,CAAC,CAAC,CAAC,GAAG3e,KAAK,CAAC,CAAC,CAAC;IAChD;IACA,OAAO9Y,SAAS;EAClB;;EAEA;AACF;AACA;AACA;AACA;EACE41C,SAAS,GAAG;IACV,MAAM98B,KAAK,GAAG,IAAI,CAACmf,aAAa,EAAE;IAClC,IAAI,IAAI,CAACod,KAAK,EAAE;MACd,OAAO,IAAI,CAACA,KAAK,CAAC,CAAC,CAAC,GAAGv8B,KAAK,CAAC,CAAC,CAAC;IACjC;IACA,IAAI,IAAI,CAACk8B,UAAU,CAACpJ,aAAa,EAAE,IAAIlB,6DAAiB,EAAE;MACxD,OAAO,IAAI,CAACsK,UAAU,CAACvd,OAAO,EAAE,CAAC,CAAC,CAAC,GAAG3e,KAAK,CAAC,CAAC,CAAC;IAChD;IACA,OAAO9Y,SAAS;EAClB;;EAEA;AACF;AACA;AACA;AACA;AACA;EACEw1C,QAAQ,CAAC18B,KAAK,EAAE;IACd,OAAO,IAAI,CAACy8B,eAAe;IAC3B,KAAK,CAACC,QAAQ,CAAC18B,KAAK,CAAC;EACvB;;EAEA;AACF;AACA;EACEmzB,iBAAiB,CAACP,QAAQ,EAAE;IAC1B,IAAI,CAACsJ,UAAU,CAACviC,gBAAgB,CAACnF,mEAAgB,EAAEo+B,QAAQ,CAAC;EAC9D;;EAEA;AACF;AACA;AACA;AACA;AACA;AACA;EACE5/B,IAAI,GAAG;IACL,IAAI,CAACkpC,UAAU,CAAClpC,IAAI,EAAE;EACxB;;EAEA;AACF;AACA;EACEigC,mBAAmB,CAACL,QAAQ,EAAE;IAC5B,IAAI,CAACsJ,UAAU,CAACa,mBAAmB,CAACvoC,mEAAgB,EAAEo+B,QAAQ,CAAC;EACjE;AACF;AAEA,iEAAe3K,IAAI;;;;;;;;;;;;;;;;;;;;;;;AC7jBnB;AACA;AACA;;AAE8C;AACC;AACL;AACL;AACW;AACa;AACrB;;AAExC;AACA;AACA;AACA,IAAIoV,kBAAkB,GAAG,IAAI;AAE7B,MAAMC,SAAS,SAASN,yDAAW,CAAC;EAClC;AACF;AACA;AACA;AACA;AACA;AACA;AACA;EACE14C,WAAW,CAACizB,KAAK,EAAE0kB,GAAG,EAAExyC,IAAI,EAAEsyC,WAAW,EAAElJ,UAAU,EAAEntC,KAAK,EAAE;IAC5D,KAAK,EAAE;;IAEP;AACJ;AACA;AACA;IACI,IAAI,CAAC83B,kBAAkB,GAAG,IAAI;;IAE9B;AACJ;AACA;AACA;IACI,IAAI,CAACC,MAAM,GAAGlG,KAAK;;IAEnB;AACJ;AACA;AACA;IACI,IAAI,CAACukB,YAAY,GAAGC,WAAW;;IAE/B;AACJ;AACA;AACA;IACI,IAAI,CAACwB,OAAO,GAAG,CAAC,CAAC;;IAEjB;AACJ;AACA;AACA;IACI,IAAI,CAACtC,MAAM,GAAGv1C,KAAK;;IAEnB;AACJ;AACA;AACA;IACI,IAAI,CAAC83C,SAAS,GAAG,IAAI;;IAErB;AACJ;AACA;AACA;IACI,IAAI,CAACC,WAAW,GAAG5K,UAAU;;IAE7B;AACJ;AACA;AACA;IACI,IAAI,CAAC0J,KAAK,GAAG9yC,IAAI;;IAEjB;AACJ;AACA;AACA;IACI,IAAI,CAACi0C,IAAI,GAAGzB,GAAG;;IAEf;AACJ;AACA;IACI,IAAI,CAAC0B,QAAQ;EACf;;EAEA;AACF;AACA;EACEC,gBAAgB,GAAG;IACjB,IAAI,CAACngB,MAAM,GAAG,IAAIogB,KAAK,EAAE;IACzB,IAAI,IAAI,CAAC/B,YAAY,KAAK,IAAI,EAAE;MAC9B,IAAI,CAACre,MAAM,CAACse,WAAW,GAAG,IAAI,CAACD,YAAY;IAC7C;EACF;;EAEA;AACF;AACA;AACA;EACEgC,UAAU,GAAG;IACX,IAAI,IAAI,CAACH,QAAQ,KAAKz2C,SAAS,IAAI,IAAI,CAACu2C,WAAW,KAAK7L,6DAAiB,EAAE;MACzE,IAAI,CAACyL,kBAAkB,EAAE;QACvBA,kBAAkB,GAAG3iB,8DAAqB,CAAC,CAAC,EAAE,CAAC,EAAExzB,SAAS,EAAE;UAC1Dg1B,kBAAkB,EAAE;QACtB,CAAC,CAAC;MACJ;MACAmhB,kBAAkB,CAACtb,SAAS,CAAC,IAAI,CAACtE,MAAM,EAAE,CAAC,EAAE,CAAC,CAAC;MAC/C,IAAI;QACF4f,kBAAkB,CAAC9gB,YAAY,CAAC,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC;QAC3C,IAAI,CAACohB,QAAQ,GAAG,KAAK;MACvB,CAAC,CAAC,OAAOhtC,CAAC,EAAE;QACV0sC,kBAAkB,GAAG,IAAI;QACzB,IAAI,CAACM,QAAQ,GAAG,IAAI;MACtB;IACF;IACA,OAAO,IAAI,CAACA,QAAQ,KAAK,IAAI;EAC/B;;EAEA;AACF;AACA;EACEI,oBAAoB,GAAG;IACrB,IAAI,CAACljC,aAAa,CAACrG,mEAAgB,CAAC;EACtC;;EAEA;AACF;AACA;EACEwpC,iBAAiB,GAAG;IAClB,IAAI,CAACP,WAAW,GAAG7L,4DAAgB;IACnC,IAAI,CAACqM,cAAc,EAAE;IACrB,IAAI,CAACF,oBAAoB,EAAE;EAC7B;;EAEA;AACF;AACA;EACEG,gBAAgB,GAAG;IACjB,IAAI,CAACT,WAAW,GAAG7L,6DAAiB;IACpC,IAAI,IAAI,CAAC2K,KAAK,EAAE;MACd,IAAI,CAAC9e,MAAM,CAAC9P,KAAK,GAAG,IAAI,CAAC4uB,KAAK,CAAC,CAAC,CAAC;MACjC,IAAI,CAAC9e,MAAM,CAACjrB,MAAM,GAAG,IAAI,CAAC+pC,KAAK,CAAC,CAAC,CAAC;IACpC,CAAC,MAAM;MACL,IAAI,CAACA,KAAK,GAAG,CAAC,IAAI,CAAC9e,MAAM,CAAC9P,KAAK,EAAE,IAAI,CAAC8P,MAAM,CAACjrB,MAAM,CAAC;IACtD;IACA,IAAI,CAACyrC,cAAc,EAAE;IACrB,IAAI,CAACF,oBAAoB,EAAE;EAC7B;;EAEA;AACF;AACA;AACA;EACEhf,QAAQ,CAAC5W,UAAU,EAAE;IACnB,IAAI,CAAC,IAAI,CAACsV,MAAM,EAAE;MAChB,IAAI,CAACmgB,gBAAgB,EAAE;IACzB;IACA,IAAI,CAACO,aAAa,CAACh2B,UAAU,CAAC;IAC9B,OAAO,IAAI,CAACo1B,OAAO,CAACp1B,UAAU,CAAC,GAAG,IAAI,CAACo1B,OAAO,CAACp1B,UAAU,CAAC,GAAG,IAAI,CAACsV,MAAM;EAC1E;;EAEA;AACF;AACA;AACA;EACEoB,aAAa,CAAC1W,UAAU,EAAE;IACxB,IAAI,CAACg2B,aAAa,CAACh2B,UAAU,CAAC;IAC9B,OAAO,IAAI,CAACo1B,OAAO,CAACp1B,UAAU,CAAC,GAAGA,UAAU,GAAG,CAAC;EAClD;;EAEA;AACF;AACA;EACE2qB,aAAa,GAAG;IACd,OAAO,IAAI,CAAC2K,WAAW;EACzB;;EAEA;AACF;AACA;EACE3e,oBAAoB,GAAG;IACrB,IAAI,CAAC,IAAI,CAACrB,MAAM,EAAE;MAChB,IAAI,CAACmgB,gBAAgB,EAAE;IACzB;IACA,IAAI,CAAC,IAAI,CAACpgB,kBAAkB,EAAE;MAC5B,IAAI,IAAI,CAACsgB,UAAU,EAAE,EAAE;QACrB,MAAMnwB,KAAK,GAAG,IAAI,CAAC4uB,KAAK,CAAC,CAAC,CAAC;QAC3B,MAAM/pC,MAAM,GAAG,IAAI,CAAC+pC,KAAK,CAAC,CAAC,CAAC;QAC5B,MAAMzoB,OAAO,GAAG4G,8DAAqB,CAAC/M,KAAK,EAAEnb,MAAM,CAAC;QACpDshB,OAAO,CAACsV,QAAQ,CAAC,CAAC,EAAE,CAAC,EAAEzb,KAAK,EAAEnb,MAAM,CAAC;QACrC,IAAI,CAACgrB,kBAAkB,GAAG1J,OAAO,CAACsC,MAAM;MAC1C,CAAC,MAAM;QACL,IAAI,CAACoH,kBAAkB,GAAG,IAAI,CAACC,MAAM;MACvC;IACF;IACA,OAAO,IAAI,CAACD,kBAAkB;EAChC;;EAEA;AACF;AACA;AACA;EACEmB,OAAO,GAAG;IACR,OAAO,IAAI,CAAC4d,KAAK;EACnB;;EAEA;AACF;AACA;EACEI,MAAM,GAAG;IACP,OAAO,IAAI,CAACe,IAAI;EAClB;;EAEA;AACF;AACA;EACE1qC,IAAI,GAAG;IACL,IAAI,IAAI,CAACyqC,WAAW,KAAK7L,2DAAe,EAAE;MACxC;IACF;IACA,IAAI,CAAC,IAAI,CAACnU,MAAM,EAAE;MAChB,IAAI,CAACmgB,gBAAgB,EAAE;IACzB;IAEA,IAAI,CAACH,WAAW,GAAG7L,8DAAkB;IACrC,IAAI;MACF,+BAAiC,IAAI,CAACnU,MAAM,CAAEwe,GAAG,GAAG,IAAI,CAACyB,IAAI;IAC/D,CAAC,CAAC,OAAO/sC,CAAC,EAAE;MACV,IAAI,CAACqtC,iBAAiB,EAAE;IAC1B;IACA,IAAI,CAACR,SAAS,GAAGJ,sDAAW,CAC1B,IAAI,CAAC3f,MAAM,EACX,IAAI,CAACygB,gBAAgB,CAAC1lC,IAAI,CAAC,IAAI,CAAC,EAChC,IAAI,CAACwlC,iBAAiB,CAACxlC,IAAI,CAAC,IAAI,CAAC,CAClC;EACH;;EAEA;AACF;AACA;AACA;EACE2lC,aAAa,CAACh2B,UAAU,EAAE;IACxB,IACE,CAAC,IAAI,CAAC8yB,MAAM,IACZ,IAAI,CAACsC,OAAO,CAACp1B,UAAU,CAAC,IACxB,IAAI,CAACs1B,WAAW,KAAK7L,6DAAiB,EACtC;MACA;IACF;IAEA,MAAMra,KAAK,GAAG,IAAI,CAACkG,MAAM;IACzB,MAAMrH,MAAM,GAAGre,QAAQ,CAACC,aAAa,CAAC,QAAQ,CAAC;IAC/Coe,MAAM,CAACzI,KAAK,GAAGhe,IAAI,CAACoC,IAAI,CAACwlB,KAAK,CAAC5J,KAAK,GAAGxF,UAAU,CAAC;IAClDiO,MAAM,CAAC5jB,MAAM,GAAG7C,IAAI,CAACoC,IAAI,CAACwlB,KAAK,CAAC/kB,MAAM,GAAG2V,UAAU,CAAC;IAEpD,MAAMk2B,GAAG,GAAGjoB,MAAM,CAACkoB,UAAU,CAAC,IAAI,CAAC;IACnCD,GAAG,CAACr+B,KAAK,CAACmI,UAAU,EAAEA,UAAU,CAAC;IACjCk2B,GAAG,CAACtc,SAAS,CAACxK,KAAK,EAAE,CAAC,EAAE,CAAC,CAAC;IAE1B8mB,GAAG,CAACE,wBAAwB,GAAG,UAAU;IACzCF,GAAG,CAAC93B,SAAS,GAAG02B,mDAAQ,CAAC,IAAI,CAAChC,MAAM,CAAC;IACrCoD,GAAG,CAACjV,QAAQ,CAAC,CAAC,EAAE,CAAC,EAAEhT,MAAM,CAACzI,KAAK,GAAGxF,UAAU,EAAEiO,MAAM,CAAC5jB,MAAM,GAAG2V,UAAU,CAAC;IAEzEk2B,GAAG,CAACE,wBAAwB,GAAG,gBAAgB;IAC/CF,GAAG,CAACtc,SAAS,CAACxK,KAAK,EAAE,CAAC,EAAE,CAAC,CAAC;IAE1B,IAAI,CAACgmB,OAAO,CAACp1B,UAAU,CAAC,GAAGiO,MAAM;EACnC;;EAEA;AACF;AACA;AACA;AACA;EACE6nB,cAAc,GAAG;IACf,IAAI,IAAI,CAACT,SAAS,EAAE;MAClB,IAAI,CAACA,SAAS,EAAE;MAChB,IAAI,CAACA,SAAS,GAAG,IAAI;IACvB;EACF;AACF;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACO,SAASr0C,GAAG,CAACouB,KAAK,EAAE0kB,GAAG,EAAExyC,IAAI,EAAEsyC,WAAW,EAAElJ,UAAU,EAAEntC,KAAK,EAAE;EACpE,IAAI84C,SAAS,GAAGrB,0DAAkB,CAAClB,GAAG,EAAEF,WAAW,EAAEr2C,KAAK,CAAC;EAC3D,IAAI,CAAC84C,SAAS,EAAE;IACdA,SAAS,GAAG,IAAIlB,SAAS,CAAC/lB,KAAK,EAAE0kB,GAAG,EAAExyC,IAAI,EAAEsyC,WAAW,EAAElJ,UAAU,EAAEntC,KAAK,CAAC;IAC3Ey3C,0DAAkB,CAAClB,GAAG,EAAEF,WAAW,EAAEr2C,KAAK,EAAE84C,SAAS,CAAC;EACxD;EACA,OAAOA,SAAS;AAClB;AAEA,iEAAelB,SAAS;;;;;;;;;;;;;;;;;AChTxB;AACA;AACA;AACoC;AACF;;AAElC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,MAAMpC,UAAU,CAAC;EACf;AACF;AACA;EACE52C,WAAW,CAACuT,OAAO,EAAE;IACnB;AACJ;AACA;AACA;IACI,IAAI,CAACimB,QAAQ,GAAGjmB,OAAO,CAACqe,OAAO;;IAE/B;AACJ;AACA;AACA;IACI,IAAI,CAAC+H,eAAe,GAAGpmB,OAAO,CAAC8gB,cAAc;;IAE7C;AACJ;AACA;AACA;IACI,IAAI,CAACuF,SAAS,GAAGrmB,OAAO,CAACsI,QAAQ;;IAEjC;AACJ;AACA;AACA;IACI,IAAI,CAACge,MAAM,GAAGtmB,OAAO,CAACmI,KAAK;;IAE3B;AACJ;AACA;AACA;IACI,IAAI,CAAC2+B,WAAW,GAAGD,gDAAM,CAAC7mC,OAAO,CAACmI,KAAK,CAAC;;IAExC;AACJ;AACA;AACA;IACI,IAAI,CAAC4+B,aAAa,GAAG/mC,OAAO,CAAC8iC,YAAY;;IAEzC;AACJ;AACA;AACA;IACI,IAAI,CAACtc,cAAc,GAAGxmB,OAAO,CAAC+gB,aAAa;EAC7C;;EAEA;AACF;AACA;AACA;AACA;EACEjjB,KAAK,GAAG;IACN,MAAMqK,KAAK,GAAG,IAAI,CAACwpB,QAAQ,EAAE;IAC7B,OAAO,IAAI0R,UAAU,CAAC;MACpBhlB,OAAO,EAAE,IAAI,CAAC8I,UAAU,EAAE;MAC1Bhf,KAAK,EAAEjJ,KAAK,CAACC,OAAO,CAACgJ,KAAK,CAAC,GAAGA,KAAK,CAAC7M,KAAK,EAAE,GAAG6M,KAAK;MACnDG,QAAQ,EAAE,IAAI,CAAC+e,WAAW,EAAE;MAC5BvG,cAAc,EAAE,IAAI,CAACsG,iBAAiB,EAAE;MACxC0b,YAAY,EAAE,IAAI,CAACE,eAAe,EAAE,CAAC1nC,KAAK,EAAE;MAC5CylB,aAAa,EAAE,IAAI,CAACwG,gBAAgB;IACtC,CAAC,CAAC;EACJ;;EAEA;AACF;AACA;AACA;AACA;EACEJ,UAAU,GAAG;IACX,OAAO,IAAI,CAAClB,QAAQ;EACtB;;EAEA;AACF;AACA;AACA;AACA;EACEmB,iBAAiB,GAAG;IAClB,OAAO,IAAI,CAAChB,eAAe;EAC7B;;EAEA;AACF;AACA;AACA;AACA;EACEiB,WAAW,GAAG;IACZ,OAAO,IAAI,CAAChB,SAAS;EACvB;;EAEA;AACF;AACA;AACA;AACA;EACEsL,QAAQ,GAAG;IACT,OAAO,IAAI,CAACrL,MAAM;EACpB;;EAEA;AACF;AACA;AACA;EACEgB,aAAa,GAAG;IACd,OAAO,IAAI,CAACwf,WAAW;EACzB;;EAEA;AACF;AACA;AACA;AACA;EACE9D,eAAe,GAAG;IAChB,OAAO,IAAI,CAAC+D,aAAa;EAC3B;;EAEA;AACF;AACA;AACA;AACA;EACExf,gBAAgB,GAAG;IACjB,OAAO,IAAI,CAACf,cAAc;EAC5B;;EAEA;AACF;AACA;AACA;AACA;AACA;EACEK,SAAS,GAAG;IACV,OAAO+f,kDAAQ,EAAE;EACnB;;EAEA;AACF;AACA;AACA;AACA;AACA;EACE1f,QAAQ,CAAC5W,UAAU,EAAE;IACnB,OAAOs2B,kDAAQ,EAAE;EACnB;;EAEA;AACF;AACA;AACA;EACE3f,oBAAoB,GAAG;IACrB,OAAO2f,kDAAQ,EAAE;EACnB;;EAEA;AACF;AACA;AACA;AACA;EACE5f,aAAa,CAAC1W,UAAU,EAAE;IACxB,OAAO,CAAC;EACV;;EAEA;AACF;AACA;AACA;EACE2qB,aAAa,GAAG;IACd,OAAO2L,kDAAQ,EAAE;EACnB;;EAEA;AACF;AACA;AACA;EACExV,YAAY,GAAG;IACb,OAAOwV,kDAAQ,EAAE;EACnB;;EAEA;AACF;AACA;AACA;AACA;EACE7f,SAAS,GAAG;IACV,OAAO6f,kDAAQ,EAAE;EACnB;;EAEA;AACF;AACA;AACA;AACA;EACE9f,OAAO,GAAG;IACR,OAAO8f,kDAAQ,EAAE;EACnB;;EAEA;AACF;AACA;AACA;AACA;AACA;EACEI,eAAe,CAAClE,YAAY,EAAE;IAC5B,IAAI,CAACiE,aAAa,GAAGjE,YAAY;EACnC;;EAEA;AACF;AACA;AACA;AACA;AACA;EACEG,UAAU,CAAC5kB,OAAO,EAAE;IAClB,IAAI,CAAC4H,QAAQ,GAAG5H,OAAO;EACzB;;EAEA;AACF;AACA;AACA;AACA;AACA;EACE4oB,iBAAiB,CAACnmB,cAAc,EAAE;IAChC,IAAI,CAACsF,eAAe,GAAGtF,cAAc;EACvC;;EAEA;AACF;AACA;AACA;AACA;AACA;EACEomB,WAAW,CAAC5+B,QAAQ,EAAE;IACpB,IAAI,CAAC+d,SAAS,GAAG/d,QAAQ;EAC3B;;EAEA;AACF;AACA;AACA;AACA;AACA;EACEu8B,QAAQ,CAAC18B,KAAK,EAAE;IACd,IAAI,CAACme,MAAM,GAAGne,KAAK;IACnB,IAAI,CAAC2+B,WAAW,GAAGD,gDAAM,CAAC1+B,KAAK,CAAC;EAClC;;EAEA;AACF;AACA;AACA;EACEmzB,iBAAiB,CAACP,QAAQ,EAAE;IAC1B6L,kDAAQ,EAAE;EACZ;;EAEA;AACF;AACA;AACA;EACEzrC,IAAI,GAAG;IACLyrC,kDAAQ,EAAE;EACZ;;EAEA;AACF;AACA;AACA;EACExL,mBAAmB,CAACL,QAAQ,EAAE;IAC5B6L,kDAAQ,EAAE;EACZ;AACF;AAEA,iEAAevD,UAAU;;;;;;;;;;;;;;;;;;;;;ACzSzB;AACA;AACA;;AAE0C;AACN;AACA;AACQ;AACI;AAOnB;;AAE7B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,MAAMV,YAAY,SAASU,iDAAU,CAAC;EACpC;AACF;AACA;EACE52C,WAAW,CAACuT,OAAO,EAAE;IACnB;AACJ;AACA;IACI,MAAM8gB,cAAc,GAClB9gB,OAAO,CAAC8gB,cAAc,KAAKzxB,SAAS,GAAG2Q,OAAO,CAAC8gB,cAAc,GAAG,KAAK;IAEvE,KAAK,CAAC;MACJzC,OAAO,EAAE,CAAC;MACVyC,cAAc,EAAEA,cAAc;MAC9BxY,QAAQ,EAAEtI,OAAO,CAACsI,QAAQ,KAAKjZ,SAAS,GAAG2Q,OAAO,CAACsI,QAAQ,GAAG,CAAC;MAC/DH,KAAK,EAAEnI,OAAO,CAACmI,KAAK,KAAK9Y,SAAS,GAAG2Q,OAAO,CAACmI,KAAK,GAAG,CAAC;MACtD26B,YAAY,EACV9iC,OAAO,CAAC8iC,YAAY,KAAKzzC,SAAS,GAAG2Q,OAAO,CAAC8iC,YAAY,GAAG,CAAC,CAAC,EAAE,CAAC,CAAC;MACpE/hB,aAAa,EAAE/gB,OAAO,CAAC+gB;IACzB,CAAC,CAAC;;IAEF;AACJ;AACA;AACA;IACI,IAAI,CAAC2kB,OAAO,GAAGr2C,SAAS;;IAExB;AACJ;AACA;AACA;IACI,IAAI,CAAC83C,mBAAmB,GAAG,IAAI;;IAE/B;AACJ;AACA;AACA;IACI,IAAI,CAAC7qB,KAAK,GAAGtc,OAAO,CAACpS,IAAI,KAAKyB,SAAS,GAAG2Q,OAAO,CAACpS,IAAI,GAAG,IAAI;;IAE7D;AACJ;AACA;AACA;IACI,IAAI,CAAC62C,OAAO,GAAG,CAAC,CAAC,EAAE,CAAC,CAAC;;IAErB;AACJ;AACA;AACA;IACI,IAAI,CAAC2C,OAAO,GAAGpnC,OAAO,CAAC6iC,MAAM;;IAE7B;AACJ;AACA;AACA;IACI,IAAI,CAACM,OAAO,GACVnjC,OAAO,CAAColB,MAAM,KAAK/1B,SAAS,GAAG2Q,OAAO,CAAColB,MAAM,GAAGplB,OAAO,CAACqnC,OAAO;;IAEjE;AACJ;AACA;AACA;IACI,IAAI,CAACC,QAAQ,GAAGtnC,OAAO,CAACunC,OAAO;;IAE/B;AACJ;AACA;AACA;IACI,IAAI,CAACC,MAAM,GAAGxnC,OAAO,CAACwJ,KAAK,KAAKna,SAAS,GAAG2Q,OAAO,CAACwJ,KAAK,GAAG,CAAC;;IAE7D;AACJ;AACA;AACA;IACI,IAAI,CAACi+B,OAAO,GAAGznC,OAAO,CAACwc,MAAM,KAAKntB,SAAS,GAAG2Q,OAAO,CAACwc,MAAM,GAAG,IAAI;;IAEnE;AACJ;AACA;AACA;IACI,IAAI,CAACkoB,KAAK,GAAG,IAAI;;IAEjB;AACJ;AACA;AACA;IACI,IAAI,CAACgD,cAAc,GAAG,IAAI;IAE1B,IAAI,CAAC5Q,MAAM,EAAE;EACf;;EAEA;AACF;AACA;AACA;AACA;EACEh5B,KAAK,GAAG;IACN,MAAMqK,KAAK,GAAG,IAAI,CAACwpB,QAAQ,EAAE;IAC7B,MAAMvzB,KAAK,GAAG,IAAIukC,YAAY,CAAC;MAC7B/0C,IAAI,EAAE,IAAI,CAACk9B,OAAO,EAAE,GAAG,IAAI,CAACA,OAAO,EAAE,CAAChtB,KAAK,EAAE,GAAGzO,SAAS;MACzDwzC,MAAM,EAAE,IAAI,CAAC8E,SAAS,EAAE;MACxBviB,MAAM,EAAE,IAAI,CAAC2d,SAAS,EAAE;MACxBwE,OAAO,EAAE,IAAI,CAACK,UAAU,EAAE;MAC1Bp+B,KAAK,EAAE,IAAI,CAACq+B,QAAQ,EAAE;MACtBrrB,MAAM,EAAE,IAAI,CAACuO,SAAS,EAAE,GAAG,IAAI,CAACA,SAAS,EAAE,CAACjtB,KAAK,EAAE,GAAGzO,SAAS;MAC/DiZ,QAAQ,EAAE,IAAI,CAAC+e,WAAW,EAAE;MAC5BvG,cAAc,EAAE,IAAI,CAACsG,iBAAiB,EAAE;MACxCjf,KAAK,EAAEjJ,KAAK,CAACC,OAAO,CAACgJ,KAAK,CAAC,GAAGA,KAAK,CAAC7M,KAAK,EAAE,GAAG6M,KAAK;MACnD26B,YAAY,EAAE,IAAI,CAACE,eAAe,EAAE,CAAC1nC,KAAK,EAAE;MAC5CylB,aAAa,EAAE,IAAI,CAACwG,gBAAgB;IACtC,CAAC,CAAC;IACFnpB,KAAK,CAAC6kC,UAAU,CAAC,IAAI,CAAC9b,UAAU,EAAE,CAAC;IACnC,OAAO/oB,KAAK;EACd;;EAEA;AACF;AACA;AACA;AACA;AACA;EACEyoB,SAAS,GAAG;IACV,MAAMj1B,IAAI,GAAG,IAAI,CAAC8yC,KAAK;IACvB,IAAI,CAAC9yC,IAAI,EAAE;MACT,OAAO,IAAI;IACb;IACA,MAAMkxC,YAAY,GAAG,IAAI,CAACE,eAAe,EAAE;IAC3C,MAAM76B,KAAK,GAAG,IAAI,CAACmf,aAAa,EAAE;IAClC;IACA;IACA,OAAO,CACL11B,IAAI,CAAC,CAAC,CAAC,GAAG,CAAC,GAAGkxC,YAAY,CAAC,CAAC,CAAC,GAAG36B,KAAK,CAAC,CAAC,CAAC,EACxCvW,IAAI,CAAC,CAAC,CAAC,GAAG,CAAC,GAAGkxC,YAAY,CAAC,CAAC,CAAC,GAAG36B,KAAK,CAAC,CAAC,CAAC,CACzC;EACH;;EAEA;AACF;AACA;AACA;AACA;EACE0/B,QAAQ,GAAG;IACT,OAAO,IAAI,CAACL,MAAM;EACpB;;EAEA;AACF;AACA;AACA;AACA;EACE1c,OAAO,GAAG;IACR,OAAO,IAAI,CAACxO,KAAK;EACnB;;EAEA;AACF;AACA;AACA;AACA;EACEwrB,OAAO,CAACl6C,IAAI,EAAE;IACZ,IAAI,CAAC0uB,KAAK,GAAG1uB,IAAI;IACjB,IAAI,CAACkpC,MAAM,EAAE;EACf;;EAEA;AACF;AACA;EACE7P,oBAAoB,GAAG;IACrB,IAAI,CAAC,IAAI,CAACkgB,mBAAmB,EAAE;MAC7B,IAAI,CAACY,yBAAyB,CAAC,IAAI,CAACL,cAAc,CAAC;IACrD;IACA,OAAO,IAAI,CAACP,mBAAmB;EACjC;;EAEA;AACF;AACA;AACA;AACA;AACA;EACEjgB,QAAQ,CAAC5W,UAAU,EAAE;IACnB,IAAIoP,KAAK,GAAG,IAAI,CAACgmB,OAAO,CAACp1B,UAAU,CAAC;IACpC,IAAI,CAACoP,KAAK,EAAE;MACV,MAAMsoB,aAAa,GAAG,IAAI,CAACN,cAAc;MACzC,MAAMzrB,OAAO,GAAG4G,8DAAqB,CACnCmlB,aAAa,CAACp2C,IAAI,GAAG0e,UAAU,EAC/B03B,aAAa,CAACp2C,IAAI,GAAG0e,UAAU,CAChC;MACD,IAAI,CAAC23B,KAAK,CAACD,aAAa,EAAE/rB,OAAO,EAAE3L,UAAU,CAAC;MAE9CoP,KAAK,GAAGzD,OAAO,CAACsC,MAAM;MACtB,IAAI,CAACmnB,OAAO,CAACp1B,UAAU,CAAC,GAAGoP,KAAK;IAClC;IACA,OAAOA,KAAK;EACd;;EAEA;AACF;AACA;AACA;AACA;EACEsH,aAAa,CAAC1W,UAAU,EAAE;IACxB,OAAOA,UAAU;EACnB;;EAEA;AACF;AACA;EACE8gB,YAAY,GAAG;IACb,OAAO,IAAI,CAACsT,KAAK;EACnB;;EAEA;AACF;AACA;EACEzJ,aAAa,GAAG;IACd,OAAOlB,6DAAiB;EAC1B;;EAEA;AACF;AACA;AACA;AACA;EACEhT,SAAS,GAAG;IACV,OAAO,IAAI,CAAC0d,OAAO;EACrB;;EAEA;AACF;AACA;AACA;AACA;EACEkD,SAAS,GAAG;IACV,OAAO,IAAI,CAACP,OAAO;EACrB;;EAEA;AACF;AACA;AACA;AACA;EACErE,SAAS,GAAG;IACV,OAAO,IAAI,CAACI,OAAO;EACrB;;EAEA;AACF;AACA;AACA;AACA;EACEyE,UAAU,GAAG;IACX,OAAO,IAAI,CAACN,QAAQ;EACtB;;EAEA;AACF;AACA;AACA;AACA;EACExgB,OAAO,GAAG;IACR,OAAO,IAAI,CAAC4d,KAAK;EACnB;;EAEA;AACF;AACA;AACA;AACA;EACE3Z,SAAS,GAAG;IACV,OAAO,IAAI,CAAC0c,OAAO;EACrB;;EAEA;AACF;AACA;AACA;AACA;EACES,SAAS,CAAC1rB,MAAM,EAAE;IAChB,IAAI,CAACirB,OAAO,GAAGjrB,MAAM;IACrB,IAAI,CAACsa,MAAM,EAAE;EACf;;EAEA;AACF;AACA;EACEwE,iBAAiB,CAACP,QAAQ,EAAE,CAAC;;EAE7B;AACF;AACA;EACE5/B,IAAI,GAAG,CAAC;;EAER;AACF;AACA;EACEigC,mBAAmB,CAACL,QAAQ,EAAE,CAAC;;EAE/B;AACF;AACA;AACA;AACA;AACA;AACA;AACA;EACEoN,sBAAsB,CAAC9zB,QAAQ,EAAE0G,WAAW,EAAEpG,UAAU,EAAE;IACxD,IACEoG,WAAW,KAAK,CAAC,IACjB,IAAI,CAACqsB,OAAO,KAAK96B,QAAQ,IACxB+H,QAAQ,KAAK,OAAO,IAAIA,QAAQ,KAAK,OAAQ,EAC9C;MACA,OAAO0G,WAAW;IACpB;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA,IAAIqtB,EAAE,GAAG,IAAI,CAACjF,OAAO;IACrB,IAAIkF,EAAE,GAAG,IAAI,CAACf,QAAQ,KAAKj4C,SAAS,GAAG+4C,EAAE,GAAG,IAAI,CAACd,QAAQ;IACzD,IAAIc,EAAE,GAAGC,EAAE,EAAE;MACX,MAAMC,GAAG,GAAGF,EAAE;MACdA,EAAE,GAAGC,EAAE;MACPA,EAAE,GAAGC,GAAG;IACV;IACA,MAAMzF,MAAM,GACV,IAAI,CAACyE,QAAQ,KAAKj4C,SAAS,GAAG,IAAI,CAAC+3C,OAAO,GAAG,IAAI,CAACA,OAAO,GAAG,CAAC;IAC/D,MAAMrd,KAAK,GAAI,CAAC,GAAGjyB,IAAI,CAACoR,EAAE,GAAI25B,MAAM;IACpC,MAAM9pC,CAAC,GAAGsvC,EAAE,GAAGvwC,IAAI,CAACywC,GAAG,CAACxe,KAAK,CAAC;IAC9B,MAAMsI,CAAC,GAAGv6B,IAAI,CAAC0B,IAAI,CAAC6uC,EAAE,GAAGA,EAAE,GAAGtvC,CAAC,GAAGA,CAAC,CAAC;IACpC,MAAMe,CAAC,GAAGsuC,EAAE,GAAG/V,CAAC;IAChB,MAAMv5B,CAAC,GAAGhB,IAAI,CAAC0B,IAAI,CAACT,CAAC,GAAGA,CAAC,GAAGe,CAAC,GAAGA,CAAC,CAAC;IAClC,MAAM0uC,UAAU,GAAG1vC,CAAC,GAAGC,CAAC;IACxB,IAAIsb,QAAQ,KAAK,OAAO,IAAIm0B,UAAU,IAAI7zB,UAAU,EAAE;MACpD,OAAO6zB,UAAU,GAAGztB,WAAW;IACjC;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA,MAAMiX,CAAC,GAAGjX,WAAW,GAAG,CAAC,GAAGytB,UAAU;IACtC,MAAMpvC,CAAC,GAAI2hB,WAAW,GAAG,CAAC,IAAKjhB,CAAC,GAAGhB,CAAC,CAAC;IACrC,MAAM2vC,IAAI,GAAG3wC,IAAI,CAAC0B,IAAI,CAAC,CAAC4uC,EAAE,GAAGpW,CAAC,KAAKoW,EAAE,GAAGpW,CAAC,CAAC,GAAG54B,CAAC,GAAGA,CAAC,CAAC;IACnD,MAAMsvC,QAAQ,GAAGD,IAAI,GAAGL,EAAE;IAC1B,IAAI,IAAI,CAACd,QAAQ,KAAKj4C,SAAS,IAAIglB,QAAQ,KAAK,OAAO,EAAE;MACvD,OAAOq0B,QAAQ,GAAG,CAAC;IACrB;IACA;IACA;IACA,MAAMC,EAAE,GAAGP,EAAE,GAAGtwC,IAAI,CAACywC,GAAG,CAACxe,KAAK,CAAC;IAC/B,MAAM6e,EAAE,GAAG9wC,IAAI,CAAC0B,IAAI,CAAC4uC,EAAE,GAAGA,EAAE,GAAGO,EAAE,GAAGA,EAAE,CAAC;IACvC,MAAMtpB,EAAE,GAAGgpB,EAAE,GAAGO,EAAE;IAClB,MAAMC,EAAE,GAAG/wC,IAAI,CAAC0B,IAAI,CAACmvC,EAAE,GAAGA,EAAE,GAAGtpB,EAAE,GAAGA,EAAE,CAAC;IACvC,MAAMypB,eAAe,GAAGD,EAAE,GAAGF,EAAE;IAC/B,IAAIG,eAAe,IAAIn0B,UAAU,EAAE;MACjC,MAAMo0B,WAAW,GAAID,eAAe,GAAG/tB,WAAW,GAAI,CAAC,GAAGstB,EAAE,GAAGD,EAAE;MACjE,OAAO,CAAC,GAAGtwC,IAAI,CAAC4B,GAAG,CAACgvC,QAAQ,EAAEK,WAAW,CAAC;IAC5C;IACA,OAAOL,QAAQ,GAAG,CAAC;EACrB;;EAEA;AACF;AACA;AACA;EACEM,mBAAmB,GAAG;IACpB,IAAI30B,QAAQ,GAAG3E,8DAAe;IAC9B,IAAIiF,UAAU,GAAG,CAAC;IAClB,IAAIZ,QAAQ,GAAG,IAAI;IACnB,IAAIG,cAAc,GAAG,CAAC;IACtB,IAAIvF,WAAW;IACf,IAAIoM,WAAW,GAAG,CAAC;IAEnB,IAAI,IAAI,CAAC0sB,OAAO,EAAE;MAChB94B,WAAW,GAAG,IAAI,CAAC84B,OAAO,CAACj0B,QAAQ,EAAE;MACrC,IAAI7E,WAAW,KAAK,IAAI,EAAE;QACxBA,WAAW,GAAGkB,iEAAkB;MAClC;MACAlB,WAAW,GAAGtP,0DAAW,CAACsP,WAAW,CAAC;MACtCoM,WAAW,GAAG,IAAI,CAAC0sB,OAAO,CAAClzB,QAAQ,EAAE;MACrC,IAAIwG,WAAW,KAAK1rB,SAAS,EAAE;QAC7B0rB,WAAW,GAAGpL,+DAAgB;MAChC;MACAoE,QAAQ,GAAG,IAAI,CAAC0zB,OAAO,CAAC3zB,WAAW,EAAE;MACrCI,cAAc,GAAG,IAAI,CAACuzB,OAAO,CAACxzB,iBAAiB,EAAE;MACjDI,QAAQ,GAAG,IAAI,CAACozB,OAAO,CAACrzB,WAAW,EAAE;MACrC,IAAIC,QAAQ,KAAKhlB,SAAS,EAAE;QAC1BglB,QAAQ,GAAG3E,8DAAe;MAC5B;MACAiF,UAAU,GAAG,IAAI,CAAC8yB,OAAO,CAAC/yB,aAAa,EAAE;MACzC,IAAIC,UAAU,KAAKtlB,SAAS,EAAE;QAC5BslB,UAAU,GAAG/E,gEAAiB;MAChC;IACF;IAEA,MAAMxM,GAAG,GAAG,IAAI,CAAC+kC,sBAAsB,CAAC9zB,QAAQ,EAAE0G,WAAW,EAAEpG,UAAU,CAAC;IAC1E,MAAMs0B,SAAS,GAAGnxC,IAAI,CAAC4B,GAAG,CAAC,IAAI,CAACypC,OAAO,EAAE,IAAI,CAACmE,QAAQ,IAAI,CAAC,CAAC;IAC5D,MAAM11C,IAAI,GAAGkG,IAAI,CAACoC,IAAI,CAAC,CAAC,GAAG+uC,SAAS,GAAG7lC,GAAG,CAAC;IAE3C,OAAO;MACLuL,WAAW,EAAEA,WAAW;MACxBoM,WAAW,EAAEA,WAAW;MACxBnpB,IAAI,EAAEA,IAAI;MACVmiB,QAAQ,EAAEA,QAAQ;MAClBG,cAAc,EAAEA,cAAc;MAC9BG,QAAQ,EAAEA,QAAQ;MAClBM,UAAU,EAAEA;IACd,CAAC;EACH;;EAEA;AACF;AACA;EACEmiB,MAAM,GAAG;IACP,IAAI,CAAC4Q,cAAc,GAAG,IAAI,CAACsB,mBAAmB,EAAE;IAChD,MAAMp3C,IAAI,GAAG,IAAI,CAAC81C,cAAc,CAAC91C,IAAI;IACrC,IAAI,CAAC8zC,OAAO,GAAG,CAAC,CAAC;IACjB,IAAI,CAAChB,KAAK,GAAG,CAAC9yC,IAAI,EAAEA,IAAI,CAAC;EAC3B;;EAEA;AACF;AACA;AACA;AACA;AACA;EACEq2C,KAAK,CAACD,aAAa,EAAE/rB,OAAO,EAAE3L,UAAU,EAAE;IACxC2L,OAAO,CAAC9T,KAAK,CAACmI,UAAU,EAAEA,UAAU,CAAC;IACrC;IACA2L,OAAO,CAAC2C,SAAS,CAACopB,aAAa,CAACp2C,IAAI,GAAG,CAAC,EAAEo2C,aAAa,CAACp2C,IAAI,GAAG,CAAC,CAAC;IAEjE,IAAI,CAACs3C,WAAW,CAACjtB,OAAO,CAAC;IAEzB,IAAI,IAAI,CAACK,KAAK,EAAE;MACd,IAAIzuB,KAAK,GAAG,IAAI,CAACyuB,KAAK,CAAC9I,QAAQ,EAAE;MACjC,IAAI3lB,KAAK,KAAK,IAAI,EAAE;QAClBA,KAAK,GAAGyhB,+DAAgB;MAC1B;MACA2M,OAAO,CAACvN,SAAS,GAAGrP,0DAAW,CAACxR,KAAK,CAAC;MACtCouB,OAAO,CAACruB,IAAI,EAAE;IAChB;IACA,IAAI,IAAI,CAAC65C,OAAO,EAAE;MAChBxrB,OAAO,CAACtN,WAAW,GAAGq5B,aAAa,CAACr5B,WAAW;MAC/CsN,OAAO,CAACzH,SAAS,GAAGwzB,aAAa,CAACjtB,WAAW;MAC7C,IAAIitB,aAAa,CAACj0B,QAAQ,EAAE;QAC1BkI,OAAO,CAAC6C,WAAW,CAACkpB,aAAa,CAACj0B,QAAQ,CAAC;QAC3CkI,OAAO,CAAC/H,cAAc,GAAG8zB,aAAa,CAAC9zB,cAAc;MACvD;MACA+H,OAAO,CAAC5H,QAAQ,GAAG2zB,aAAa,CAAC3zB,QAAQ;MACzC4H,OAAO,CAACtH,UAAU,GAAGqzB,aAAa,CAACrzB,UAAU;MAC7CsH,OAAO,CAACO,MAAM,EAAE;IAClB;EACF;;EAEA;AACF;AACA;AACA;EACEurB,yBAAyB,CAACC,aAAa,EAAE;IACvC,IAAI,IAAI,CAAC1rB,KAAK,EAAE;MACd,IAAIzuB,KAAK,GAAG,IAAI,CAACyuB,KAAK,CAAC9I,QAAQ,EAAE;;MAEjC;MACA,IAAI6K,OAAO,GAAG,CAAC;MACf,IAAI,OAAOxwB,KAAK,KAAK,QAAQ,EAAE;QAC7BA,KAAK,GAAGy1C,kDAAO,CAACz1C,KAAK,CAAC;MACxB;MACA,IAAIA,KAAK,KAAK,IAAI,EAAE;QAClBwwB,OAAO,GAAG,CAAC;MACb,CAAC,MAAM,IAAInf,KAAK,CAACC,OAAO,CAACtR,KAAK,CAAC,EAAE;QAC/BwwB,OAAO,GAAGxwB,KAAK,CAACoE,MAAM,KAAK,CAAC,GAAGpE,KAAK,CAAC,CAAC,CAAC,GAAG,CAAC;MAC7C;MACA,IAAIwwB,OAAO,KAAK,CAAC,EAAE;QACjB;QACA;QACA,MAAMpC,OAAO,GAAG4G,8DAAqB,CACnCmlB,aAAa,CAACp2C,IAAI,EAClBo2C,aAAa,CAACp2C,IAAI,CACnB;QACD,IAAI,CAACu1C,mBAAmB,GAAGlrB,OAAO,CAACsC,MAAM;QAEzC,IAAI,CAAC4qB,uBAAuB,CAACnB,aAAa,EAAE/rB,OAAO,CAAC;MACtD;IACF;IACA,IAAI,CAAC,IAAI,CAACkrB,mBAAmB,EAAE;MAC7B,IAAI,CAACA,mBAAmB,GAAG,IAAI,CAACjgB,QAAQ,CAAC,CAAC,CAAC;IAC7C;EACF;;EAEA;AACF;AACA;AACA;EACEgiB,WAAW,CAACjtB,OAAO,EAAE;IACnB,IAAI4mB,MAAM,GAAG,IAAI,CAACuE,OAAO;IACzB,MAAMhiB,MAAM,GAAG,IAAI,CAAC+d,OAAO;IAC3B,IAAIN,MAAM,KAAKv2B,QAAQ,EAAE;MACvB2P,OAAO,CAACuE,GAAG,CAAC,CAAC,EAAE,CAAC,EAAE4E,MAAM,EAAE,CAAC,EAAE,CAAC,GAAGttB,IAAI,CAACoR,EAAE,CAAC;IAC3C,CAAC,MAAM;MACL,MAAMq+B,OAAO,GAAG,IAAI,CAACD,QAAQ,KAAKj4C,SAAS,GAAG+1B,MAAM,GAAG,IAAI,CAACkiB,QAAQ;MACpE,IAAI,IAAI,CAACA,QAAQ,KAAKj4C,SAAS,EAAE;QAC/BwzC,MAAM,IAAI,CAAC;MACb;MACA,MAAMuG,UAAU,GAAG,IAAI,CAAC5B,MAAM,GAAG1vC,IAAI,CAACoR,EAAE,GAAG,CAAC;MAC5C,MAAMmgC,IAAI,GAAI,CAAC,GAAGvxC,IAAI,CAACoR,EAAE,GAAI25B,MAAM;MACnC,KAAK,IAAItqC,CAAC,GAAG,CAAC,EAAEA,CAAC,GAAGsqC,MAAM,EAAEtqC,CAAC,EAAE,EAAE;QAC/B,MAAM+wC,MAAM,GAAGF,UAAU,GAAG7wC,CAAC,GAAG8wC,IAAI;QACpC,MAAME,OAAO,GAAGhxC,CAAC,GAAG,CAAC,KAAK,CAAC,GAAG6sB,MAAM,GAAGmiB,OAAO;QAC9CtrB,OAAO,CAACI,MAAM,CAACktB,OAAO,GAAGzxC,IAAI,CAAC0xC,GAAG,CAACF,MAAM,CAAC,EAAEC,OAAO,GAAGzxC,IAAI,CAACywC,GAAG,CAACe,MAAM,CAAC,CAAC;MACxE;MACArtB,OAAO,CAACyE,SAAS,EAAE;IACrB;EACF;;EAEA;AACF;AACA;AACA;AACA;EACEyoB,uBAAuB,CAACnB,aAAa,EAAE/rB,OAAO,EAAE;IAC9C;IACAA,OAAO,CAAC2C,SAAS,CAACopB,aAAa,CAACp2C,IAAI,GAAG,CAAC,EAAEo2C,aAAa,CAACp2C,IAAI,GAAG,CAAC,CAAC;IAEjE,IAAI,CAACs3C,WAAW,CAACjtB,OAAO,CAAC;IAEzBA,OAAO,CAACvN,SAAS,GAAGY,+DAAgB;IACpC2M,OAAO,CAACruB,IAAI,EAAE;IACd,IAAI,IAAI,CAAC65C,OAAO,EAAE;MAChBxrB,OAAO,CAACtN,WAAW,GAAGq5B,aAAa,CAACr5B,WAAW;MAC/CsN,OAAO,CAACzH,SAAS,GAAGwzB,aAAa,CAACjtB,WAAW;MAC7C,IAAIitB,aAAa,CAACj0B,QAAQ,EAAE;QAC1BkI,OAAO,CAAC6C,WAAW,CAACkpB,aAAa,CAACj0B,QAAQ,CAAC;QAC3CkI,OAAO,CAAC/H,cAAc,GAAG8zB,aAAa,CAAC9zB,cAAc;MACvD;MACA+H,OAAO,CAAC5H,QAAQ,GAAG2zB,aAAa,CAAC3zB,QAAQ;MACzC4H,OAAO,CAACtH,UAAU,GAAGqzB,aAAa,CAACrzB,UAAU;MAC7CsH,OAAO,CAACO,MAAM,EAAE;IAClB;EACF;AACF;AAEA,iEAAemmB,YAAY;;;;;;;;;;;;;;;AC/mB3B;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,MAAM8G,MAAM,CAAC;EACX;AACF;AACA;EACEh9C,WAAW,CAACuT,OAAO,EAAE;IACnBA,OAAO,GAAGA,OAAO,IAAI,CAAC,CAAC;;IAEvB;AACJ;AACA;AACA;IACI,IAAI,CAACojC,MAAM,GAAGpjC,OAAO,CAACnS,KAAK,KAAKwB,SAAS,GAAG2Q,OAAO,CAACnS,KAAK,GAAG,IAAI;;IAEhE;AACJ;AACA;AACA;IACI,IAAI,CAAC67C,QAAQ,GAAG1pC,OAAO,CAAC4T,OAAO;;IAE/B;AACJ;AACA;AACA;IACI,IAAI,CAAC+1B,SAAS,GAAG3pC,OAAO,CAAC+T,QAAQ,KAAK1kB,SAAS,GAAG2Q,OAAO,CAAC+T,QAAQ,GAAG,IAAI;;IAEzE;AACJ;AACA;AACA;IACI,IAAI,CAAC61B,eAAe,GAAG5pC,OAAO,CAACkU,cAAc;;IAE7C;AACJ;AACA;AACA;IACI,IAAI,CAAC21B,SAAS,GAAG7pC,OAAO,CAACqU,QAAQ;;IAEjC;AACJ;AACA;AACA;IACI,IAAI,CAACy1B,WAAW,GAAG9pC,OAAO,CAAC2U,UAAU;;IAErC;AACJ;AACA;AACA;IACI,IAAI,CAAC4R,MAAM,GAAGvmB,OAAO,CAAC8V,KAAK;EAC7B;;EAEA;AACF;AACA;AACA;AACA;EACEhY,KAAK,GAAG;IACN,MAAMjQ,KAAK,GAAG,IAAI,CAAC2lB,QAAQ,EAAE;IAC7B,OAAO,IAAIi2B,MAAM,CAAC;MAChB57C,KAAK,EAAEqR,KAAK,CAACC,OAAO,CAACtR,KAAK,CAAC,GAAGA,KAAK,CAACyN,KAAK,EAAE,GAAGzN,KAAK,IAAIwB,SAAS;MAChEukB,OAAO,EAAE,IAAI,CAACD,UAAU,EAAE;MAC1BI,QAAQ,EAAE,IAAI,CAACD,WAAW,EAAE,GAAG,IAAI,CAACA,WAAW,EAAE,CAACxY,KAAK,EAAE,GAAGjM,SAAS;MACrE6kB,cAAc,EAAE,IAAI,CAACD,iBAAiB,EAAE;MACxCI,QAAQ,EAAE,IAAI,CAACD,WAAW,EAAE;MAC5BO,UAAU,EAAE,IAAI,CAACD,aAAa,EAAE;MAChCoB,KAAK,EAAE,IAAI,CAACvB,QAAQ;IACtB,CAAC,CAAC;EACJ;;EAEA;AACF;AACA;AACA;AACA;EACEf,QAAQ,GAAG;IACT,OAAO,IAAI,CAAC4vB,MAAM;EACpB;;EAEA;AACF;AACA;AACA;AACA;EACEzvB,UAAU,GAAG;IACX,OAAO,IAAI,CAAC+1B,QAAQ;EACtB;;EAEA;AACF;AACA;AACA;AACA;EACE51B,WAAW,GAAG;IACZ,OAAO,IAAI,CAAC61B,SAAS;EACvB;;EAEA;AACF;AACA;AACA;AACA;EACE11B,iBAAiB,GAAG;IAClB,OAAO,IAAI,CAAC21B,eAAe;EAC7B;;EAEA;AACF;AACA;AACA;AACA;EACEx1B,WAAW,GAAG;IACZ,OAAO,IAAI,CAACy1B,SAAS;EACvB;;EAEA;AACF;AACA;AACA;AACA;EACEn1B,aAAa,GAAG;IACd,OAAO,IAAI,CAACo1B,WAAW;EACzB;;EAEA;AACF;AACA;AACA;AACA;EACEv1B,QAAQ,GAAG;IACT,OAAO,IAAI,CAACgS,MAAM;EACpB;;EAEA;AACF;AACA;AACA;AACA;AACA;EACE0K,QAAQ,CAACpjC,KAAK,EAAE;IACd,IAAI,CAACu1C,MAAM,GAAGv1C,KAAK;EACrB;;EAEA;AACF;AACA;AACA;AACA;AACA;EACEk8C,UAAU,CAACn2B,OAAO,EAAE;IAClB,IAAI,CAAC81B,QAAQ,GAAG91B,OAAO;EACzB;;EAEA;AACF;AACA;AACA;AACA;AACA;EACEkL,WAAW,CAAC/K,QAAQ,EAAE;IACpB,IAAI,CAAC41B,SAAS,GAAG51B,QAAQ;EAC3B;;EAEA;AACF;AACA;AACA;AACA;AACA;EACEi2B,iBAAiB,CAAC91B,cAAc,EAAE;IAChC,IAAI,CAAC01B,eAAe,GAAG11B,cAAc;EACvC;;EAEA;AACF;AACA;AACA;AACA;AACA;EACE+1B,WAAW,CAAC51B,QAAQ,EAAE;IACpB,IAAI,CAACw1B,SAAS,GAAGx1B,QAAQ;EAC3B;;EAEA;AACF;AACA;AACA;AACA;AACA;EACE61B,aAAa,CAACv1B,UAAU,EAAE;IACxB,IAAI,CAACm1B,WAAW,GAAGn1B,UAAU;EAC/B;;EAEA;AACF;AACA;AACA;AACA;AACA;EACEw1B,QAAQ,CAACr0B,KAAK,EAAE;IACd,IAAI,CAACyQ,MAAM,GAAGzQ,KAAK;EACrB;AACF;AAEA,iEAAe2zB,MAAM;;;;;;;;;;;;;;;;;;;;;;ACnOrB;AACA;AACA;;AAEsC;AACT;AACI;AACI;;AAErC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,MAAMr9C,KAAK,CAAC;EACV;AACF;AACA;EACEK,WAAW,CAACuT,OAAO,EAAE;IACnBA,OAAO,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AACF;AACA;AACA;AACA;AACA;EACEyxB,UAAU,CAAC1xB,OAAO,EAAE;IAClB,IAAI,CAACuwB,QAAQ,GAAGvwB,OAAO;EACzB;;EAEA;AACF;AACA;AACA;AACA;AACA;EACE2xB,eAAe,CAAC7+C,YAAY,EAAE;IAC5B,IAAI,CAAC29C,aAAa,GAAG39C,YAAY;EACnC;;EAEA;AACF;AACA;AACA;AACA;AACA;EACE8+C,iBAAiB,CAAC7+C,IAAI,EAAE;IACtB,IAAI,CAACg+C,eAAe,GAAGh+C,IAAI;EAC7B;;EAEA;AACF;AACA;AACA;AACA;AACA;EACE8+C,mBAAmB,CAAClwB,MAAM,EAAE;IAC1B,IAAI,CAACqvB,iBAAiB,GAAGrvB,MAAM;EACjC;;EAEA;AACF;AACA;AACA;AACA;AACA;EACEmwB,UAAU,CAACxvB,OAAO,EAAE;IAClB,IAAI,CAAC2uB,QAAQ,GAAG3uB,OAAO;EACzB;AACF;AAEA,iEAAe9wB,IAAI;;;;;;;;;;;;;;;;;;;;;;;ACpmBnB;AACA;AACA;;AAEwC;AACX;AACA;AACgB;AACZ;AACF;AACF;;AAE7B;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;A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","sources":["./src/app/features/domain-listing/_components/shared-exp-map/shared-exp-map.component.ts","./src/app/features/resources/_services/resources.service.ts","./src/app/standalone-components/seats-viewer/seats-viewer.component.ts","./node_modules/rbush/rbush.min.js","./src/app/features/domain-listing/_components/shared-exp-map/shared-exp-map.component.scss","./src/app/standalone-components/seats-viewer/seats-viewer.component.scss","./node_modules/ol/Feature.js","./node_modules/ol/colorlike.js","./node_modules/ol/control/FullScreen.js","./node_modules/ol/featureloader.js","./node_modules/ol/geom/flat/length.js","./node_modules/ol/geom/flat/linechunk.js","./node_modules/ol/geom/flat/straightchunk.js","./node_modules/ol/geom/flat/textpath.js","./node_modules/ol/layer/BaseVector.js","./node_modules/ol/layer/Vector.js","./node_modules/ol/loadingstrategy.js","./node_modules/ol/render/VectorContext.js","./node_modules/ol/render/canvas/Builder.js","./node_modules/ol/render/canvas/BuilderGroup.js","./node_modules/ol/render/canvas/Executor.js","./node_modules/ol/render/canvas/ExecutorGroup.js","./node_modules/ol/render/canvas/ImageBuilder.js","./node_modules/ol/render/canvas/Immediate.js","./node_modules/ol/render/canvas/Instruction.js","./node_modules/ol/render/canvas/LineStringBuilder.js","./node_modules/ol/render/canvas/PolygonBuilder.js","./node_modules/ol/render/canvas/TextBuilder.js","./node_modules/ol/render/canvas/hitdetect.js","./node_modules/ol/renderer/canvas/VectorLayer.js","./node_modules/ol/renderer/vector.js","./node_modules/ol/source/Vector.js","./node_modules/ol/source/VectorEventType.js","./node_modules/ol/structs/RBush.js","./node_modules/ol/style/Circle.js","./node_modules/ol/style/Fill.js","./node_modules/ol/style/Icon.js","./node_modules/ol/style/IconImage.js","./node_modules/ol/style/Image.js","./node_modules/ol/style/RegularShape.js","./node_modules/ol/style/Stroke.js","./node_modules/ol/style/Style.js","./node_modules/ol/style/Text.js","./node_modules/ol/style/flat.js"],"sourcesContent":["import { Component, Inject } from '@angular/core';\nimport { MAT_DIALOG_DATA } from '@angular/material/dialog';\nimport {takeUntil} from \"rxjs/operators\";\nimport Map from \"ol/Map\";\nimport View from \"ol/View\";\nimport {fromLonLat} from \"ol/proj\";\nimport TileLayer from \"ol/layer/Tile\";\nimport OSM from \"ol/source/OSM\";\nimport VectorLayer from \"ol/layer/Vector\";\nimport VectorSource from \"ol/source/Vector\";\nimport {Feature} from \"ol\";\nimport {Point} from \"ol/geom\";\nimport {Fill, Icon, Style, Text} from \"ol/style\";\nimport {FullScreen} from \"ol/control\";\nimport { Subject } from 'rxjs';\n\n@Component({\n  selector: 'app-shared-exp-map',\n  templateUrl: './shared-exp-map.component.html',\n  styleUrls: ['./shared-exp-map.component.scss']\n})\nexport class SharedExpMapComponent {\n  experienceData= this.data.experienceData;\n \n\n  map: Map;\n  isValidCoords = false;\n  private ngUnsubscribe = new Subject<void>();\n\n\n  constructor( \n    @Inject(MAT_DIALOG_DATA) public data: any,\n    ){}\n\n    ngOnInit(){\n\n      console.log('din modalul shared exp',this.experienceData);\n\n      this.checkCoordinates();\n\n      \n    }\n\n    checkCoordinates(){\n      const lat = this.experienceData?.geographicalCoordinates?.latitude;\n      const long = this.experienceData?.geographicalCoordinates?.longitude;\n      console.log('aici verificam coordonatele', lat, long);\n\n      // if (lat && long && lat >= -90 && lat <= 90 && long >= -180 && long <= 180) {\n      //   this.isValidCoords = true;\n        this.initMap();\n      // }\n    }\n\n      initMap() {\n        console.log('se initializeaza map-ul');\n\n        const resourceFeature = new Feature({\n            geometry: new Point(fromLonLat([\n                +this.experienceData.geographicalCoordinates.longitude,\n                +this.experienceData.geographicalCoordinates.latitude\n            ]))\n        });\n\n        resourceFeature.setStyle(new Style({\n            text: new Text({\n                text: '\\uf3c5',\n                font: '900 35px \"Font Awesome 5 Free\"',\n                textBaseline: 'bottom',\n                fill: new Fill({\n                    color: 'red'\n                })\n            })\n        }));\n        // open layers map init\n        this.map = new Map({\n            view: new View({\n                center: fromLonLat([\n                    +this.experienceData.geographicalCoordinates.longitude,\n                    +this.experienceData.geographicalCoordinates.latitude]),\n                zoom: 15,\n            }),\n            layers: [\n                new TileLayer({\n                    source: new OSM(),\n                }),\n                new VectorLayer({\n                    source: new VectorSource({\n                        features: [resourceFeature]\n                    })\n                })\n            ],\n            controls: [new FullScreen()]\n        });\n    }\n\n    ngAfterViewInit(): void {\n      console.log('se seteaza mark-up-ul');\n        if (this.map) {\n            this.map.setTarget('ol-map');\n        }\n    }\n\n    ngOnDestroy(): void {\n        this.ngUnsubscribe.next();\n        this.ngUnsubscribe.complete();\n    }\n\n}\n","import {Injectable} from '@angular/core';\nimport {HttpClient} from '@angular/common/http';\nimport {ResourceTemplateFilteredModel} from \"../../providers-management/_models/resource-template-filtered.model\";\nimport {BehaviorSubject} from \"rxjs\";\nimport {FormGroup} from \"@angular/forms\";\n\n@Injectable({\n    providedIn: 'root'\n})\nexport class ResourcesService {\n\n\n    resourceId$ = new BehaviorSubject(undefined);\n    bookingType$ = new BehaviorSubject(undefined);\n    //cazare\n    // resourceTemplateType$ = new BehaviorSubject({\n    //     domain: \"63bfcca765dc3f3863af755c\",\n    //     categoryId: \"63d2ae569d6ce304608d1a88\",\n    //     resourceTypeId: \"63d8d4a9d2180d7935acb4e0\"\n    // });\n\n    //tickets\n    // resourceTemplateType$ = new BehaviorSubject({\n    //     domain: \"63bfcca765dc3f3863af755c\",\n    //     categoryId: \"63f46cb490ee904cfdad0c38\",\n    //     resourceTypeId: \"63f46d1190ee904cfdad0c3a\"\n    // });\n\n    //restaurants\n    // resourceTemplateType$ = new BehaviorSubject({\n    //     domain: \"63bfcca765dc3f3863af755c\",\n    //     categoryId: \"63dbb183df393f737216183c\",\n    //     resourceTypeId: \"63dbb18cdf393f737216183d\"\n    // });\n    resourceTemplateType$ = new BehaviorSubject(undefined);\n\n    settingsTripsItineraries$ = new BehaviorSubject([]);\n    tripsItinerariesObject$ = new BehaviorSubject(undefined);\n\n    resourceTemplateData$ = new BehaviorSubject(undefined)\n    attributesFromResourceTemplate$ = new BehaviorSubject(undefined)\n\n    // Resource Form\n    generalInformationForm$ = new BehaviorSubject(new FormGroup({}))\n    facilitiesForm$ = new BehaviorSubject(new FormGroup({}))\n    filesForm$ = new BehaviorSubject(new FormGroup({}))\n    facilitiesByCategory$ = new BehaviorSubject([])\n    timetable$ = new BehaviorSubject({});\n    bookingPolicies$ = new BehaviorSubject({});\n\n    resourceData = new BehaviorSubject({\n        featuredImage: undefined,\n        images: [],\n        videos: []\n    })\n\n    externalUrl$ = new BehaviorSubject(undefined);\n\n    accommodationPolicy$ = new BehaviorSubject({});\n    relatedResources$ = new BehaviorSubject([]);\n\n    setupListener$ = new BehaviorSubject(false);\n    generalInfoListener$ = new BehaviorSubject(false);\n    policyRentalListener$ = new BehaviorSubject(false);\n    policyMenuListener$ = new BehaviorSubject(false);\n    policyListener$ = new BehaviorSubject(false);\n\n    travelId$ = new BehaviorSubject(undefined);\n    medicalId$ = new BehaviorSubject(undefined);\n    educationId$ = new BehaviorSubject(undefined);\n\n\n\n    constructor(private http: HttpClient) {\n    }\n\n    listenForSetup() {\n        return this.setupListener$.asObservable();\n    }\n\n    listenForGeneralInfo() {\n        return this.generalInfoListener$.asObservable();\n    }\n\n    listenForPolicyRental() {\n        return this.policyRentalListener$.asObservable();\n    }\n\n    listenForPolicyMenu(){\n        return this.policyMenuListener$.asObservable();\n    }\n\n    listenForPolicy(){\n        return this.policyListener$.asObservable();\n    }\n\n\n    /** Stepper Listener*/\n    getTemplateType() {\n        return this.resourceTemplateType$.asObservable()\n    }\n\n    getResourceId() {\n        return this.resourceId$.asObservable()\n    }\n\n    getBookingType(){\n        return this.bookingType$.asObservable();\n    }\n\n    getFacilitiesByCategory() {\n        return this.facilitiesByCategory$.asObservable()\n    }\n\n    getAttributesData() {\n        return this.attributesFromResourceTemplate$.asObservable();\n    }\n\n\n    addTripsId(tripId) {\n        this.settingsTripsItineraries$.next(this.settingsTripsItineraries$.getValue().concat(tripId));\n    }\n\n\n    /** Add Template  */\n    addTemplate(templateType) {\n        this.resourceTemplateType$.next(templateType)\n    }\n\n\n    /** API Requests  */\n    getListOfDomains() {\n        return this.http.get('/bestinform/getListOfDomains');\n    }\n\n    getAllResourceCategoriesByResourceDomain(id: string) {\n        return this.http.get('/bestinform/getAllResourceCategoriesByResourceDomain?resourceDomain=' + id)\n    }\n\n    getAllResourceTypesByResourceCategory(id: string) {\n        return this.http.get('/bestinform/getAllResourceTypesByResourceCategory?resourceCategoryId=' + id)\n    }\n\n    getListResourceTemplateFiltered(page: number, size: number, sort: string, dir: string, filterParams: ResourceTemplateFilteredModel) {\n\n        const sortAfter = sort.length > 0 ? '&sort=' + sort : ''\n        const filterDir = dir.length > 0 ? '&dir=' + dir : ''\n\n        return this.http.post('/bestinform/listResourceTemplateFiltered?page=' + page + '&size=' + size + sortAfter + filterDir, filterParams)\n    }\n\n    getAttributesFromTemplate(id: string) {\n        return this.http.get('/bestinform/getAttributesFromTemplate?resourceTemplateId=' + id)\n    }\n\n    addResource(data: any, userId?: string) {\n        if (userId) {\n            return this.http.post('/bestinform/addResource?userId=' + userId, data);\n        } else {\n            return this.http.post('/bestinform/addResource', data);\n        }\n    }\n\n\n    updateResource(id: string, data: any) {\n        return this.http.put('/bestinform/updateResource?resourceId=' + id, data)\n    }\n\n    getResourceById(id: string) {\n        return this.http.get('/bestinform/getResourceById?resourceId=' + id)\n    }\n\n    getAttributes(data: Array<string>) {\n        return this.http.post('/bestinform/getAttributes', data)\n    }\n\n    getAttributesByNames(data: any) {\n        return this.http.post('/bestinform/getAttributesByNames', data)\n    }\n\n    uploadResourceImage(resourceId: string, file: object) {\n        return this.http.post('/bestinform/uploadResourceImage?resourceId=' + resourceId, file);\n    }\n\n    uploadDocAttachements(resourceId: string, type: string, file: object) {\n        return this.http.post('/bestinform/uploadDocAttachments?resourceId=' + resourceId + '&type=' + type, file);\n    }\n\n    // uploadDocAttachements(resourceId: string, type: boolean, file: object) {\n    //     return this.http.post('/bestinform/uploadDocAttachments?resourceId=' + resourceId + '&image=' + type, file);\n    // }\n\n    getAttributeById(attrId: string) {\n        return this.http.get('/bestinform/getAttributeById?attributeId=' + attrId);\n    }\n\n    changeStatusForResource(resourceId: string, status: string) {\n        return this.http.put('/bestinform/changeResourceStatus?resourceId=' + resourceId + '&status=' + status, {});\n    }\n\n\n    //LOCATION\n\n    getAllCountries() {\n        return this.http.get('/bestinform/getAllCountries');\n    }\n\n    getCityFilter(page: number, size: number, sort?: string, dir?: string, filters?) {\n        return this.http.post('/bestinform/listCityFiltered?page=' + page + '&size=' + size + '&sort=' + sort + '&dir=' + dir, filters);\n    }\n\n    getTimepickerByResourceId(resourceId: string){\n        return this.http.get('/bestinform/getBookingTimePickerByResourceId?resourceId=' + resourceId);\n    }\n\n    //Related res\n    addRelatedresources(targetResourceId: string, eventId: string){\n        return this.http.put('/bestinform/addRelatedResource?targetResourceId='+targetResourceId+'&eventId='+eventId, {});\n    }\n\n    removeRelatedResource(eventId: string, targetResourceId: string){\n        return this.http.put('/bestinform/removeRelatedResource?eventId='+ eventId+'&targetResourceId=' + targetResourceId, {});\n    }\n\n}\n","import {Component, EventEmitter, Input, OnChanges, OnInit, Output} from '@angular/core';\nimport {CommonModule} from '@angular/common';\nimport {CulturalRoom, Seat} from \"../../shared/_models/cultural-room.model\";\nimport {MatLegacyTooltipModule} from \"@angular/material/legacy-tooltip\";\nimport {\n    SelectedSeat\n} from \"../../features/domain-listing/view-simple-resource/booking-type-tab-items/booking-type-items.service\";\n\nimport {FormsModule, ReactiveFormsModule} from \"@angular/forms\";\nimport {MatLegacyMenuModule} from \"@angular/material/legacy-menu\";\nimport {MatLegacyRadioModule} from \"@angular/material/legacy-radio\";\nimport {MatRadioChange} from \"@angular/material/radio\";\n\n@Component({\n    selector: 'app-seats-viewer',\n    standalone: true,\n    imports: [CommonModule, MatLegacyTooltipModule, ReactiveFormsModule, MatLegacyMenuModule, MatLegacyRadioModule, FormsModule],\n    templateUrl: './seats-viewer.component.html',\n    styleUrls: ['./seats-viewer.component.scss']\n})\nexport class SeatsViewerComponent implements OnChanges, OnInit {\n    @Input() culturalRoom: CulturalRoom;\n    @Input() rowsGenerationType: 'numbers' | 'letters';\n    @Output() seatSelection = new EventEmitter<SelectedSeat[]>();\n\n    isEditMode = true;\n    hasBookedWithReservation = false;\n\n    private selectedSeatsMatrix: SelectedSeat[][] = null;\n\n    // width by nr of columns\n    maxZoneWidth = 0;\n\n    ngOnInit(): void {\n        this.checkIfEditMode();\n\n        if (!this.isEditMode) {\n            this.createEmptySeatsMatrix();\n        } else {\n            this.hasBookedWithReservation = this.checkIfBookedWithReservation();\n        }\n    }\n\n    ngOnChanges(): void {\n        console.log('se apeleaza on changes');\n        if (!this.isEditMode) return;\n\n        this.createMaxZoneWidth();\n    }\n\n    checkIfEditMode() {\n        if (this.seatSelection.observed) {\n            this.isEditMode = false;\n        }\n    }\n\n    checkIfBookedWithReservation(): boolean {\n        for (const zone of this.culturalRoom.zones) {\n            for (const row of zone.rowsForBooking) {\n                for (const seat of row.seats) {\n                    if (seat.seatStatus === 'bookedWithReservation') {\n                        return true;\n                    }\n                }\n            }\n        }\n        return false;\n    }\n\n    createEmptySeatsMatrix() {\n        this.selectedSeatsMatrix = [];\n\n        for (const zone of this.culturalRoom.zones) {\n            this.checkIfMaxWidth(zone.columns);\n\n            for (let rowIndex = 0; rowIndex < zone.rows; rowIndex++) {\n                const row = [];\n                for (let columnIndex = 0; columnIndex < zone.columns; columnIndex++) {\n                    row.push(null);\n                }\n                this.selectedSeatsMatrix.push(row);\n            }\n        }\n        console.log('empty seats matrix', this.selectedSeatsMatrix);\n    }\n\n    createMaxZoneWidth() {\n        this.maxZoneWidth = 0;\n        for (const zone of this.culturalRoom.zones) {\n            this.checkIfMaxWidth(zone.columns);\n        }\n    }\n\n    toggleSeat(zoneIndex: number, rowIndex: number, seatIndex: number) {\n        console.log('seat toggle', zoneIndex, rowIndex, seatIndex);\n\n        const selectedZone = this.culturalRoom?.zones[zoneIndex];\n        const selectedRow = selectedZone?.rowsForBooking[rowIndex];\n        const selectedSeat = selectedRow?.seats[seatIndex];\n\n        if (selectedSeat.seatStatus === 'booked' || selectedSeat.seatStatus === 'empty') return;\n\n        // because each row index resets to 0 for each zone, we calculate the absolute row index to use in the matrix\n        let rowOffset = 0;\n        if (zoneIndex >= 1) {\n            for (let index = 0; index < zoneIndex; index++) {\n                rowOffset += this.culturalRoom.zones[index].rows;\n            }\n        }\n\n        if (selectedSeat?.seatStatus === 'available') {\n            selectedSeat.seatStatus = 'selected';\n            this.selectedSeatsMatrix[rowIndex + rowOffset][seatIndex] = {\n                price: selectedZone.price,\n                rowLabel: selectedRow.rowLabel,\n                seatColumnLabel: selectedSeat.seatColumnLabel\n            }\n        } else if (selectedSeat?.seatStatus === 'selected') {\n            selectedSeat.seatStatus = 'available';\n            this.selectedSeatsMatrix[rowIndex + rowOffset][seatIndex] = null;\n        }\n\n        console.log(this.selectedSeatsMatrix);\n\n        // transformam matricea intr-un singur array si scoatem valorile null, apoi emitem arrayul de locuri\n        console.log(this.selectedSeatsMatrix.flat().filter(seat => seat));\n        this.seatSelection.emit(this.selectedSeatsMatrix.flat().filter(seat => seat));\n    }\n\n    checkIfMaxWidth(columns: number) {\n        this.maxZoneWidth = this.maxZoneWidth < columns ? columns : this.maxZoneWidth;\n    }\n\n    onChangeSeatStatus(event: MatRadioChange, zoneIndex: number, rowIndex: number, seatIndex: number) {\n        console.log(event, zoneIndex, rowIndex, seatIndex);\n        const currentRow = this.culturalRoom.zones[zoneIndex].rowsForBooking[rowIndex].seats;\n\n        this.regenerateSeatLabels(currentRow);\n\n        if (this.isRowEmpty(currentRow)) {\n            this.culturalRoom.zones[zoneIndex].rowsForBooking[rowIndex].rowLabel = null;\n            this.regenerateRowLabels();\n        } else {\n            this.regenerateRowLabels();\n        }\n\n    }\n\n    regenerateSeatLabels(seats: Seat[]) {\n        let seatLabelCounter = 1;\n        for (const seat of seats) {\n            if (seat.seatStatus !== 'empty') {\n                seat.seatColumnLabel = seatLabelCounter;\n                seatLabelCounter++;\n            } else {\n                seat.seatColumnLabel = null;\n            }\n        }\n    }\n\n    regenerateRowLabels() {\n        let rowLabelAsNumber = 1;\n\n        for (const zone of this.culturalRoom.zones) {\n            for (const row of zone.rowsForBooking) {\n                if (!this.isRowEmpty(row.seats)) {\n                    row.rowLabel = this.rowsGenerationType === 'numbers' ? rowLabelAsNumber.toString() : this.numberToLetters(rowLabelAsNumber);\n                    rowLabelAsNumber++;\n                }\n            }\n        }\n    }\n\n    numberToLetters(number: number): string {\n        let str = '', q, r;\n        while (number > 0) {\n            q = (number - 1) / 26;\n            r = (number - 1) % 26;\n            number = Math.floor(q);\n            str = String.fromCharCode(65 + r) + str;\n        }\n        return str;\n    }\n\n    isRowEmpty(seats: Seat[]) {\n        let rowIsEmpty = true;\n        seats.forEach( seat => {\n            if (seat.seatStatus !== 'empty') {\n                rowIsEmpty = false;\n            }\n        });\n        return rowIsEmpty;\n    }\n}\n","!function(t,i){\"object\"==typeof exports&&\"undefined\"!=typeof module?module.exports=i():\"function\"==typeof define&&define.amd?define(i):(t=t||self).RBush=i()}(this,function(){\"use strict\";function t(t,r,e,a,h){!function t(n,r,e,a,h){for(;a>e;){if(a-e>600){var o=a-e+1,s=r-e+1,l=Math.log(o),f=.5*Math.exp(2*l/3),u=.5*Math.sqrt(l*f*(o-f)/o)*(s-o/2<0?-1:1),m=Math.max(e,Math.floor(r-s*f/o+u)),c=Math.min(a,Math.floor(r+(o-s)*f/o+u));t(n,r,m,c,h)}var p=n[r],d=e,x=a;for(i(n,e,r),h(n[a],p)>0&&i(n,e,a);d<x;){for(i(n,d,x),d++,x--;h(n[d],p)<0;)d++;for(;h(n[x],p)>0;)x--}0===h(n[e],p)?i(n,e,x):i(n,++x,a),x<=r&&(e=x+1),r<=x&&(a=x-1)}}(t,r,e||0,a||t.length-1,h||n)}function i(t,i,n){var r=t[i];t[i]=t[n],t[n]=r}function n(t,i){return t<i?-1:t>i?1:0}var r=function(t){void 0===t&&(t=9),this._maxEntries=Math.max(4,t),this._minEntries=Math.max(2,Math.ceil(.4*this._maxEntries)),this.clear()};function e(t,i,n){if(!n)return i.indexOf(t);for(var r=0;r<i.length;r++)if(n(t,i[r]))return r;return-1}function a(t,i){h(t,0,t.children.length,i,t)}function h(t,i,n,r,e){e||(e=p(null)),e.minX=1/0,e.minY=1/0,e.maxX=-1/0,e.maxY=-1/0;for(var a=i;a<n;a++){var h=t.children[a];o(e,t.leaf?r(h):h)}return e}function o(t,i){return t.minX=Math.min(t.minX,i.minX),t.minY=Math.min(t.minY,i.minY),t.maxX=Math.max(t.maxX,i.maxX),t.maxY=Math.max(t.maxY,i.maxY),t}function s(t,i){return t.minX-i.minX}function l(t,i){return t.minY-i.minY}function f(t){return(t.maxX-t.minX)*(t.maxY-t.minY)}function u(t){return t.maxX-t.minX+(t.maxY-t.minY)}function m(t,i){return t.minX<=i.minX&&t.minY<=i.minY&&i.maxX<=t.maxX&&i.maxY<=t.maxY}function c(t,i){return i.minX<=t.maxX&&i.minY<=t.maxY&&i.maxX>=t.minX&&i.maxY>=t.minY}function p(t){return{children:t,height:1,leaf:!0,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0}}function d(i,n,r,e,a){for(var h=[n,r];h.length;)if(!((r=h.pop())-(n=h.pop())<=e)){var o=n+Math.ceil((r-n)/e/2)*e;t(i,o,n,r,a),h.push(n,o,o,r)}}return r.prototype.all=function(){return this._all(this.data,[])},r.prototype.search=function(t){var i=this.data,n=[];if(!c(t,i))return n;for(var r=this.toBBox,e=[];i;){for(var a=0;a<i.children.length;a++){var h=i.children[a],o=i.leaf?r(h):h;c(t,o)&&(i.leaf?n.push(h):m(t,o)?this._all(h,n):e.push(h))}i=e.pop()}return n},r.prototype.collides=function(t){var i=this.data;if(!c(t,i))return!1;for(var n=[];i;){for(var r=0;r<i.children.length;r++){var e=i.children[r],a=i.leaf?this.toBBox(e):e;if(c(t,a)){if(i.leaf||m(t,a))return!0;n.push(e)}}i=n.pop()}return!1},r.prototype.load=function(t){if(!t||!t.length)return this;if(t.length<this._minEntries){for(var i=0;i<t.length;i++)this.insert(t[i]);return this}var n=this._build(t.slice(),0,t.length-1,0);if(this.data.children.length)if(this.data.height===n.height)this._splitRoot(this.data,n);else{if(this.data.height<n.height){var r=this.data;this.data=n,n=r}this._insert(n,this.data.height-n.height-1,!0)}else this.data=n;return this},r.prototype.insert=function(t){return t&&this._insert(t,this.data.height-1),this},r.prototype.clear=function(){return this.data=p([]),this},r.prototype.remove=function(t,i){if(!t)return this;for(var n,r,a,h=this.data,o=this.toBBox(t),s=[],l=[];h||s.length;){if(h||(h=s.pop(),r=s[s.length-1],n=l.pop(),a=!0),h.leaf){var f=e(t,h.children,i);if(-1!==f)return h.children.splice(f,1),s.push(h),this._condense(s),this}a||h.leaf||!m(h,o)?r?(n++,h=r.children[n],a=!1):h=null:(s.push(h),l.push(n),n=0,r=h,h=h.children[0])}return this},r.prototype.toBBox=function(t){return t},r.prototype.compareMinX=function(t,i){return t.minX-i.minX},r.prototype.compareMinY=function(t,i){return t.minY-i.minY},r.prototype.toJSON=function(){return this.data},r.prototype.fromJSON=function(t){return this.data=t,this},r.prototype._all=function(t,i){for(var n=[];t;)t.leaf?i.push.apply(i,t.children):n.push.apply(n,t.children),t=n.pop();return i},r.prototype._build=function(t,i,n,r){var e,h=n-i+1,o=this._maxEntries;if(h<=o)return a(e=p(t.slice(i,n+1)),this.toBBox),e;r||(r=Math.ceil(Math.log(h)/Math.log(o)),o=Math.ceil(h/Math.pow(o,r-1))),(e=p([])).leaf=!1,e.height=r;var s=Math.ceil(h/o),l=s*Math.ceil(Math.sqrt(o));d(t,i,n,l,this.compareMinX);for(var f=i;f<=n;f+=l){var u=Math.min(f+l-1,n);d(t,f,u,s,this.compareMinY);for(var m=f;m<=u;m+=s){var c=Math.min(m+s-1,u);e.children.push(this._build(t,m,c,r-1))}}return a(e,this.toBBox),e},r.prototype._chooseSubtree=function(t,i,n,r){for(;r.push(i),!i.leaf&&r.length-1!==n;){for(var e=1/0,a=1/0,h=void 0,o=0;o<i.children.length;o++){var s=i.children[o],l=f(s),u=(m=t,c=s,(Math.max(c.maxX,m.maxX)-Math.min(c.minX,m.minX))*(Math.max(c.maxY,m.maxY)-Math.min(c.minY,m.minY))-l);u<a?(a=u,e=l<e?l:e,h=s):u===a&&l<e&&(e=l,h=s)}i=h||i.children[0]}var m,c;return i},r.prototype._insert=function(t,i,n){var r=n?t:this.toBBox(t),e=[],a=this._chooseSubtree(r,this.data,i,e);for(a.children.push(t),o(a,r);i>=0&&e[i].children.length>this._maxEntries;)this._split(e,i),i--;this._adjustParentBBoxes(r,e,i)},r.prototype._split=function(t,i){var n=t[i],r=n.children.length,e=this._minEntries;this._chooseSplitAxis(n,e,r);var h=this._chooseSplitIndex(n,e,r),o=p(n.children.splice(h,n.children.length-h));o.height=n.height,o.leaf=n.leaf,a(n,this.toBBox),a(o,this.toBBox),i?t[i-1].children.push(o):this._splitRoot(n,o)},r.prototype._splitRoot=function(t,i){this.data=p([t,i]),this.data.height=t.height+1,this.data.leaf=!1,a(this.data,this.toBBox)},r.prototype._chooseSplitIndex=function(t,i,n){for(var r,e,a,o,s,l,u,m=1/0,c=1/0,p=i;p<=n-i;p++){var d=h(t,0,p,this.toBBox),x=h(t,p,n,this.toBBox),v=(e=d,a=x,o=void 0,s=void 0,l=void 0,u=void 0,o=Math.max(e.minX,a.minX),s=Math.max(e.minY,a.minY),l=Math.min(e.maxX,a.maxX),u=Math.min(e.maxY,a.maxY),Math.max(0,l-o)*Math.max(0,u-s)),M=f(d)+f(x);v<m?(m=v,r=p,c=M<c?M:c):v===m&&M<c&&(c=M,r=p)}return r||n-i},r.prototype._chooseSplitAxis=function(t,i,n){var r=t.leaf?this.compareMinX:s,e=t.leaf?this.compareMinY:l;this._allDistMargin(t,i,n,r)<this._allDistMargin(t,i,n,e)&&t.children.sort(r)},r.prototype._allDistMargin=function(t,i,n,r){t.children.sort(r);for(var e=this.toBBox,a=h(t,0,i,e),s=h(t,n-i,n,e),l=u(a)+u(s),f=i;f<n-i;f++){var m=t.children[f];o(a,t.leaf?e(m):m),l+=u(a)}for(var c=n-i-1;c>=i;c--){var p=t.children[c];o(s,t.leaf?e(p):p),l+=u(s)}return l},r.prototype._adjustParentBBoxes=function(t,i,n){for(var r=n;r>=0;r--)o(i[r],t)},r.prototype._condense=function(t){for(var i=t.length-1,n=void 0;i>=0;i--)0===t[i].children.length?i>0?(n=t[i-1].children).splice(n.indexOf(t[i]),1):this.clear():a(t[i],this.toBBox)},r});\n","// Imports\nvar ___CSS_LOADER_API_SOURCEMAP_IMPORT___ = require(\"../../../../../../node_modules/css-loader/dist/runtime/sourceMaps.js\");\nvar ___CSS_LOADER_API_IMPORT___ = require(\"../../../../../../node_modules/css-loader/dist/runtime/api.js\");\nvar ___CSS_LOADER_EXPORT___ = ___CSS_LOADER_API_IMPORT___(___CSS_LOADER_API_SOURCEMAP_IMPORT___);\n// Module\n___CSS_LOADER_EXPORT___.push([module.id, \"#ol-map {\\n  height: 850px;\\n  width: 100%;\\n}\", \"\",{\"version\":3,\"sources\":[\"webpack://./src/app/features/domain-listing/_components/shared-exp-map/shared-exp-map.component.scss\"],\"names\":[],\"mappings\":\"AAAA;EACI,aAAA;EACA,WAAA;AACJ\",\"sourcesContent\":[\"#ol-map {\\n    height: 850px;\\n    width: 100%;\\n  }\\n  \"],\"sourceRoot\":\"\"}]);\n// Exports\nmodule.exports = ___CSS_LOADER_EXPORT___.toString();\n","// Imports\nvar ___CSS_LOADER_API_SOURCEMAP_IMPORT___ = require(\"../../../../node_modules/css-loader/dist/runtime/sourceMaps.js\");\nvar ___CSS_LOADER_API_IMPORT___ = require(\"../../../../node_modules/css-loader/dist/runtime/api.js\");\nvar ___CSS_LOADER_EXPORT___ = ___CSS_LOADER_API_IMPORT___(___CSS_LOADER_API_SOURCEMAP_IMPORT___);\n// Module\n___CSS_LOADER_EXPORT___.push([module.id, \":root {\\n  --primary-background: #FFFFFF;\\n  --secondary-background: #edf0fa;\\n  --header-footer-background: #FFF ;\\n}\\n\\n[data-theme=dark]:root {\\n  --primary-background: #EDE9E8;\\n  --secondary-background: #EDE9E8;\\n}\\n\\n.positive-amount {\\n  color: rgb(105, 201, 140) !important;\\n}\\n\\n.negative-amount {\\n  color: rgb(241, 56, 88) !important;\\n}\\n\\n.cultural-room-container {\\n  display: flex;\\n  flex-direction: column;\\n  align-items: flex-start;\\n  justify-content: flex-start;\\n  width: -moz-fit-content;\\n  width: fit-content;\\n  gap: 16px;\\n}\\n\\n.stage {\\n  display: flex;\\n  min-width: 98px;\\n  margin-left: auto;\\n  margin-right: 34px;\\n  align-items: center;\\n  justify-content: center;\\n  height: 30px;\\n  border: 2px solid #231F20;\\n  border-radius: 8px;\\n}\\n.stage p {\\n  color: #231F20;\\n  margin-bottom: 0;\\n  font-size: 18px;\\n}\\n\\n.booking-zone {\\n  width: 100%;\\n  display: flex;\\n  flex-direction: column;\\n  gap: 4px;\\n}\\n.booking-zone > p {\\n  margin-bottom: 0;\\n}\\n\\n.booking-row {\\n  display: flex;\\n  flex-direction: row;\\n  align-items: center;\\n  justify-content: flex-start;\\n  gap: 4px;\\n}\\n\\n.seat {\\n  height: 30px;\\n  width: 30px;\\n  border: 2px solid;\\n  border-radius: 8px;\\n  display: flex;\\n  align-items: center;\\n  justify-content: center;\\n  position: relative;\\n  cursor: pointer;\\n}\\n.seat:first-child {\\n  margin-left: auto;\\n}\\n.seat p {\\n  margin-bottom: 0;\\n}\\n.seat.booked {\\n  border-color: #231F20;\\n  background-color: #E6536C;\\n  color: #231F20;\\n  cursor: not-allowed;\\n}\\n.seat.booked-with-reservation {\\n  border-color: #231F20;\\n  background-color: #231F20;\\n  color: white;\\n  cursor: not-allowed;\\n}\\n.seat.available {\\n  border-color: #231F20;\\n  background-color: #69C98C;\\n  color: #231F20;\\n  opacity: 0.5;\\n}\\n.seat.available:hover {\\n  opacity: 1;\\n}\\n.seat.selected {\\n  border-color: #231F20;\\n  background-color: rgb(35, 92, 19);\\n  color: #231F20;\\n  opacity: 1;\\n}\\n.seat.selected:hover {\\n  opacity: 0.8;\\n}\\n.seat.empty {\\n  border-color: #858495;\\n  background-color: #858495;\\n  color: #858495;\\n  cursor: not-allowed;\\n  pointer-events: none;\\n}\\n.seat.on-edit {\\n  cursor: pointer;\\n  pointer-events: auto;\\n}\\n\\n.seat-change-menu {\\n  display: none;\\n  position: absolute;\\n  top: 30px;\\n  left: 0;\\n  background-color: white;\\n  color: #231F20;\\n  border: 2px solid black;\\n  border-radius: 8px;\\n  z-index: 1;\\n  cursor: default;\\n  padding: 10px 20px;\\n  width: 150px;\\n}\\n\\n.seat:hover > .seat-change-menu {\\n  display: block;\\n}\\n\\n.not-allowed {\\n  cursor: not-allowed !important;\\n}\", \"\",{\"version\":3,\"sources\":[\"webpack://./src/app/theme/styles/components/_colors.scss\",\"webpack://./src/app/standalone-components/seats-viewer/seats-viewer.component.scss\"],\"names\":[],\"mappings\":\"AAcA;EACE,6BAAA;EACA,+BAAA;EACA,iCAAA;ACbF;;ADgBA;EACE,6BAAA;EACA,+BAAA;ACbF;;ADyCA;EACI,oCAAA;ACtCJ;;ADyCA;EACQ,kCAAA;ACtCR;;AAbA;EACE,aAAA;EACA,sBAAA;EACA,uBAAA;EACA,2BAAA;EACA,uBAAA;EAAA,kBAAA;EACA,SAAA;AAgBF;;AAbA;EACE,aAAA;EACA,eAAA;EACA,iBAAA;EACA,kBAAA;EACA,mBAAA;EACA,uBAAA;EACA,YAlBa;EAmBb,yBAAA;EACA,kBAAA;AAgBF;AAdE;EACE,cDpBI;ECqBJ,gBAAA;EACA,eAAA;AAgBJ;;AAZA;EACE,WAAA;EACA,aAAA;EACA,sBAAA;EAGA,QAAA;AAaF;AAXE;EACE,gBAAA;AAaJ;;AATA;EACE,aAAA;EACA,mBAAA;EACA,mBAAA;EACA,2BAAA;EACA,QAAA;AAYF;;AATA;EACE,YAnDa;EAoDb,WApDa;EAqDb,iBAAA;EACA,kBAAA;EACA,aAAA;EACA,mBAAA;EACA,uBAAA;EACA,kBAAA;EACA,eAAA;AAYF;AAVE;EACE,iBAAA;AAYJ;AATE;EACE,gBAAA;AAWJ;AARE;EACE,qBDnEI;ECoEJ,yBD3CY;EC4CZ,cDrEI;ECsEJ,mBAAA;AAUJ;AAPE;EACE,qBD1EI;EC2EJ,yBD3EI;EC4EJ,YAAA;EACA,mBAAA;AASJ;AANE;EACE,qBDjFI;ECkFJ,yBD7DU;EC8DV,cDnFI;ECoFJ,YAAA;AAQJ;AANI;EACE,UAAA;AAQN;AAJE;EACE,qBD5FI;EC6FJ,iCAAA;EACA,cD9FI;EC+FJ,UAAA;AAMJ;AAJI;EACE,YAAA;AAMN;AAFE;EACE,qBDhFY;ECiFZ,yBDjFY;ECkFZ,cDlFY;ECmFZ,mBAAA;EACA,oBAAA;AAIJ;AADE;EACE,eAAA;EACA,oBAAA;AAGJ;;AACA;EACE,aAAA;EACA,kBAAA;EACA,SAAA;EACA,OAAA;EACA,uBAAA;EACA,cD1HM;EC2HN,uBAAA;EACA,kBAAA;EACA,UAAA;EACA,eAAA;EACA,kBAAA;EACA,YAAA;AAEF;;AACA;EACE,cAAA;AAEF;;AACA;EACE,8BAAA;AAEF\",\"sourcesContent\":[\"// theme colors\\n$primary-color: #24398A;\\n\\n$secondary-color: #FFCC29;\\n\\n$title: #231F20;\\n$paragraph: #231F20;\\n$link: #0D4494;\\n\\n$background-primary: #FFFFFF !default;\\n$background-secondary: #edf0fa !default;\\n\\n$header-footer-color: #FFF;\\n\\n:root {\\n  --primary-background: #{$background-primary};\\n  --secondary-background: #{$background-secondary};\\n  --header-footer-background: #{$header-footer-color}\\n}\\n\\n[data-theme='dark']:root {\\n  --primary-background: #EDE9E8;\\n  --secondary-background: #EDE9E8;\\n}\\n\\n//label colors\\n$active-color:#69C98C;\\n$pending-color:#FCCC3D;\\n$inactive-color:#858495;\\n$draft-color:#2F9DF4;\\n$archived-color:#E6536C;\\n$inprogress-color:#236BB4;\\n\\n$bkg-active-color:rgba(105, 201, 140, 0.2);\\n$bkg-pending-color:rgba(252, 204, 61, 0.2);\\n$bkg-inactive-color:rgba(133, 132, 149, 0.2);\\n$bkg-draft-color:rgba(47, 157, 244, 0.2);\\n$bkg-archived-color:rgba(230, 83, 108, 0.2);\\n$bkg-inprogress-color:rgba(73, 80, 250, 0.2);\\n\\n$like-color:#2CCEA7;\\n$dislike-color: #EA4335;;\\n\\n\\n//label buttons active/inactive/disabled\\n\\n$active-btn-color:#34A853;\\n$inactive-btn-color:#848484;\\n$disabled-btn-color:#E64335;\\n\\n.positive-amount{\\n    color:rgba(105, 201, 140, 1)!important;\\n}\\n\\n.negative-amount{\\n        color:rgba(241, 56, 88, 1)!important;\\n}\\n\\n\",\"@import \\\"src/app/theme/styles/components/_colors.scss\\\";\\n\\n$seat-size-px: 30px;\\n\\n.cultural-room-container {\\n  display: flex;\\n  flex-direction: column;\\n  align-items: flex-start;\\n  justify-content: flex-start;\\n  width: fit-content;\\n  gap: 16px;\\n}\\n\\n.stage {\\n  display: flex;\\n  min-width: calc(3 * $seat-size-px + 8px);\\n  margin-left: auto;\\n  margin-right: calc($seat-size-px + 4px);\\n  align-items: center;\\n  justify-content: center;\\n  height: $seat-size-px;\\n  border: 2px solid $title;\\n  border-radius: 8px;\\n\\n  p {\\n    color: $title;\\n    margin-bottom: 0;\\n    font-size: $seat-size-px * 0.6;\\n  }\\n}\\n\\n.booking-zone {\\n  width: 100%;\\n  display: flex;\\n  flex-direction: column;\\n  //align-items: flex-start;\\n  //justify-content: flex-start;\\n  gap: 4px;\\n\\n  & > p {\\n    margin-bottom: 0;\\n  }\\n}\\n\\n.booking-row {\\n  display: flex;\\n  flex-direction: row;\\n  align-items: center;\\n  justify-content: flex-start;\\n  gap: 4px;\\n}\\n\\n.seat {\\n  height: $seat-size-px;\\n  width: $seat-size-px;\\n  border: 2px solid;\\n  border-radius: 8px;\\n  display: flex;\\n  align-items: center;\\n  justify-content: center;\\n  position: relative;\\n  cursor: pointer;\\n\\n  &:first-child {\\n    margin-left: auto;\\n  }\\n\\n  p {\\n    margin-bottom: 0;\\n  }\\n\\n  &.booked {\\n    border-color: $title;\\n    background-color: $archived-color;\\n    color: $title;\\n    cursor: not-allowed;\\n  }\\n\\n  &.booked-with-reservation {\\n    border-color: $title;\\n    background-color: $title;\\n    color: white;\\n    cursor: not-allowed;\\n  }\\n\\n  &.available {\\n    border-color: $title;\\n    background-color: $active-color;\\n    color: $title;\\n    opacity: 0.5;\\n\\n    &:hover {\\n      opacity: 1;\\n    }\\n  }\\n\\n  &.selected {\\n    border-color: $title;\\n    background-color: rgb(35, 92, 19);\\n    color: $title;\\n    opacity: 1;\\n\\n    &:hover {\\n      opacity: 0.8;\\n    }\\n  }\\n\\n  &.empty {\\n    border-color: $inactive-color;\\n    background-color: $inactive-color;\\n    color: $inactive-color;\\n    cursor: not-allowed;\\n    pointer-events: none;\\n  }\\n\\n  &.on-edit {\\n    cursor: pointer;\\n    pointer-events: auto;\\n  }\\n}\\n\\n.seat-change-menu {\\n  display: none;\\n  position: absolute;\\n  top: 30px;\\n  left: 0;\\n  background-color: white;\\n  color: $title;\\n  border: 2px solid black;\\n  border-radius: 8px;\\n  z-index: 1;\\n  cursor: default;\\n  padding: 10px 20px;\\n  width: 150px;\\n}\\n\\n.seat:hover > .seat-change-menu {\\n  display: block;\\n}\\n\\n.not-allowed {\\n  cursor: not-allowed !important;\\n}\"],\"sourceRoot\":\"\"}]);\n// Exports\nmodule.exports = ___CSS_LOADER_EXPORT___.toString();\n","/**\n * @module ol/Feature\n */\nimport BaseObject from './Object.js';\nimport EventType from './events/EventType.js';\nimport {assert} from './asserts.js';\nimport {listen, unlistenByKey} from './events.js';\n\n/**\n * @typedef {typeof Feature|typeof import(\"./render/Feature.js\").default} FeatureClass\n */\n\n/**\n * @typedef {Feature|import(\"./render/Feature.js\").default} FeatureLike\n */\n\n/***\n * @template Return\n * @typedef {import(\"./Observable\").OnSignature<import(\"./Observable\").EventTypes, import(\"./events/Event.js\").default, Return> &\n *   import(\"./Observable\").OnSignature<import(\"./ObjectEventType\").Types|'change:geometry', import(\"./Object\").ObjectEvent, Return> &\n *   import(\"./Observable\").CombinedOnSignature<import(\"./Observable\").EventTypes|import(\"./ObjectEventType\").Types\n *     |'change:geometry', Return>} FeatureOnSignature\n */\n\n/***\n * @template Geometry\n * @typedef {Object<string, *> & { geometry?: Geometry }} ObjectWithGeometry\n */\n\n/**\n * @classdesc\n * A vector object for geographic features with a geometry and other\n * attribute properties, similar to the features in vector file formats like\n * GeoJSON.\n *\n * Features can be styled individually with `setStyle`; otherwise they use the\n * style of their vector layer.\n *\n * Note that attribute properties are set as {@link module:ol/Object~BaseObject} properties on\n * the feature object, so they are observable, and have get/set accessors.\n *\n * Typically, a feature has a single geometry property. You can set the\n * geometry using the `setGeometry` method and get it with `getGeometry`.\n * It is possible to store more than one geometry on a feature using attribute\n * properties. By default, the geometry used for rendering is identified by\n * the property name `geometry`. If you want to use another geometry property\n * for rendering, use the `setGeometryName` method to change the attribute\n * property associated with the geometry for the feature.  For example:\n *\n * ```js\n *\n * import Feature from 'ol/Feature.js';\n * import Polygon from 'ol/geom/Polygon.js';\n * import Point from 'ol/geom/Point.js';\n *\n * const feature = new Feature({\n *   geometry: new Polygon(polyCoords),\n *   labelPoint: new Point(labelCoords),\n *   name: 'My Polygon',\n * });\n *\n * // get the polygon geometry\n * const poly = feature.getGeometry();\n *\n * // Render the feature as a point using the coordinates from labelPoint\n * feature.setGeometryName('labelPoint');\n *\n * // get the point geometry\n * const point = feature.getGeometry();\n * ```\n *\n * @api\n * @template {import(\"./geom/Geometry.js\").default} [Geometry=import(\"./geom/Geometry.js\").default]\n */\nclass Feature extends BaseObject {\n  /**\n   * @param {Geometry|ObjectWithGeometry<Geometry>} [geometryOrProperties]\n   *     You may pass a Geometry object directly, or an object literal containing\n   *     properties. If you pass an object literal, you may include a Geometry\n   *     associated with a `geometry` key.\n   */\n  constructor(geometryOrProperties) {\n    super();\n\n    /***\n     * @type {FeatureOnSignature<import(\"./events\").EventsKey>}\n     */\n    this.on;\n\n    /***\n     * @type {FeatureOnSignature<import(\"./events\").EventsKey>}\n     */\n    this.once;\n\n    /***\n     * @type {FeatureOnSignature<void>}\n     */\n    this.un;\n\n    /**\n     * @private\n     * @type {number|string|undefined}\n     */\n    this.id_ = undefined;\n\n    /**\n     * @type {string}\n     * @private\n     */\n    this.geometryName_ = 'geometry';\n\n    /**\n     * User provided style.\n     * @private\n     * @type {import(\"./style/Style.js\").StyleLike}\n     */\n    this.style_ = null;\n\n    /**\n     * @private\n     * @type {import(\"./style/Style.js\").StyleFunction|undefined}\n     */\n    this.styleFunction_ = undefined;\n\n    /**\n     * @private\n     * @type {?import(\"./events.js\").EventsKey}\n     */\n    this.geometryChangeKey_ = null;\n\n    this.addChangeListener(this.geometryName_, this.handleGeometryChanged_);\n\n    if (geometryOrProperties) {\n      if (\n        typeof (\n          /** @type {?} */ (geometryOrProperties).getSimplifiedGeometry\n        ) === 'function'\n      ) {\n        const geometry = /** @type {Geometry} */ (geometryOrProperties);\n        this.setGeometry(geometry);\n      } else {\n        /** @type {Object<string, *>} */\n        const properties = geometryOrProperties;\n        this.setProperties(properties);\n      }\n    }\n  }\n\n  /**\n   * Clone this feature. If the original feature has a geometry it\n   * is also cloned. The feature id is not set in the clone.\n   * @return {Feature<Geometry>} The clone.\n   * @api\n   */\n  clone() {\n    const clone = /** @type {Feature<Geometry>} */ (\n      new Feature(this.hasProperties() ? this.getProperties() : null)\n    );\n    clone.setGeometryName(this.getGeometryName());\n    const geometry = this.getGeometry();\n    if (geometry) {\n      clone.setGeometry(/** @type {Geometry} */ (geometry.clone()));\n    }\n    const style = this.getStyle();\n    if (style) {\n      clone.setStyle(style);\n    }\n    return clone;\n  }\n\n  /**\n   * Get the feature's default geometry.  A feature may have any number of named\n   * geometries.  The \"default\" geometry (the one that is rendered by default) is\n   * set when calling {@link module:ol/Feature~Feature#setGeometry}.\n   * @return {Geometry|undefined} The default geometry for the feature.\n   * @api\n   * @observable\n   */\n  getGeometry() {\n    return /** @type {Geometry|undefined} */ (this.get(this.geometryName_));\n  }\n\n  /**\n   * Get the feature identifier.  This is a stable identifier for the feature and\n   * is either set when reading data from a remote source or set explicitly by\n   * calling {@link module:ol/Feature~Feature#setId}.\n   * @return {number|string|undefined} Id.\n   * @api\n   */\n  getId() {\n    return this.id_;\n  }\n\n  /**\n   * Get the name of the feature's default geometry.  By default, the default\n   * geometry is named `geometry`.\n   * @return {string} Get the property name associated with the default geometry\n   *     for this feature.\n   * @api\n   */\n  getGeometryName() {\n    return this.geometryName_;\n  }\n\n  /**\n   * Get the feature's style. Will return what was provided to the\n   * {@link module:ol/Feature~Feature#setStyle} method.\n   * @return {import(\"./style/Style.js\").StyleLike|undefined} The feature style.\n   * @api\n   */\n  getStyle() {\n    return this.style_;\n  }\n\n  /**\n   * Get the feature's style function.\n   * @return {import(\"./style/Style.js\").StyleFunction|undefined} Return a function\n   * representing the current style of this feature.\n   * @api\n   */\n  getStyleFunction() {\n    return this.styleFunction_;\n  }\n\n  /**\n   * @private\n   */\n  handleGeometryChange_() {\n    this.changed();\n  }\n\n  /**\n   * @private\n   */\n  handleGeometryChanged_() {\n    if (this.geometryChangeKey_) {\n      unlistenByKey(this.geometryChangeKey_);\n      this.geometryChangeKey_ = null;\n    }\n    const geometry = this.getGeometry();\n    if (geometry) {\n      this.geometryChangeKey_ = listen(\n        geometry,\n        EventType.CHANGE,\n        this.handleGeometryChange_,\n        this\n      );\n    }\n    this.changed();\n  }\n\n  /**\n   * Set the default geometry for the feature.  This will update the property\n   * with the name returned by {@link module:ol/Feature~Feature#getGeometryName}.\n   * @param {Geometry|undefined} geometry The new geometry.\n   * @api\n   * @observable\n   */\n  setGeometry(geometry) {\n    this.set(this.geometryName_, geometry);\n  }\n\n  /**\n   * Set the style for the feature to override the layer style.  This can be a\n   * single style object, an array of styles, or a function that takes a\n   * resolution and returns an array of styles. To unset the feature style, call\n   * `setStyle()` without arguments or a falsey value.\n   * @param {import(\"./style/Style.js\").StyleLike} [style] Style for this feature.\n   * @api\n   * @fires module:ol/events/Event~BaseEvent#event:change\n   */\n  setStyle(style) {\n    this.style_ = style;\n    this.styleFunction_ = !style ? undefined : createStyleFunction(style);\n    this.changed();\n  }\n\n  /**\n   * Set the feature id.  The feature id is considered stable and may be used when\n   * requesting features or comparing identifiers returned from a remote source.\n   * The feature id can be used with the\n   * {@link module:ol/source/Vector~VectorSource#getFeatureById} method.\n   * @param {number|string|undefined} id The feature id.\n   * @api\n   * @fires module:ol/events/Event~BaseEvent#event:change\n   */\n  setId(id) {\n    this.id_ = id;\n    this.changed();\n  }\n\n  /**\n   * Set the property name to be used when getting the feature's default geometry.\n   * When calling {@link module:ol/Feature~Feature#getGeometry}, the value of the property with\n   * this name will be returned.\n   * @param {string} name The property name of the default geometry.\n   * @api\n   */\n  setGeometryName(name) {\n    this.removeChangeListener(this.geometryName_, this.handleGeometryChanged_);\n    this.geometryName_ = name;\n    this.addChangeListener(this.geometryName_, this.handleGeometryChanged_);\n    this.handleGeometryChanged_();\n  }\n}\n\n/**\n * Convert the provided object into a feature style function.  Functions passed\n * through unchanged.  Arrays of Style or single style objects wrapped\n * in a new feature style function.\n * @param {!import(\"./style/Style.js\").StyleFunction|!Array<import(\"./style/Style.js\").default>|!import(\"./style/Style.js\").default} obj\n *     A feature style function, a single style, or an array of styles.\n * @return {import(\"./style/Style.js\").StyleFunction} A style function.\n */\nexport function createStyleFunction(obj) {\n  if (typeof obj === 'function') {\n    return obj;\n  }\n  /**\n   * @type {Array<import(\"./style/Style.js\").default>}\n   */\n  let styles;\n  if (Array.isArray(obj)) {\n    styles = obj;\n  } else {\n    assert(typeof (/** @type {?} */ (obj).getZIndex) === 'function', 41); // Expected an `import(\"./style/Style.js\").Style` or an array of `import(\"./style/Style.js\").Style`\n    const style = /** @type {import(\"./style/Style.js\").default} */ (obj);\n    styles = [style];\n  }\n  return function () {\n    return styles;\n  };\n}\nexport default Feature;\n","/**\n * @module ol/colorlike\n */\nimport {toString} from './color.js';\n\n/**\n * A type accepted by CanvasRenderingContext2D.fillStyle\n * or CanvasRenderingContext2D.strokeStyle.\n * Represents a color, pattern, or gradient. The origin for patterns and\n * gradients as fill style is an increment of 512 css pixels from map coordinate\n * `[0, 0]`. For seamless repeat patterns, width and height of the pattern image\n * must be a factor of two (2, 4, 8, ..., 512).\n *\n * @typedef {string|CanvasPattern|CanvasGradient} ColorLike\n * @api\n */\n\n/**\n * @param {import(\"./color.js\").Color|ColorLike} color Color.\n * @return {ColorLike} The color as an {@link ol/colorlike~ColorLike}.\n * @api\n */\nexport function asColorLike(color) {\n  if (Array.isArray(color)) {\n    return toString(color);\n  }\n  return color;\n}\n","/**\n * @module ol/control/FullScreen\n */\nimport Control from './Control.js';\nimport EventType from '../events/EventType.js';\nimport MapProperty from '../MapProperty.js';\nimport {CLASS_CONTROL, CLASS_UNSELECTABLE, CLASS_UNSUPPORTED} from '../css.js';\nimport {listen, unlistenByKey} from '../events.js';\nimport {replaceNode} from '../dom.js';\n\nconst events = [\n  'fullscreenchange',\n  'webkitfullscreenchange',\n  'MSFullscreenChange',\n];\n\n/**\n * @enum {string}\n */\nconst FullScreenEventType = {\n  /**\n   * Triggered after the map entered fullscreen.\n   * @event FullScreenEventType#enterfullscreen\n   * @api\n   */\n  ENTERFULLSCREEN: 'enterfullscreen',\n\n  /**\n   * Triggered after the map leave fullscreen.\n   * @event FullScreenEventType#leavefullscreen\n   * @api\n   */\n  LEAVEFULLSCREEN: 'leavefullscreen',\n};\n\n/***\n * @template Return\n * @typedef {import(\"../Observable\").OnSignature<import(\"../Observable\").EventTypes|\n *     'enterfullscreen'|'leavefullscreen', import(\"../events/Event.js\").default, Return> &\n *   import(\"../Observable\").OnSignature<import(\"../ObjectEventType\").Types, import(\"../Object\").ObjectEvent, Return> &\n *   import(\"../Observable\").CombinedOnSignature<import(\"../Observable\").EventTypes|\n *     'enterfullscreen'|'leavefullscreen'|import(\"../ObjectEventType\").Types, Return>} FullScreenOnSignature\n */\n\n/**\n * @typedef {Object} Options\n * @property {string} [className='ol-full-screen'] CSS class name.\n * @property {string|Text|HTMLElement} [label='\\u2922'] Text label to use for the button.\n * Instead of text, also an element (e.g. a `span` element) can be used.\n * @property {string|Text|HTMLElement} [labelActive='\\u00d7'] Text label to use for the\n * button when full-screen is active.\n * Instead of text, also an element (e.g. a `span` element) can be used.\n * @property {string} [activeClassName=className + '-true'] CSS class name for the button\n * when full-screen is active.\n * @property {string} [inactiveClassName=className + '-false'] CSS class name for the button\n * when full-screen is inactive.\n * @property {string} [tipLabel='Toggle full-screen'] Text label to use for the button tip.\n * @property {boolean} [keys=false] Full keyboard access.\n * @property {HTMLElement|string} [target] Specify a target if you want the\n * control to be rendered outside of the map's viewport.\n * @property {HTMLElement|string} [source] The element to be displayed\n * fullscreen. When not provided, the element containing the map viewport will\n * be displayed fullscreen.\n */\n\n/**\n * @classdesc\n * Provides a button that when clicked fills up the full screen with the map.\n * The full screen source element is by default the element containing the map viewport unless\n * overridden by providing the `source` option. In which case, the dom\n * element introduced using this parameter will be displayed in full screen.\n *\n * When in full screen mode, a close button is shown to exit full screen mode.\n * The [Fullscreen API](https://www.w3.org/TR/fullscreen/) is used to\n * toggle the map in full screen mode.\n *\n * @fires FullScreenEventType#enterfullscreen\n * @fires FullScreenEventType#leavefullscreen\n * @api\n */\nclass FullScreen extends Control {\n  /**\n   * @param {Options} [options] Options.\n   */\n  constructor(options) {\n    options = options ? options : {};\n\n    super({\n      element: document.createElement('div'),\n      target: options.target,\n    });\n\n    /***\n     * @type {FullScreenOnSignature<import(\"../events\").EventsKey>}\n     */\n    this.on;\n\n    /***\n     * @type {FullScreenOnSignature<import(\"../events\").EventsKey>}\n     */\n    this.once;\n\n    /***\n     * @type {FullScreenOnSignature<void>}\n     */\n    this.un;\n\n    /**\n     * @private\n     * @type {boolean}\n     */\n    this.keys_ = options.keys !== undefined ? options.keys : false;\n\n    /**\n     * @private\n     * @type {HTMLElement|string|undefined}\n     */\n    this.source_ = options.source;\n\n    /**\n     * @type {boolean}\n     * @private\n     */\n    this.isInFullscreen_ = false;\n\n    /**\n     * @private\n     */\n    this.boundHandleMapTargetChange_ = this.handleMapTargetChange_.bind(this);\n\n    /**\n     * @private\n     * @type {string}\n     */\n    this.cssClassName_ =\n      options.className !== undefined ? options.className : 'ol-full-screen';\n\n    /**\n     * @private\n     * @type {Array<import(\"../events.js\").EventsKey>}\n     */\n    this.documentListeners_ = [];\n\n    /**\n     * @private\n     * @type {Array<string>}\n     */\n    this.activeClassName_ =\n      options.activeClassName !== undefined\n        ? options.activeClassName.split(' ')\n        : [this.cssClassName_ + '-true'];\n\n    /**\n     * @private\n     * @type {Array<string>}\n     */\n    this.inactiveClassName_ =\n      options.inactiveClassName !== undefined\n        ? options.inactiveClassName.split(' ')\n        : [this.cssClassName_ + '-false'];\n\n    const label = options.label !== undefined ? options.label : '\\u2922';\n\n    /**\n     * @private\n     * @type {Text|HTMLElement}\n     */\n    this.labelNode_ =\n      typeof label === 'string' ? document.createTextNode(label) : label;\n\n    const labelActive =\n      options.labelActive !== undefined ? options.labelActive : '\\u00d7';\n\n    /**\n     * @private\n     * @type {Text|HTMLElement}\n     */\n    this.labelActiveNode_ =\n      typeof labelActive === 'string'\n        ? document.createTextNode(labelActive)\n        : labelActive;\n\n    const tipLabel = options.tipLabel ? options.tipLabel : 'Toggle full-screen';\n\n    /**\n     * @private\n     * @type {HTMLElement}\n     */\n    this.button_ = document.createElement('button');\n    this.button_.title = tipLabel;\n    this.button_.setAttribute('type', 'button');\n    this.button_.appendChild(this.labelNode_);\n    this.button_.addEventListener(\n      EventType.CLICK,\n      this.handleClick_.bind(this),\n      false\n    );\n    this.setClassName_(this.button_, this.isInFullscreen_);\n\n    this.element.className = `${this.cssClassName_} ${CLASS_UNSELECTABLE} ${CLASS_CONTROL}`;\n    this.element.appendChild(this.button_);\n  }\n\n  /**\n   * @param {MouseEvent} event The event to handle\n   * @private\n   */\n  handleClick_(event) {\n    event.preventDefault();\n    this.handleFullScreen_();\n  }\n\n  /**\n   * @private\n   */\n  handleFullScreen_() {\n    const map = this.getMap();\n    if (!map) {\n      return;\n    }\n    const doc = map.getOwnerDocument();\n    if (!isFullScreenSupported(doc)) {\n      return;\n    }\n    if (isFullScreen(doc)) {\n      exitFullScreen(doc);\n    } else {\n      let element;\n      if (this.source_) {\n        element =\n          typeof this.source_ === 'string'\n            ? doc.getElementById(this.source_)\n            : this.source_;\n      } else {\n        element = map.getTargetElement();\n      }\n      if (this.keys_) {\n        requestFullScreenWithKeys(element);\n      } else {\n        requestFullScreen(element);\n      }\n    }\n  }\n\n  /**\n   * @private\n   */\n  handleFullScreenChange_() {\n    const map = this.getMap();\n    if (!map) {\n      return;\n    }\n    const wasInFullscreen = this.isInFullscreen_;\n    this.isInFullscreen_ = isFullScreen(map.getOwnerDocument());\n    if (wasInFullscreen !== this.isInFullscreen_) {\n      this.setClassName_(this.button_, this.isInFullscreen_);\n      if (this.isInFullscreen_) {\n        replaceNode(this.labelActiveNode_, this.labelNode_);\n        this.dispatchEvent(FullScreenEventType.ENTERFULLSCREEN);\n      } else {\n        replaceNode(this.labelNode_, this.labelActiveNode_);\n        this.dispatchEvent(FullScreenEventType.LEAVEFULLSCREEN);\n      }\n      map.updateSize();\n    }\n  }\n\n  /**\n   * @param {HTMLElement} element Target element\n   * @param {boolean} fullscreen True if fullscreen class name should be active\n   * @private\n   */\n  setClassName_(element, fullscreen) {\n    if (fullscreen) {\n      element.classList.remove(...this.inactiveClassName_);\n      element.classList.add(...this.activeClassName_);\n    } else {\n      element.classList.remove(...this.activeClassName_);\n      element.classList.add(...this.inactiveClassName_);\n    }\n  }\n\n  /**\n   * Remove the control from its current map and attach it to the new map.\n   * Pass `null` to just remove the control from the current map.\n   * Subclasses may set up event handlers to get notified about changes to\n   * the map here.\n   * @param {import(\"../Map.js\").default|null} map Map.\n   * @api\n   */\n  setMap(map) {\n    const oldMap = this.getMap();\n    if (oldMap) {\n      oldMap.removeChangeListener(\n        MapProperty.TARGET,\n        this.boundHandleMapTargetChange_\n      );\n    }\n\n    super.setMap(map);\n\n    this.handleMapTargetChange_();\n    if (map) {\n      map.addChangeListener(\n        MapProperty.TARGET,\n        this.boundHandleMapTargetChange_\n      );\n    }\n  }\n\n  /**\n   * @private\n   */\n  handleMapTargetChange_() {\n    const listeners = this.documentListeners_;\n    for (let i = 0, ii = listeners.length; i < ii; ++i) {\n      unlistenByKey(listeners[i]);\n    }\n    listeners.length = 0;\n\n    const map = this.getMap();\n    if (map) {\n      const doc = map.getOwnerDocument();\n      if (isFullScreenSupported(doc)) {\n        this.element.classList.remove(CLASS_UNSUPPORTED);\n      } else {\n        this.element.classList.add(CLASS_UNSUPPORTED);\n      }\n\n      for (let i = 0, ii = events.length; i < ii; ++i) {\n        listeners.push(\n          listen(doc, events[i], this.handleFullScreenChange_, this)\n        );\n      }\n      this.handleFullScreenChange_();\n    }\n  }\n}\n\n/**\n * @param {Document} doc The root document to check.\n * @return {boolean} Fullscreen is supported by the current platform.\n */\nfunction isFullScreenSupported(doc) {\n  const body = doc.body;\n  return !!(\n    body['webkitRequestFullscreen'] ||\n    (body.requestFullscreen && doc.fullscreenEnabled)\n  );\n}\n\n/**\n * @param {Document} doc The root document to check.\n * @return {boolean} Element is currently in fullscreen.\n */\nfunction isFullScreen(doc) {\n  return !!(doc['webkitIsFullScreen'] || doc.fullscreenElement);\n}\n\n/**\n * Request to fullscreen an element.\n * @param {HTMLElement} element Element to request fullscreen\n */\nfunction requestFullScreen(element) {\n  if (element.requestFullscreen) {\n    element.requestFullscreen();\n  } else if (element['webkitRequestFullscreen']) {\n    element['webkitRequestFullscreen']();\n  }\n}\n\n/**\n * Request to fullscreen an element with keyboard input.\n * @param {HTMLElement} element Element to request fullscreen\n */\nfunction requestFullScreenWithKeys(element) {\n  if (element['webkitRequestFullscreen']) {\n    element['webkitRequestFullscreen']();\n  } else {\n    requestFullScreen(element);\n  }\n}\n\n/**\n * Exit fullscreen.\n * @param {Document} doc The document to exit fullscren from\n */\nfunction exitFullScreen(doc) {\n  if (doc.exitFullscreen) {\n    doc.exitFullscreen();\n  } else if (doc['webkitExitFullscreen']) {\n    doc['webkitExitFullscreen']();\n  }\n}\n\nexport default FullScreen;\n","/**\n * @module ol/featureloader\n */\nimport {VOID} from './functions.js';\n\n/**\n *\n * @type {boolean}\n * @private\n */\nlet withCredentials = false;\n\n/**\n * {@link module:ol/source/Vector~VectorSource} sources use a function of this type to\n * load features.\n *\n * This function takes up to 5 arguments. These are an {@link module:ol/extent~Extent} representing\n * the area to be loaded, a `{number}` representing the resolution (map units per pixel), an\n * {@link module:ol/proj/Projection~Projection} for the projection, an optional success callback that should get\n * the loaded features passed as an argument and an optional failure callback with no arguments. If\n * the callbacks are not used, the corresponding vector source will not fire `'featuresloadend'` and\n * `'featuresloaderror'` events. `this` within the function is bound to the\n * {@link module:ol/source/Vector~VectorSource} it's called from.\n *\n * The function is responsible for loading the features and adding them to the\n * source.\n * @typedef {function(this:(import(\"./source/Vector\").default|import(\"./VectorTile.js\").default),\n *           import(\"./extent.js\").Extent,\n *           number,\n *           import(\"./proj/Projection.js\").default,\n *           function(Array<import(\"./Feature.js\").default>): void=,\n *           function(): void=): void} FeatureLoader\n * @api\n */\n\n/**\n * {@link module:ol/source/Vector~VectorSource} sources use a function of this type to\n * get the url to load features from.\n *\n * This function takes an {@link module:ol/extent~Extent} representing the area\n * to be loaded, a `{number}` representing the resolution (map units per pixel)\n * and an {@link module:ol/proj/Projection~Projection} for the projection  as\n * arguments and returns a `{string}` representing the URL.\n * @typedef {function(import(\"./extent.js\").Extent, number, import(\"./proj/Projection.js\").default): string} FeatureUrlFunction\n * @api\n */\n\n/**\n * @param {string|FeatureUrlFunction} url Feature URL service.\n * @param {import(\"./format/Feature.js\").default} format Feature format.\n * @param {import(\"./extent.js\").Extent} extent Extent.\n * @param {number} resolution Resolution.\n * @param {import(\"./proj/Projection.js\").default} projection Projection.\n * @param {function(Array<import(\"./Feature.js\").default>, import(\"./proj/Projection.js\").default): void} success Success\n *      Function called with the loaded features and optionally with the data projection.\n * @param {function(): void} failure Failure\n *      Function called when loading failed.\n */\nexport function loadFeaturesXhr(\n  url,\n  format,\n  extent,\n  resolution,\n  projection,\n  success,\n  failure\n) {\n  const xhr = new XMLHttpRequest();\n  xhr.open(\n    'GET',\n    typeof url === 'function' ? url(extent, resolution, projection) : url,\n    true\n  );\n  if (format.getType() == 'arraybuffer') {\n    xhr.responseType = 'arraybuffer';\n  }\n  xhr.withCredentials = withCredentials;\n  /**\n   * @param {Event} event Event.\n   * @private\n   */\n  xhr.onload = function (event) {\n    // status will be 0 for file:// urls\n    if (!xhr.status || (xhr.status >= 200 && xhr.status < 300)) {\n      const type = format.getType();\n      /** @type {Document|Node|Object|string|undefined} */\n      let source;\n      if (type == 'json' || type == 'text') {\n        source = xhr.responseText;\n      } else if (type == 'xml') {\n        source = xhr.responseXML;\n        if (!source) {\n          source = new DOMParser().parseFromString(\n            xhr.responseText,\n            'application/xml'\n          );\n        }\n      } else if (type == 'arraybuffer') {\n        source = /** @type {ArrayBuffer} */ (xhr.response);\n      }\n      if (source) {\n        success(\n          /** @type {Array<import(\"./Feature.js\").default>} */\n          (\n            format.readFeatures(source, {\n              extent: extent,\n              featureProjection: projection,\n            })\n          ),\n          format.readProjection(source)\n        );\n      } else {\n        failure();\n      }\n    } else {\n      failure();\n    }\n  };\n  /**\n   * @private\n   */\n  xhr.onerror = failure;\n  xhr.send();\n}\n\n/**\n * Create an XHR feature loader for a `url` and `format`. The feature loader\n * loads features (with XHR), parses the features, and adds them to the\n * vector source.\n * @param {string|FeatureUrlFunction} url Feature URL service.\n * @param {import(\"./format/Feature.js\").default} format Feature format.\n * @return {FeatureLoader} The feature loader.\n * @api\n */\nexport function xhr(url, format) {\n  /**\n   * @param {import(\"./extent.js\").Extent} extent Extent.\n   * @param {number} resolution Resolution.\n   * @param {import(\"./proj/Projection.js\").default} projection Projection.\n   * @param {function(Array<import(\"./Feature.js\").default>): void} [success] Success\n   *      Function called when loading succeeded.\n   * @param {function(): void} [failure] Failure\n   *      Function called when loading failed.\n   */\n  return function (extent, resolution, projection, success, failure) {\n    const source = /** @type {import(\"./source/Vector\").default} */ (this);\n    loadFeaturesXhr(\n      url,\n      format,\n      extent,\n      resolution,\n      projection,\n      /**\n       * @param {Array<import(\"./Feature.js\").default>} features The loaded features.\n       * @param {import(\"./proj/Projection.js\").default} dataProjection Data\n       * projection.\n       */\n      function (features, dataProjection) {\n        source.addFeatures(features);\n        if (success !== undefined) {\n          success(features);\n        }\n      },\n      /* FIXME handle error */ failure ? failure : VOID\n    );\n  };\n}\n\n/**\n * Setter for the withCredentials configuration for the XHR.\n *\n * @param {boolean} xhrWithCredentials The value of withCredentials to set.\n * Compare https://developer.mozilla.org/en-US/docs/Web/API/XMLHttpRequest/\n * @api\n */\nexport function setWithCredentials(xhrWithCredentials) {\n  withCredentials = xhrWithCredentials;\n}\n","/**\n * @module ol/geom/flat/length\n */\n\n/**\n * @param {Array<number>} flatCoordinates Flat coordinates.\n * @param {number} offset Offset.\n * @param {number} end End.\n * @param {number} stride Stride.\n * @return {number} Length.\n */\nexport function lineStringLength(flatCoordinates, offset, end, stride) {\n  let x1 = flatCoordinates[offset];\n  let y1 = flatCoordinates[offset + 1];\n  let length = 0;\n  for (let i = offset + stride; i < end; i += stride) {\n    const x2 = flatCoordinates[i];\n    const y2 = flatCoordinates[i + 1];\n    length += Math.sqrt((x2 - x1) * (x2 - x1) + (y2 - y1) * (y2 - y1));\n    x1 = x2;\n    y1 = y2;\n  }\n  return length;\n}\n\n/**\n * @param {Array<number>} flatCoordinates Flat coordinates.\n * @param {number} offset Offset.\n * @param {number} end End.\n * @param {number} stride Stride.\n * @return {number} Perimeter.\n */\nexport function linearRingLength(flatCoordinates, offset, end, stride) {\n  let perimeter = lineStringLength(flatCoordinates, offset, end, stride);\n  const dx = flatCoordinates[end - stride] - flatCoordinates[offset];\n  const dy = flatCoordinates[end - stride + 1] - flatCoordinates[offset + 1];\n  perimeter += Math.sqrt(dx * dx + dy * dy);\n  return perimeter;\n}\n","import {lerp} from '../../math.js';\n\n/**\n * Creates chunks of equal length from a linestring\n * @param {number} chunkLength Length of each chunk.\n * @param {Array<number>} flatCoordinates Flat coordinates.\n * @param {number} offset Start offset of the `flatCoordinates`.\n * @param {number} end End offset of the `flatCoordinates`.\n * @param {number} stride Stride.\n * @return {Array<Array<number>>} Chunks of linestrings with stride 2.\n */\nexport function lineChunk(chunkLength, flatCoordinates, offset, end, stride) {\n  const chunks = [];\n  let cursor = offset;\n  let chunkM = 0;\n  let currentChunk = flatCoordinates.slice(offset, 2);\n  while (chunkM < chunkLength && cursor + stride < end) {\n    const [x1, y1] = currentChunk.slice(-2);\n    const x2 = flatCoordinates[cursor + stride];\n    const y2 = flatCoordinates[cursor + stride + 1];\n    const segmentLength = Math.sqrt(\n      (x2 - x1) * (x2 - x1) + (y2 - y1) * (y2 - y1)\n    );\n    chunkM += segmentLength;\n    if (chunkM >= chunkLength) {\n      const m = (chunkLength - chunkM + segmentLength) / segmentLength;\n      const x = lerp(x1, x2, m);\n      const y = lerp(y1, y2, m);\n      currentChunk.push(x, y);\n      chunks.push(currentChunk);\n      currentChunk = [x, y];\n      if (chunkM == chunkLength) {\n        cursor += stride;\n      }\n      chunkM = 0;\n    } else if (chunkM < chunkLength) {\n      currentChunk.push(\n        flatCoordinates[cursor + stride],\n        flatCoordinates[cursor + stride + 1]\n      );\n      cursor += stride;\n    } else {\n      const missing = segmentLength - chunkM;\n      const x = lerp(x1, x2, missing / segmentLength);\n      const y = lerp(y1, y2, missing / segmentLength);\n      currentChunk.push(x, y);\n      chunks.push(currentChunk);\n      currentChunk = [x, y];\n      chunkM = 0;\n      cursor += stride;\n    }\n  }\n  if (chunkM > 0) {\n    chunks.push(currentChunk);\n  }\n  return chunks;\n}\n","/**\n * @module ol/geom/flat/straightchunk\n */\n\n/**\n * @param {number} maxAngle Maximum acceptable angle delta between segments.\n * @param {Array<number>} flatCoordinates Flat coordinates.\n * @param {number} offset Offset.\n * @param {number} end End.\n * @param {number} stride Stride.\n * @return {Array<number>} Start and end of the first suitable chunk of the\n * given `flatCoordinates`.\n */\nexport function matchingChunk(maxAngle, flatCoordinates, offset, end, stride) {\n  let chunkStart = offset;\n  let chunkEnd = offset;\n  let chunkM = 0;\n  let m = 0;\n  let start = offset;\n  let acos, i, m12, m23, x1, y1, x12, y12, x23, y23;\n  for (i = offset; i < end; i += stride) {\n    const x2 = flatCoordinates[i];\n    const y2 = flatCoordinates[i + 1];\n    if (x1 !== undefined) {\n      x23 = x2 - x1;\n      y23 = y2 - y1;\n      m23 = Math.sqrt(x23 * x23 + y23 * y23);\n      if (x12 !== undefined) {\n        m += m12;\n        acos = Math.acos((x12 * x23 + y12 * y23) / (m12 * m23));\n        if (acos > maxAngle) {\n          if (m > chunkM) {\n            chunkM = m;\n            chunkStart = start;\n            chunkEnd = i;\n          }\n          m = 0;\n          start = i - stride;\n        }\n      }\n      m12 = m23;\n      x12 = x23;\n      y12 = y23;\n    }\n    x1 = x2;\n    y1 = y2;\n  }\n  m += m23;\n  return m > chunkM ? [start, i] : [chunkStart, chunkEnd];\n}\n","/**\n * @module ol/geom/flat/textpath\n */\nimport {lerp} from '../../math.js';\nimport {rotate} from './transform.js';\n\n/**\n * @param {Array<number>} flatCoordinates Path to put text on.\n * @param {number} offset Start offset of the `flatCoordinates`.\n * @param {number} end End offset of the `flatCoordinates`.\n * @param {number} stride Stride.\n * @param {string} text Text to place on the path.\n * @param {number} startM m along the path where the text starts.\n * @param {number} maxAngle Max angle between adjacent chars in radians.\n * @param {number} scale The product of the text scale and the device pixel ratio.\n * @param {function(string, string, Object<string, number>):number} measureAndCacheTextWidth Measure and cache text width.\n * @param {string} font The font.\n * @param {Object<string, number>} cache A cache of measured widths.\n * @param {number} rotation Rotation to apply to the flatCoordinates to determine whether text needs to be reversed.\n * @return {Array<Array<*>>|null} The result array (or null if `maxAngle` was\n * exceeded). Entries of the array are x, y, anchorX, angle, chunk.\n */\nexport function drawTextOnPath(\n  flatCoordinates,\n  offset,\n  end,\n  stride,\n  text,\n  startM,\n  maxAngle,\n  scale,\n  measureAndCacheTextWidth,\n  font,\n  cache,\n  rotation\n) {\n  let x2 = flatCoordinates[offset];\n  let y2 = flatCoordinates[offset + 1];\n  let x1 = 0;\n  let y1 = 0;\n  let segmentLength = 0;\n  let segmentM = 0;\n\n  function advance() {\n    x1 = x2;\n    y1 = y2;\n    offset += stride;\n    x2 = flatCoordinates[offset];\n    y2 = flatCoordinates[offset + 1];\n    segmentM += segmentLength;\n    segmentLength = Math.sqrt((x2 - x1) * (x2 - x1) + (y2 - y1) * (y2 - y1));\n  }\n  do {\n    advance();\n  } while (offset < end - stride && segmentM + segmentLength < startM);\n\n  let interpolate =\n    segmentLength === 0 ? 0 : (startM - segmentM) / segmentLength;\n  const beginX = lerp(x1, x2, interpolate);\n  const beginY = lerp(y1, y2, interpolate);\n\n  const startOffset = offset - stride;\n  const startLength = segmentM;\n  const endM = startM + scale * measureAndCacheTextWidth(font, text, cache);\n  while (offset < end - stride && segmentM + segmentLength < endM) {\n    advance();\n  }\n  interpolate = segmentLength === 0 ? 0 : (endM - segmentM) / segmentLength;\n  const endX = lerp(x1, x2, interpolate);\n  const endY = lerp(y1, y2, interpolate);\n\n  // Keep text upright\n  let reverse;\n  if (rotation) {\n    const flat = [beginX, beginY, endX, endY];\n    rotate(flat, 0, 4, 2, rotation, flat, flat);\n    reverse = flat[0] > flat[2];\n  } else {\n    reverse = beginX > endX;\n  }\n\n  const PI = Math.PI;\n  const result = [];\n  const singleSegment = startOffset + stride === offset;\n\n  offset = startOffset;\n  segmentLength = 0;\n  segmentM = startLength;\n  x2 = flatCoordinates[offset];\n  y2 = flatCoordinates[offset + 1];\n\n  let previousAngle;\n  // All on the same segment\n  if (singleSegment) {\n    advance();\n\n    previousAngle = Math.atan2(y2 - y1, x2 - x1);\n    if (reverse) {\n      previousAngle += previousAngle > 0 ? -PI : PI;\n    }\n    const x = (endX + beginX) / 2;\n    const y = (endY + beginY) / 2;\n    result[0] = [x, y, (endM - startM) / 2, previousAngle, text];\n    return result;\n  }\n\n  // rendering across line segments\n  text = text.replace(/\\n/g, ' '); // ensure rendering in single-line as all calculations below don't handle multi-lines\n\n  for (let i = 0, ii = text.length; i < ii; ) {\n    advance();\n    let angle = Math.atan2(y2 - y1, x2 - x1);\n    if (reverse) {\n      angle += angle > 0 ? -PI : PI;\n    }\n    if (previousAngle !== undefined) {\n      let delta = angle - previousAngle;\n      delta += delta > PI ? -2 * PI : delta < -PI ? 2 * PI : 0;\n      if (Math.abs(delta) > maxAngle) {\n        return null;\n      }\n    }\n    previousAngle = angle;\n\n    const iStart = i;\n    let charLength = 0;\n    for (; i < ii; ++i) {\n      const index = reverse ? ii - i - 1 : i;\n      const len = scale * measureAndCacheTextWidth(font, text[index], cache);\n      if (\n        offset + stride < end &&\n        segmentM + segmentLength < startM + charLength + len / 2\n      ) {\n        break;\n      }\n      charLength += len;\n    }\n    if (i === iStart) {\n      continue;\n    }\n    const chars = reverse\n      ? text.substring(ii - iStart, ii - i)\n      : text.substring(iStart, i);\n    interpolate =\n      segmentLength === 0\n        ? 0\n        : (startM + charLength / 2 - segmentM) / segmentLength;\n    const x = lerp(x1, x2, interpolate);\n    const y = lerp(y1, y2, interpolate);\n    result.push([x, y, charLength / 2, angle, chars]);\n    startM += charLength;\n  }\n  return result;\n}\n","/**\n * @module ol/layer/BaseVector\n */\nimport Layer from './Layer.js';\nimport RBush from 'rbush';\nimport Style, {\n  createDefaultStyle,\n  toFunction as toStyleFunction,\n} from '../style/Style.js';\nimport {toStyle} from '../style/flat.js';\n\n/**\n * @template {import(\"../source/Vector.js\").default|import(\"../source/VectorTile.js\").default} VectorSourceType\n * @typedef {Object} Options\n * @property {string} [className='ol-layer'] A CSS class name to set to the layer element.\n * @property {number} [opacity=1] Opacity (0, 1).\n * @property {boolean} [visible=true] Visibility.\n * @property {import(\"../extent.js\").Extent} [extent] The bounding extent for layer rendering.  The layer will not be\n * rendered outside of this extent.\n * @property {number} [zIndex] The z-index for layer rendering.  At rendering time, the layers\n * will be ordered, first by Z-index and then by position. When `undefined`, a `zIndex` of 0 is assumed\n * for layers that are added to the map's `layers` collection, or `Infinity` when the layer's `setMap()`\n * method was used.\n * @property {number} [minResolution] The minimum resolution (inclusive) at which this layer will be\n * visible.\n * @property {number} [maxResolution] The maximum resolution (exclusive) below which this layer will\n * be visible.\n * @property {number} [minZoom] The minimum view zoom level (exclusive) above which this layer will be\n * visible.\n * @property {number} [maxZoom] The maximum view zoom level (inclusive) at which this layer will\n * be visible.\n * @property {import(\"../render.js\").OrderFunction} [renderOrder] Render order. Function to be used when sorting\n * features before rendering. By default features are drawn in the order that they are created. Use\n * `null` to avoid the sort, but get an undefined draw order.\n * @property {number} [renderBuffer=100] The buffer in pixels around the viewport extent used by the\n * renderer when getting features from the vector source for the rendering or hit-detection.\n * Recommended value: the size of the largest symbol, line width or label.\n * @property {VectorSourceType} [source] Source.\n * @property {import(\"../Map.js\").default} [map] Sets the layer as overlay on a map. The map will not manage\n * this layer in its layers collection, and the layer will be rendered on top. This is useful for\n * temporary layers. The standard way to add a layer to a map and have it managed by the map is to\n * use [map.addLayer()]{@link import(\"../Map.js\").default#addLayer}.\n * @property {boolean} [declutter=false] Declutter images and text. Decluttering is applied to all\n * image and text styles of all Vector and VectorTile layers that have set this to `true`. The priority\n * is defined by the z-index of the layer, the `zIndex` of the style and the render order of features.\n * Higher z-index means higher priority. Within the same z-index, a feature rendered before another has\n * higher priority.\n *\n * As an optimization decluttered features from layers with the same `className` are rendered above\n * the fill and stroke styles of all of those layers regardless of z-index.  To opt out of this\n * behavior and place declutterd features with their own layer configure the layer with a `className`\n * other than `ol-layer`.\n * @property {import(\"../style/Style.js\").StyleLike|import(\"../style/flat.js\").FlatStyleLike|null} [style] Layer style. When set to `null`, only\n * features that have their own style will be rendered. See {@link module:ol/style/Style~Style} for the default style\n * which will be used if this is not set.\n * @property {import(\"./Base.js\").BackgroundColor} [background] Background color for the layer. If not specified, no background\n * will be rendered.\n * @property {boolean} [updateWhileAnimating=false] When set to `true`, feature batches will\n * be recreated during animations. This means that no vectors will be shown clipped, but the\n * setting will have a performance impact for large amounts of vector data. When set to `false`,\n * batches will be recreated when no animation is active.\n * @property {boolean} [updateWhileInteracting=false] When set to `true`, feature batches will\n * be recreated during interactions. See also `updateWhileAnimating`.\n * @property {Object<string, *>} [properties] Arbitrary observable properties. Can be accessed with `#get()` and `#set()`.\n */\n\n/**\n * @enum {string}\n * @private\n */\nconst Property = {\n  RENDER_ORDER: 'renderOrder',\n};\n\n/**\n * @classdesc\n * Vector data that is rendered client-side.\n * Note that any property set in the options is set as a {@link module:ol/Object~BaseObject}\n * property on the layer object; for example, setting `title: 'My Title'` in the\n * options means that `title` is observable, and has get/set accessors.\n *\n * @template {import(\"../source/Vector.js\").default|import(\"../source/VectorTile.js\").default} VectorSourceType\n * @template {import(\"../renderer/canvas/VectorLayer.js\").default|import(\"../renderer/canvas/VectorTileLayer.js\").default|import(\"../renderer/canvas/VectorImageLayer.js\").default|import(\"../renderer/webgl/PointsLayer.js\").default} RendererType\n * @extends {Layer<VectorSourceType, RendererType>}\n * @api\n */\nclass BaseVectorLayer extends Layer {\n  /**\n   * @param {Options<VectorSourceType>} [options] Options.\n   */\n  constructor(options) {\n    options = options ? options : {};\n\n    const baseOptions = Object.assign({}, options);\n\n    delete baseOptions.style;\n    delete baseOptions.renderBuffer;\n    delete baseOptions.updateWhileAnimating;\n    delete baseOptions.updateWhileInteracting;\n    super(baseOptions);\n\n    /**\n     * @private\n     * @type {boolean}\n     */\n    this.declutter_ =\n      options.declutter !== undefined ? options.declutter : false;\n\n    /**\n     * @type {number}\n     * @private\n     */\n    this.renderBuffer_ =\n      options.renderBuffer !== undefined ? options.renderBuffer : 100;\n\n    /**\n     * User provided style.\n     * @type {import(\"../style/Style.js\").StyleLike}\n     * @private\n     */\n    this.style_ = null;\n\n    /**\n     * Style function for use within the library.\n     * @type {import(\"../style/Style.js\").StyleFunction|undefined}\n     * @private\n     */\n    this.styleFunction_ = undefined;\n\n    this.setStyle(options.style);\n\n    /**\n     * @type {boolean}\n     * @private\n     */\n    this.updateWhileAnimating_ =\n      options.updateWhileAnimating !== undefined\n        ? options.updateWhileAnimating\n        : false;\n\n    /**\n     * @type {boolean}\n     * @private\n     */\n    this.updateWhileInteracting_ =\n      options.updateWhileInteracting !== undefined\n        ? options.updateWhileInteracting\n        : false;\n  }\n\n  /**\n   * @return {boolean} Declutter.\n   */\n  getDeclutter() {\n    return this.declutter_;\n  }\n\n  /**\n   * Get the topmost feature that intersects the given pixel on the viewport. Returns a promise\n   * that resolves with an array of features. The array will either contain the topmost feature\n   * when a hit was detected, or it will be empty.\n   *\n   * The hit detection algorithm used for this method is optimized for performance, but is less\n   * accurate than the one used in [map.getFeaturesAtPixel()]{@link import(\"../Map.js\").default#getFeaturesAtPixel}.\n   * Text is not considered, and icons are only represented by their bounding box instead of the exact\n   * image.\n   *\n   * @param {import(\"../pixel.js\").Pixel} pixel Pixel.\n   * @return {Promise<Array<import(\"../Feature\").FeatureLike>>} Promise that resolves with an array of features.\n   * @api\n   */\n  getFeatures(pixel) {\n    return super.getFeatures(pixel);\n  }\n\n  /**\n   * @return {number|undefined} Render buffer.\n   */\n  getRenderBuffer() {\n    return this.renderBuffer_;\n  }\n\n  /**\n   * @return {function(import(\"../Feature.js\").default, import(\"../Feature.js\").default): number|null|undefined} Render\n   *     order.\n   */\n  getRenderOrder() {\n    return /** @type {import(\"../render.js\").OrderFunction|null|undefined} */ (\n      this.get(Property.RENDER_ORDER)\n    );\n  }\n\n  /**\n   * Get the style for features.  This returns whatever was passed to the `style`\n   * option at construction or to the `setStyle` method.\n   * @return {import(\"../style/Style.js\").StyleLike|null|undefined} Layer style.\n   * @api\n   */\n  getStyle() {\n    return this.style_;\n  }\n\n  /**\n   * Get the style function.\n   * @return {import(\"../style/Style.js\").StyleFunction|undefined} Layer style function.\n   * @api\n   */\n  getStyleFunction() {\n    return this.styleFunction_;\n  }\n\n  /**\n   * @return {boolean} Whether the rendered layer should be updated while\n   *     animating.\n   */\n  getUpdateWhileAnimating() {\n    return this.updateWhileAnimating_;\n  }\n\n  /**\n   * @return {boolean} Whether the rendered layer should be updated while\n   *     interacting.\n   */\n  getUpdateWhileInteracting() {\n    return this.updateWhileInteracting_;\n  }\n\n  /**\n   * Render declutter items for this layer\n   * @param {import(\"../Map.js\").FrameState} frameState Frame state.\n   */\n  renderDeclutter(frameState) {\n    if (!frameState.declutterTree) {\n      frameState.declutterTree = new RBush(9);\n    }\n    /** @type {*} */ (this.getRenderer()).renderDeclutter(frameState);\n  }\n\n  /**\n   * @param {import(\"../render.js\").OrderFunction|null|undefined} renderOrder\n   *     Render order.\n   */\n  setRenderOrder(renderOrder) {\n    this.set(Property.RENDER_ORDER, renderOrder);\n  }\n\n  /**\n   * Set the style for features.  This can be a single style object, an array\n   * of styles, or a function that takes a feature and resolution and returns\n   * an array of styles. If set to `null`, the layer has no style (a `null` style),\n   * so only features that have their own styles will be rendered in the layer. Call\n   * `setStyle()` without arguments to reset to the default style. See\n   * [the ol/style/Style module]{@link module:ol/style/Style~Style} for information on the default style.\n   *\n   * If your layer has a static style, you can use [flat style]{@link module:ol/style/flat~FlatStyle} object\n   * literals instead of using the `Style` and symbolizer constructors (`Fill`, `Stroke`, etc.):\n   * ```js\n   * vectorLayer.setStyle({\n   *   \"fill-color\": \"yellow\",\n   *   \"stroke-color\": \"black\",\n   *   \"stroke-width\": 4\n   * })\n   * ```\n   *\n   * @param {import(\"../style/Style.js\").StyleLike|import(\"../style/flat.js\").FlatStyleLike|null} [style] Layer style.\n   * @api\n   */\n  setStyle(style) {\n    /**\n     * @type {import(\"../style/Style.js\").StyleLike|null}\n     */\n    let styleLike;\n\n    if (style === undefined) {\n      styleLike = createDefaultStyle;\n    } else if (style === null) {\n      styleLike = null;\n    } else if (typeof style === 'function') {\n      styleLike = style;\n    } else if (style instanceof Style) {\n      styleLike = style;\n    } else if (Array.isArray(style)) {\n      const len = style.length;\n\n      /**\n       * @type {Array<Style>}\n       */\n      const styles = new Array(len);\n\n      for (let i = 0; i < len; ++i) {\n        const s = style[i];\n        if (s instanceof Style) {\n          styles[i] = s;\n        } else {\n          styles[i] = toStyle(s);\n        }\n      }\n      styleLike = styles;\n    } else {\n      styleLike = toStyle(style);\n    }\n\n    this.style_ = styleLike;\n    this.styleFunction_ =\n      style === null ? undefined : toStyleFunction(this.style_);\n    this.changed();\n  }\n}\n\nexport default BaseVectorLayer;\n","/**\n * @module ol/layer/Vector\n */\nimport BaseVectorLayer from './BaseVector.js';\nimport CanvasVectorLayerRenderer from '../renderer/canvas/VectorLayer.js';\n\n/**\n * @classdesc\n * Vector data is rendered client-side, as vectors. This layer type provides most accurate rendering\n * even during animations. Points and labels stay upright on rotated views. For very large\n * amounts of vector data, performance may suffer during pan and zoom animations. In this case,\n * try {@link module:ol/layer/VectorImage~VectorImageLayer}.\n *\n * Note that any property set in the options is set as a {@link module:ol/Object~BaseObject}\n * property on the layer object; for example, setting `title: 'My Title'` in the\n * options means that `title` is observable, and has get/set accessors.\n *\n * @template {import(\"../source/Vector.js\").default} VectorSourceType\n * @extends {BaseVectorLayer<VectorSourceType, CanvasVectorLayerRenderer>}\n * @api\n */\nclass VectorLayer extends BaseVectorLayer {\n  /**\n   * @param {import(\"./BaseVector.js\").Options<VectorSourceType>} [options] Options.\n   */\n  constructor(options) {\n    super(options);\n  }\n\n  createRenderer() {\n    return new CanvasVectorLayerRenderer(this);\n  }\n}\n\nexport default VectorLayer;\n","/**\n * @module ol/loadingstrategy\n */\n\nimport {fromUserExtent, fromUserResolution, toUserExtent} from './proj.js';\n\n/**\n * Strategy function for loading all features with a single request.\n * @param {import(\"./extent.js\").Extent} extent Extent.\n * @param {number} resolution Resolution.\n * @return {Array<import(\"./extent.js\").Extent>} Extents.\n * @api\n */\nexport function all(extent, resolution) {\n  return [[-Infinity, -Infinity, Infinity, Infinity]];\n}\n\n/**\n * Strategy function for loading features based on the view's extent and\n * resolution.\n * @param {import(\"./extent.js\").Extent} extent Extent.\n * @param {number} resolution Resolution.\n * @return {Array<import(\"./extent.js\").Extent>} Extents.\n * @api\n */\nexport function bbox(extent, resolution) {\n  return [extent];\n}\n\n/**\n * Creates a strategy function for loading features based on a tile grid.\n * @param {import(\"./tilegrid/TileGrid.js\").default} tileGrid Tile grid.\n * @return {function(import(\"./extent.js\").Extent, number, import(\"./proj.js\").Projection): Array<import(\"./extent.js\").Extent>} Loading strategy.\n * @api\n */\nexport function tile(tileGrid) {\n  return (\n    /**\n     * @param {import(\"./extent.js\").Extent} extent Extent.\n     * @param {number} resolution Resolution.\n     * @param {import(\"./proj.js\").Projection} projection Projection.\n     * @return {Array<import(\"./extent.js\").Extent>} Extents.\n     */\n    function (extent, resolution, projection) {\n      const z = tileGrid.getZForResolution(\n        fromUserResolution(resolution, projection)\n      );\n      const tileRange = tileGrid.getTileRangeForExtentAndZ(\n        fromUserExtent(extent, projection),\n        z\n      );\n      /** @type {Array<import(\"./extent.js\").Extent>} */\n      const extents = [];\n      /** @type {import(\"./tilecoord.js\").TileCoord} */\n      const tileCoord = [z, 0, 0];\n      for (\n        tileCoord[1] = tileRange.minX;\n        tileCoord[1] <= tileRange.maxX;\n        ++tileCoord[1]\n      ) {\n        for (\n          tileCoord[2] = tileRange.minY;\n          tileCoord[2] <= tileRange.maxY;\n          ++tileCoord[2]\n        ) {\n          extents.push(\n            toUserExtent(tileGrid.getTileCoordExtent(tileCoord), projection)\n          );\n        }\n      }\n      return extents;\n    }\n  );\n}\n","/**\n * @module ol/render/VectorContext\n */\n\n/**\n * @classdesc\n * Context for drawing geometries.  A vector context is available on render\n * events and does not need to be constructed directly.\n * @api\n */\nclass VectorContext {\n  /**\n   * Render a geometry with a custom renderer.\n   *\n   * @param {import(\"../geom/SimpleGeometry.js\").default} geometry Geometry.\n   * @param {import(\"../Feature.js\").FeatureLike} feature Feature.\n   * @param {Function} renderer Renderer.\n   * @param {Function} hitDetectionRenderer Renderer.\n   */\n  drawCustom(geometry, feature, renderer, hitDetectionRenderer) {}\n\n  /**\n   * Render a geometry.\n   *\n   * @param {import(\"../geom/Geometry.js\").default} geometry The geometry to render.\n   */\n  drawGeometry(geometry) {}\n\n  /**\n   * Set the rendering style.\n   *\n   * @param {import(\"../style/Style.js\").default} style The rendering style.\n   */\n  setStyle(style) {}\n\n  /**\n   * @param {import(\"../geom/Circle.js\").default} circleGeometry Circle geometry.\n   * @param {import(\"../Feature.js\").default} feature Feature.\n   */\n  drawCircle(circleGeometry, feature) {}\n\n  /**\n   * @param {import(\"../Feature.js\").default} feature Feature.\n   * @param {import(\"../style/Style.js\").default} style Style.\n   */\n  drawFeature(feature, style) {}\n\n  /**\n   * @param {import(\"../geom/GeometryCollection.js\").default} geometryCollectionGeometry Geometry collection.\n   * @param {import(\"../Feature.js\").default} feature Feature.\n   */\n  drawGeometryCollection(geometryCollectionGeometry, feature) {}\n\n  /**\n   * @param {import(\"../geom/LineString.js\").default|import(\"./Feature.js\").default} lineStringGeometry Line string geometry.\n   * @param {import(\"../Feature.js\").FeatureLike} feature Feature.\n   */\n  drawLineString(lineStringGeometry, feature) {}\n\n  /**\n   * @param {import(\"../geom/MultiLineString.js\").default|import(\"./Feature.js\").default} multiLineStringGeometry MultiLineString geometry.\n   * @param {import(\"../Feature.js\").FeatureLike} feature Feature.\n   */\n  drawMultiLineString(multiLineStringGeometry, feature) {}\n\n  /**\n   * @param {import(\"../geom/MultiPoint.js\").default|import(\"./Feature.js\").default} multiPointGeometry MultiPoint geometry.\n   * @param {import(\"../Feature.js\").FeatureLike} feature Feature.\n   */\n  drawMultiPoint(multiPointGeometry, feature) {}\n\n  /**\n   * @param {import(\"../geom/MultiPolygon.js\").default} multiPolygonGeometry MultiPolygon geometry.\n   * @param {import(\"../Feature.js\").FeatureLike} feature Feature.\n   */\n  drawMultiPolygon(multiPolygonGeometry, feature) {}\n\n  /**\n   * @param {import(\"../geom/Point.js\").default|import(\"./Feature.js\").default} pointGeometry Point geometry.\n   * @param {import(\"../Feature.js\").FeatureLike} feature Feature.\n   */\n  drawPoint(pointGeometry, feature) {}\n\n  /**\n   * @param {import(\"../geom/Polygon.js\").default|import(\"./Feature.js\").default} polygonGeometry Polygon geometry.\n   * @param {import(\"../Feature.js\").FeatureLike} feature Feature.\n   */\n  drawPolygon(polygonGeometry, feature) {}\n\n  /**\n   * @param {import(\"../geom/SimpleGeometry.js\").default|import(\"./Feature.js\").default} geometry Geometry.\n   * @param {import(\"../Feature.js\").FeatureLike} feature Feature.\n   */\n  drawText(geometry, feature) {}\n\n  /**\n   * @param {import(\"../style/Fill.js\").default} fillStyle Fill style.\n   * @param {import(\"../style/Stroke.js\").default} strokeStyle Stroke style.\n   */\n  setFillStrokeStyle(fillStyle, strokeStyle) {}\n\n  /**\n   * @param {import(\"../style/Image.js\").default} imageStyle Image style.\n   * @param {import(\"../render/canvas.js\").DeclutterImageWithText} [declutterImageWithText] Shared data for combined decluttering with a text style.\n   */\n  setImageStyle(imageStyle, declutterImageWithText) {}\n\n  /**\n   * @param {import(\"../style/Text.js\").default} textStyle Text style.\n   * @param {import(\"../render/canvas.js\").DeclutterImageWithText} [declutterImageWithText] Shared data for combined decluttering with an image style.\n   */\n  setTextStyle(textStyle, declutterImageWithText) {}\n}\n\nexport default VectorContext;\n","/**\n * @module ol/render/canvas/Builder\n */\nimport CanvasInstruction from './Instruction.js';\nimport Relationship from '../../extent/Relationship.js';\nimport VectorContext from '../VectorContext.js';\nimport {asColorLike} from '../../colorlike.js';\nimport {\n  buffer,\n  clone,\n  containsCoordinate,\n  coordinateRelationship,\n} from '../../extent.js';\nimport {\n  defaultFillStyle,\n  defaultLineCap,\n  defaultLineDash,\n  defaultLineDashOffset,\n  defaultLineJoin,\n  defaultLineWidth,\n  defaultMiterLimit,\n  defaultStrokeStyle,\n} from '../canvas.js';\nimport {equals, reverseSubArray} from '../../array.js';\nimport {\n  inflateCoordinates,\n  inflateCoordinatesArray,\n  inflateMultiCoordinatesArray,\n} from '../../geom/flat/inflate.js';\n\nclass CanvasBuilder extends VectorContext {\n  /**\n   * @param {number} tolerance Tolerance.\n   * @param {import(\"../../extent.js\").Extent} maxExtent Maximum extent.\n   * @param {number} resolution Resolution.\n   * @param {number} pixelRatio Pixel ratio.\n   */\n  constructor(tolerance, maxExtent, resolution, pixelRatio) {\n    super();\n\n    /**\n     * @protected\n     * @type {number}\n     */\n    this.tolerance = tolerance;\n\n    /**\n     * @protected\n     * @const\n     * @type {import(\"../../extent.js\").Extent}\n     */\n    this.maxExtent = maxExtent;\n\n    /**\n     * @protected\n     * @type {number}\n     */\n    this.pixelRatio = pixelRatio;\n\n    /**\n     * @protected\n     * @type {number}\n     */\n    this.maxLineWidth = 0;\n\n    /**\n     * @protected\n     * @const\n     * @type {number}\n     */\n    this.resolution = resolution;\n\n    /**\n     * @private\n     * @type {Array<*>}\n     */\n    this.beginGeometryInstruction1_ = null;\n\n    /**\n     * @private\n     * @type {Array<*>}\n     */\n    this.beginGeometryInstruction2_ = null;\n\n    /**\n     * @private\n     * @type {import(\"../../extent.js\").Extent}\n     */\n    this.bufferedMaxExtent_ = null;\n\n    /**\n     * @protected\n     * @type {Array<*>}\n     */\n    this.instructions = [];\n\n    /**\n     * @protected\n     * @type {Array<number>}\n     */\n    this.coordinates = [];\n\n    /**\n     * @private\n     * @type {import(\"../../coordinate.js\").Coordinate}\n     */\n    this.tmpCoordinate_ = [];\n\n    /**\n     * @protected\n     * @type {Array<*>}\n     */\n    this.hitDetectionInstructions = [];\n\n    /**\n     * @protected\n     * @type {import(\"../canvas.js\").FillStrokeState}\n     */\n    this.state = /** @type {import(\"../canvas.js\").FillStrokeState} */ ({});\n  }\n\n  /**\n   * @protected\n   * @param {Array<number>} dashArray Dash array.\n   * @return {Array<number>} Dash array with pixel ratio applied\n   */\n  applyPixelRatio(dashArray) {\n    const pixelRatio = this.pixelRatio;\n    return pixelRatio == 1\n      ? dashArray\n      : dashArray.map(function (dash) {\n          return dash * pixelRatio;\n        });\n  }\n\n  /**\n   * @param {Array<number>} flatCoordinates Flat coordinates.\n   * @param {number} stride Stride.\n   * @protected\n   * @return {number} My end\n   */\n  appendFlatPointCoordinates(flatCoordinates, stride) {\n    const extent = this.getBufferedMaxExtent();\n    const tmpCoord = this.tmpCoordinate_;\n    const coordinates = this.coordinates;\n    let myEnd = coordinates.length;\n    for (let i = 0, ii = flatCoordinates.length; i < ii; i += stride) {\n      tmpCoord[0] = flatCoordinates[i];\n      tmpCoord[1] = flatCoordinates[i + 1];\n      if (containsCoordinate(extent, tmpCoord)) {\n        coordinates[myEnd++] = tmpCoord[0];\n        coordinates[myEnd++] = tmpCoord[1];\n      }\n    }\n    return myEnd;\n  }\n\n  /**\n   * @param {Array<number>} flatCoordinates Flat coordinates.\n   * @param {number} offset Offset.\n   * @param {number} end End.\n   * @param {number} stride Stride.\n   * @param {boolean} closed Last input coordinate equals first.\n   * @param {boolean} skipFirst Skip first coordinate.\n   * @protected\n   * @return {number} My end.\n   */\n  appendFlatLineCoordinates(\n    flatCoordinates,\n    offset,\n    end,\n    stride,\n    closed,\n    skipFirst\n  ) {\n    const coordinates = this.coordinates;\n    let myEnd = coordinates.length;\n    const extent = this.getBufferedMaxExtent();\n    if (skipFirst) {\n      offset += stride;\n    }\n    let lastXCoord = flatCoordinates[offset];\n    let lastYCoord = flatCoordinates[offset + 1];\n    const nextCoord = this.tmpCoordinate_;\n    let skipped = true;\n\n    let i, lastRel, nextRel;\n    for (i = offset + stride; i < end; i += stride) {\n      nextCoord[0] = flatCoordinates[i];\n      nextCoord[1] = flatCoordinates[i + 1];\n      nextRel = coordinateRelationship(extent, nextCoord);\n      if (nextRel !== lastRel) {\n        if (skipped) {\n          coordinates[myEnd++] = lastXCoord;\n          coordinates[myEnd++] = lastYCoord;\n          skipped = false;\n        }\n        coordinates[myEnd++] = nextCoord[0];\n        coordinates[myEnd++] = nextCoord[1];\n      } else if (nextRel === Relationship.INTERSECTING) {\n        coordinates[myEnd++] = nextCoord[0];\n        coordinates[myEnd++] = nextCoord[1];\n        skipped = false;\n      } else {\n        skipped = true;\n      }\n      lastXCoord = nextCoord[0];\n      lastYCoord = nextCoord[1];\n      lastRel = nextRel;\n    }\n\n    // Last coordinate equals first or only one point to append:\n    if ((closed && skipped) || i === offset + stride) {\n      coordinates[myEnd++] = lastXCoord;\n      coordinates[myEnd++] = lastYCoord;\n    }\n    return myEnd;\n  }\n\n  /**\n   * @param {Array<number>} flatCoordinates Flat coordinates.\n   * @param {number} offset Offset.\n   * @param {Array<number>} ends Ends.\n   * @param {number} stride Stride.\n   * @param {Array<number>} builderEnds Builder ends.\n   * @return {number} Offset.\n   */\n  drawCustomCoordinates_(flatCoordinates, offset, ends, stride, builderEnds) {\n    for (let i = 0, ii = ends.length; i < ii; ++i) {\n      const end = ends[i];\n      const builderEnd = this.appendFlatLineCoordinates(\n        flatCoordinates,\n        offset,\n        end,\n        stride,\n        false,\n        false\n      );\n      builderEnds.push(builderEnd);\n      offset = end;\n    }\n    return offset;\n  }\n\n  /**\n   * @param {import(\"../../geom/SimpleGeometry.js\").default} geometry Geometry.\n   * @param {import(\"../../Feature.js\").FeatureLike} feature Feature.\n   * @param {Function} renderer Renderer.\n   * @param {Function} hitDetectionRenderer Renderer.\n   */\n  drawCustom(geometry, feature, renderer, hitDetectionRenderer) {\n    this.beginGeometry(geometry, feature);\n\n    const type = geometry.getType();\n    const stride = geometry.getStride();\n    const builderBegin = this.coordinates.length;\n\n    let flatCoordinates, builderEnd, builderEnds, builderEndss;\n    let offset;\n\n    switch (type) {\n      case 'MultiPolygon':\n        flatCoordinates =\n          /** @type {import(\"../../geom/MultiPolygon.js\").default} */ (\n            geometry\n          ).getOrientedFlatCoordinates();\n        builderEndss = [];\n        const endss =\n          /** @type {import(\"../../geom/MultiPolygon.js\").default} */ (\n            geometry\n          ).getEndss();\n        offset = 0;\n        for (let i = 0, ii = endss.length; i < ii; ++i) {\n          const myEnds = [];\n          offset = this.drawCustomCoordinates_(\n            flatCoordinates,\n            offset,\n            endss[i],\n            stride,\n            myEnds\n          );\n          builderEndss.push(myEnds);\n        }\n        this.instructions.push([\n          CanvasInstruction.CUSTOM,\n          builderBegin,\n          builderEndss,\n          geometry,\n          renderer,\n          inflateMultiCoordinatesArray,\n        ]);\n        this.hitDetectionInstructions.push([\n          CanvasInstruction.CUSTOM,\n          builderBegin,\n          builderEndss,\n          geometry,\n          hitDetectionRenderer || renderer,\n          inflateMultiCoordinatesArray,\n        ]);\n        break;\n      case 'Polygon':\n      case 'MultiLineString':\n        builderEnds = [];\n        flatCoordinates =\n          type == 'Polygon'\n            ? /** @type {import(\"../../geom/Polygon.js\").default} */ (\n                geometry\n              ).getOrientedFlatCoordinates()\n            : geometry.getFlatCoordinates();\n        offset = this.drawCustomCoordinates_(\n          flatCoordinates,\n          0,\n          /** @type {import(\"../../geom/Polygon.js\").default|import(\"../../geom/MultiLineString.js\").default} */ (\n            geometry\n          ).getEnds(),\n          stride,\n          builderEnds\n        );\n        this.instructions.push([\n          CanvasInstruction.CUSTOM,\n          builderBegin,\n          builderEnds,\n          geometry,\n          renderer,\n          inflateCoordinatesArray,\n        ]);\n        this.hitDetectionInstructions.push([\n          CanvasInstruction.CUSTOM,\n          builderBegin,\n          builderEnds,\n          geometry,\n          hitDetectionRenderer || renderer,\n          inflateCoordinatesArray,\n        ]);\n        break;\n      case 'LineString':\n      case 'Circle':\n        flatCoordinates = geometry.getFlatCoordinates();\n        builderEnd = this.appendFlatLineCoordinates(\n          flatCoordinates,\n          0,\n          flatCoordinates.length,\n          stride,\n          false,\n          false\n        );\n        this.instructions.push([\n          CanvasInstruction.CUSTOM,\n          builderBegin,\n          builderEnd,\n          geometry,\n          renderer,\n          inflateCoordinates,\n        ]);\n        this.hitDetectionInstructions.push([\n          CanvasInstruction.CUSTOM,\n          builderBegin,\n          builderEnd,\n          geometry,\n          hitDetectionRenderer || renderer,\n          inflateCoordinates,\n        ]);\n        break;\n      case 'MultiPoint':\n        flatCoordinates = geometry.getFlatCoordinates();\n        builderEnd = this.appendFlatPointCoordinates(flatCoordinates, stride);\n\n        if (builderEnd > builderBegin) {\n          this.instructions.push([\n            CanvasInstruction.CUSTOM,\n            builderBegin,\n            builderEnd,\n            geometry,\n            renderer,\n            inflateCoordinates,\n          ]);\n          this.hitDetectionInstructions.push([\n            CanvasInstruction.CUSTOM,\n            builderBegin,\n            builderEnd,\n            geometry,\n            hitDetectionRenderer || renderer,\n            inflateCoordinates,\n          ]);\n        }\n        break;\n      case 'Point':\n        flatCoordinates = geometry.getFlatCoordinates();\n        this.coordinates.push(flatCoordinates[0], flatCoordinates[1]);\n        builderEnd = this.coordinates.length;\n\n        this.instructions.push([\n          CanvasInstruction.CUSTOM,\n          builderBegin,\n          builderEnd,\n          geometry,\n          renderer,\n        ]);\n        this.hitDetectionInstructions.push([\n          CanvasInstruction.CUSTOM,\n          builderBegin,\n          builderEnd,\n          geometry,\n          hitDetectionRenderer || renderer,\n        ]);\n        break;\n      default:\n    }\n    this.endGeometry(feature);\n  }\n\n  /**\n   * @protected\n   * @param {import(\"../../geom/Geometry\").default|import(\"../Feature.js\").default} geometry The geometry.\n   * @param {import(\"../../Feature.js\").FeatureLike} feature Feature.\n   */\n  beginGeometry(geometry, feature) {\n    this.beginGeometryInstruction1_ = [\n      CanvasInstruction.BEGIN_GEOMETRY,\n      feature,\n      0,\n      geometry,\n    ];\n    this.instructions.push(this.beginGeometryInstruction1_);\n    this.beginGeometryInstruction2_ = [\n      CanvasInstruction.BEGIN_GEOMETRY,\n      feature,\n      0,\n      geometry,\n    ];\n    this.hitDetectionInstructions.push(this.beginGeometryInstruction2_);\n  }\n\n  /**\n   * @return {import(\"../canvas.js\").SerializableInstructions} the serializable instructions.\n   */\n  finish() {\n    return {\n      instructions: this.instructions,\n      hitDetectionInstructions: this.hitDetectionInstructions,\n      coordinates: this.coordinates,\n    };\n  }\n\n  /**\n   * Reverse the hit detection instructions.\n   */\n  reverseHitDetectionInstructions() {\n    const hitDetectionInstructions = this.hitDetectionInstructions;\n    // step 1 - reverse array\n    hitDetectionInstructions.reverse();\n    // step 2 - reverse instructions within geometry blocks\n    let i;\n    const n = hitDetectionInstructions.length;\n    let instruction;\n    let type;\n    let begin = -1;\n    for (i = 0; i < n; ++i) {\n      instruction = hitDetectionInstructions[i];\n      type = /** @type {import(\"./Instruction.js\").default} */ (instruction[0]);\n      if (type == CanvasInstruction.END_GEOMETRY) {\n        begin = i;\n      } else if (type == CanvasInstruction.BEGIN_GEOMETRY) {\n        instruction[2] = i;\n        reverseSubArray(this.hitDetectionInstructions, begin, i);\n        begin = -1;\n      }\n    }\n  }\n\n  /**\n   * @param {import(\"../../style/Fill.js\").default} fillStyle Fill style.\n   * @param {import(\"../../style/Stroke.js\").default} strokeStyle Stroke style.\n   */\n  setFillStrokeStyle(fillStyle, strokeStyle) {\n    const state = this.state;\n    if (fillStyle) {\n      const fillStyleColor = fillStyle.getColor();\n      state.fillStyle = asColorLike(\n        fillStyleColor ? fillStyleColor : defaultFillStyle\n      );\n    } else {\n      state.fillStyle = undefined;\n    }\n    if (strokeStyle) {\n      const strokeStyleColor = strokeStyle.getColor();\n      state.strokeStyle = asColorLike(\n        strokeStyleColor ? strokeStyleColor : defaultStrokeStyle\n      );\n      const strokeStyleLineCap = strokeStyle.getLineCap();\n      state.lineCap =\n        strokeStyleLineCap !== undefined ? strokeStyleLineCap : defaultLineCap;\n      const strokeStyleLineDash = strokeStyle.getLineDash();\n      state.lineDash = strokeStyleLineDash\n        ? strokeStyleLineDash.slice()\n        : defaultLineDash;\n      const strokeStyleLineDashOffset = strokeStyle.getLineDashOffset();\n      state.lineDashOffset = strokeStyleLineDashOffset\n        ? strokeStyleLineDashOffset\n        : defaultLineDashOffset;\n      const strokeStyleLineJoin = strokeStyle.getLineJoin();\n      state.lineJoin =\n        strokeStyleLineJoin !== undefined\n          ? strokeStyleLineJoin\n          : defaultLineJoin;\n      const strokeStyleWidth = strokeStyle.getWidth();\n      state.lineWidth =\n        strokeStyleWidth !== undefined ? strokeStyleWidth : defaultLineWidth;\n      const strokeStyleMiterLimit = strokeStyle.getMiterLimit();\n      state.miterLimit =\n        strokeStyleMiterLimit !== undefined\n          ? strokeStyleMiterLimit\n          : defaultMiterLimit;\n\n      if (state.lineWidth > this.maxLineWidth) {\n        this.maxLineWidth = state.lineWidth;\n        // invalidate the buffered max extent cache\n        this.bufferedMaxExtent_ = null;\n      }\n    } else {\n      state.strokeStyle = undefined;\n      state.lineCap = undefined;\n      state.lineDash = null;\n      state.lineDashOffset = undefined;\n      state.lineJoin = undefined;\n      state.lineWidth = undefined;\n      state.miterLimit = undefined;\n    }\n  }\n\n  /**\n   * @param {import(\"../canvas.js\").FillStrokeState} state State.\n   * @return {Array<*>} Fill instruction.\n   */\n  createFill(state) {\n    const fillStyle = state.fillStyle;\n    /** @type {Array<*>} */\n    const fillInstruction = [CanvasInstruction.SET_FILL_STYLE, fillStyle];\n    if (typeof fillStyle !== 'string') {\n      // Fill is a pattern or gradient - align it!\n      fillInstruction.push(true);\n    }\n    return fillInstruction;\n  }\n\n  /**\n   * @param {import(\"../canvas.js\").FillStrokeState} state State.\n   */\n  applyStroke(state) {\n    this.instructions.push(this.createStroke(state));\n  }\n\n  /**\n   * @param {import(\"../canvas.js\").FillStrokeState} state State.\n   * @return {Array<*>} Stroke instruction.\n   */\n  createStroke(state) {\n    return [\n      CanvasInstruction.SET_STROKE_STYLE,\n      state.strokeStyle,\n      state.lineWidth * this.pixelRatio,\n      state.lineCap,\n      state.lineJoin,\n      state.miterLimit,\n      this.applyPixelRatio(state.lineDash),\n      state.lineDashOffset * this.pixelRatio,\n    ];\n  }\n\n  /**\n   * @param {import(\"../canvas.js\").FillStrokeState} state State.\n   * @param {function(this:CanvasBuilder, import(\"../canvas.js\").FillStrokeState):Array<*>} createFill Create fill.\n   */\n  updateFillStyle(state, createFill) {\n    const fillStyle = state.fillStyle;\n    if (typeof fillStyle !== 'string' || state.currentFillStyle != fillStyle) {\n      if (fillStyle !== undefined) {\n        this.instructions.push(createFill.call(this, state));\n      }\n      state.currentFillStyle = fillStyle;\n    }\n  }\n\n  /**\n   * @param {import(\"../canvas.js\").FillStrokeState} state State.\n   * @param {function(this:CanvasBuilder, import(\"../canvas.js\").FillStrokeState): void} applyStroke Apply stroke.\n   */\n  updateStrokeStyle(state, applyStroke) {\n    const strokeStyle = state.strokeStyle;\n    const lineCap = state.lineCap;\n    const lineDash = state.lineDash;\n    const lineDashOffset = state.lineDashOffset;\n    const lineJoin = state.lineJoin;\n    const lineWidth = state.lineWidth;\n    const miterLimit = state.miterLimit;\n    if (\n      state.currentStrokeStyle != strokeStyle ||\n      state.currentLineCap != lineCap ||\n      (lineDash != state.currentLineDash &&\n        !equals(state.currentLineDash, lineDash)) ||\n      state.currentLineDashOffset != lineDashOffset ||\n      state.currentLineJoin != lineJoin ||\n      state.currentLineWidth != lineWidth ||\n      state.currentMiterLimit != miterLimit\n    ) {\n      if (strokeStyle !== undefined) {\n        applyStroke.call(this, state);\n      }\n      state.currentStrokeStyle = strokeStyle;\n      state.currentLineCap = lineCap;\n      state.currentLineDash = lineDash;\n      state.currentLineDashOffset = lineDashOffset;\n      state.currentLineJoin = lineJoin;\n      state.currentLineWidth = lineWidth;\n      state.currentMiterLimit = miterLimit;\n    }\n  }\n\n  /**\n   * @param {import(\"../../Feature.js\").FeatureLike} feature Feature.\n   */\n  endGeometry(feature) {\n    this.beginGeometryInstruction1_[2] = this.instructions.length;\n    this.beginGeometryInstruction1_ = null;\n    this.beginGeometryInstruction2_[2] = this.hitDetectionInstructions.length;\n    this.beginGeometryInstruction2_ = null;\n    const endGeometryInstruction = [CanvasInstruction.END_GEOMETRY, feature];\n    this.instructions.push(endGeometryInstruction);\n    this.hitDetectionInstructions.push(endGeometryInstruction);\n  }\n\n  /**\n   * Get the buffered rendering extent.  Rendering will be clipped to the extent\n   * provided to the constructor.  To account for symbolizers that may intersect\n   * this extent, we calculate a buffered extent (e.g. based on stroke width).\n   * @return {import(\"../../extent.js\").Extent} The buffered rendering extent.\n   * @protected\n   */\n  getBufferedMaxExtent() {\n    if (!this.bufferedMaxExtent_) {\n      this.bufferedMaxExtent_ = clone(this.maxExtent);\n      if (this.maxLineWidth > 0) {\n        const width = (this.resolution * (this.maxLineWidth + 1)) / 2;\n        buffer(this.bufferedMaxExtent_, width, this.bufferedMaxExtent_);\n      }\n    }\n    return this.bufferedMaxExtent_;\n  }\n}\n\nexport default CanvasBuilder;\n","/**\n * @module ol/render/canvas/BuilderGroup\n */\n\nimport Builder from './Builder.js';\nimport ImageBuilder from './ImageBuilder.js';\nimport LineStringBuilder from './LineStringBuilder.js';\nimport PolygonBuilder from './PolygonBuilder.js';\nimport TextBuilder from './TextBuilder.js';\n\n/**\n * @type {Object<import(\"../canvas.js\").BuilderType, typeof Builder>}\n */\nconst BATCH_CONSTRUCTORS = {\n  'Circle': PolygonBuilder,\n  'Default': Builder,\n  'Image': ImageBuilder,\n  'LineString': LineStringBuilder,\n  'Polygon': PolygonBuilder,\n  'Text': TextBuilder,\n};\n\nclass BuilderGroup {\n  /**\n   * @param {number} tolerance Tolerance.\n   * @param {import(\"../../extent.js\").Extent} maxExtent Max extent.\n   * @param {number} resolution Resolution.\n   * @param {number} pixelRatio Pixel ratio.\n   */\n  constructor(tolerance, maxExtent, resolution, pixelRatio) {\n    /**\n     * @private\n     * @type {number}\n     */\n    this.tolerance_ = tolerance;\n\n    /**\n     * @private\n     * @type {import(\"../../extent.js\").Extent}\n     */\n    this.maxExtent_ = maxExtent;\n\n    /**\n     * @private\n     * @type {number}\n     */\n    this.pixelRatio_ = pixelRatio;\n\n    /**\n     * @private\n     * @type {number}\n     */\n    this.resolution_ = resolution;\n\n    /**\n     * @private\n     * @type {!Object<string, !Object<import(\"../canvas.js\").BuilderType, Builder>>}\n     */\n    this.buildersByZIndex_ = {};\n  }\n\n  /**\n   * @return {!Object<string, !Object<import(\"../canvas.js\").BuilderType, import(\"./Builder.js\").SerializableInstructions>>} The serializable instructions\n   */\n  finish() {\n    const builderInstructions = {};\n    for (const zKey in this.buildersByZIndex_) {\n      builderInstructions[zKey] = builderInstructions[zKey] || {};\n      const builders = this.buildersByZIndex_[zKey];\n      for (const builderKey in builders) {\n        const builderInstruction = builders[builderKey].finish();\n        builderInstructions[zKey][builderKey] = builderInstruction;\n      }\n    }\n    return builderInstructions;\n  }\n\n  /**\n   * @param {number|undefined} zIndex Z index.\n   * @param {import(\"../canvas.js\").BuilderType} builderType Replay type.\n   * @return {import(\"../VectorContext.js\").default} Replay.\n   */\n  getBuilder(zIndex, builderType) {\n    const zIndexKey = zIndex !== undefined ? zIndex.toString() : '0';\n    let replays = this.buildersByZIndex_[zIndexKey];\n    if (replays === undefined) {\n      replays = {};\n      this.buildersByZIndex_[zIndexKey] = replays;\n    }\n    let replay = replays[builderType];\n    if (replay === undefined) {\n      const Constructor = BATCH_CONSTRUCTORS[builderType];\n      replay = new Constructor(\n        this.tolerance_,\n        this.maxExtent_,\n        this.resolution_,\n        this.pixelRatio_\n      );\n      replays[builderType] = replay;\n    }\n    return replay;\n  }\n}\n\nexport default BuilderGroup;\n","/**\n * @module ol/render/canvas/Executor\n */\nimport CanvasInstruction from './Instruction.js';\nimport {TEXT_ALIGN} from './TextBuilder.js';\nimport {\n  apply as applyTransform,\n  compose as composeTransform,\n  create as createTransform,\n  setFromArray as transformSetFromArray,\n} from '../../transform.js';\nimport {createEmpty, createOrUpdate, intersects} from '../../extent.js';\nimport {\n  defaultPadding,\n  defaultTextAlign,\n  defaultTextBaseline,\n  drawImageOrLabel,\n  getTextDimensions,\n  measureAndCacheTextWidth,\n} from '../canvas.js';\nimport {drawTextOnPath} from '../../geom/flat/textpath.js';\nimport {equals} from '../../array.js';\nimport {lineStringLength} from '../../geom/flat/length.js';\nimport {transform2D} from '../../geom/flat/transform.js';\n\n/**\n * @typedef {Object} BBox\n * @property {number} minX Minimal x.\n * @property {number} minY Minimal y.\n * @property {number} maxX Maximal x.\n * @property {number} maxY Maximal y\n * @property {*} value Value.\n */\n\n/**\n * @typedef {Object} ImageOrLabelDimensions\n * @property {number} drawImageX DrawImageX.\n * @property {number} drawImageY DrawImageY.\n * @property {number} drawImageW DrawImageW.\n * @property {number} drawImageH DrawImageH.\n * @property {number} originX OriginX.\n * @property {number} originY OriginY.\n * @property {Array<number>} scale Scale.\n * @property {BBox} declutterBox DeclutterBox.\n * @property {import(\"../../transform.js\").Transform} canvasTransform CanvasTransform.\n */\n\n/**\n * @typedef {{0: CanvasRenderingContext2D, 1: number, 2: import(\"../canvas.js\").Label|HTMLImageElement|HTMLCanvasElement|HTMLVideoElement, 3: ImageOrLabelDimensions, 4: number, 5: Array<*>, 6: Array<*>}} ReplayImageOrLabelArgs\n */\n\n/**\n * @template T\n * @typedef {function(import(\"../../Feature.js\").FeatureLike, import(\"../../geom/SimpleGeometry.js\").default): T} FeatureCallback\n */\n\n/**\n * @type {import(\"../../extent.js\").Extent}\n */\nconst tmpExtent = createEmpty();\n\n/** @type {import(\"../../coordinate.js\").Coordinate} */\nconst p1 = [];\n/** @type {import(\"../../coordinate.js\").Coordinate} */\nconst p2 = [];\n/** @type {import(\"../../coordinate.js\").Coordinate} */\nconst p3 = [];\n/** @type {import(\"../../coordinate.js\").Coordinate} */\nconst p4 = [];\n\n/**\n * @param {ReplayImageOrLabelArgs} replayImageOrLabelArgs Arguments to replayImageOrLabel\n * @return {BBox} Declutter bbox.\n */\nfunction getDeclutterBox(replayImageOrLabelArgs) {\n  return replayImageOrLabelArgs[3].declutterBox;\n}\n\nconst rtlRegEx = new RegExp(\n  /* eslint-disable prettier/prettier */\n  '[' +\n    String.fromCharCode(0x00591) + '-' + String.fromCharCode(0x008ff) +\n    String.fromCharCode(0x0fb1d) + '-' + String.fromCharCode(0x0fdff) +\n    String.fromCharCode(0x0fe70) + '-' + String.fromCharCode(0x0fefc) +\n    String.fromCharCode(0x10800) + '-' + String.fromCharCode(0x10fff) +\n    String.fromCharCode(0x1e800) + '-' + String.fromCharCode(0x1efff) +\n  ']'\n  /* eslint-enable prettier/prettier */\n);\n\n/**\n * @param {string} text Text.\n * @param {CanvasTextAlign} align Alignment.\n * @return {number} Text alignment.\n */\nfunction horizontalTextAlign(text, align) {\n  if (align === 'start') {\n    align = rtlRegEx.test(text) ? 'right' : 'left';\n  } else if (align === 'end') {\n    align = rtlRegEx.test(text) ? 'left' : 'right';\n  }\n  return TEXT_ALIGN[align];\n}\n\n/**\n * @param {Array<string>} acc Accumulator.\n * @param {string} line Line of text.\n * @param {number} i Index\n * @return {Array<string>} Accumulator.\n */\nfunction createTextChunks(acc, line, i) {\n  if (i > 0) {\n    acc.push('\\n', '');\n  }\n  acc.push(line, '');\n  return acc;\n}\n\nclass Executor {\n  /**\n   * @param {number} resolution Resolution.\n   * @param {number} pixelRatio Pixel ratio.\n   * @param {boolean} overlaps The replay can have overlapping geometries.\n   * @param {import(\"../canvas.js\").SerializableInstructions} instructions The serializable instructions\n   */\n  constructor(resolution, pixelRatio, overlaps, instructions) {\n    /**\n     * @protected\n     * @type {boolean}\n     */\n    this.overlaps = overlaps;\n\n    /**\n     * @protected\n     * @type {number}\n     */\n    this.pixelRatio = pixelRatio;\n\n    /**\n     * @protected\n     * @const\n     * @type {number}\n     */\n    this.resolution = resolution;\n\n    /**\n     * @private\n     * @type {boolean}\n     */\n    this.alignFill_;\n\n    /**\n     * @protected\n     * @type {Array<*>}\n     */\n    this.instructions = instructions.instructions;\n\n    /**\n     * @protected\n     * @type {Array<number>}\n     */\n    this.coordinates = instructions.coordinates;\n\n    /**\n     * @private\n     * @type {!Object<number,import(\"../../coordinate.js\").Coordinate|Array<import(\"../../coordinate.js\").Coordinate>|Array<Array<import(\"../../coordinate.js\").Coordinate>>>}\n     */\n    this.coordinateCache_ = {};\n\n    /**\n     * @private\n     * @type {!import(\"../../transform.js\").Transform}\n     */\n    this.renderedTransform_ = createTransform();\n\n    /**\n     * @protected\n     * @type {Array<*>}\n     */\n    this.hitDetectionInstructions = instructions.hitDetectionInstructions;\n\n    /**\n     * @private\n     * @type {Array<number>}\n     */\n    this.pixelCoordinates_ = null;\n\n    /**\n     * @private\n     * @type {number}\n     */\n    this.viewRotation_ = 0;\n\n    /**\n     * @type {!Object<string, import(\"../canvas.js\").FillState>}\n     */\n    this.fillStates = instructions.fillStates || {};\n\n    /**\n     * @type {!Object<string, import(\"../canvas.js\").StrokeState>}\n     */\n    this.strokeStates = instructions.strokeStates || {};\n\n    /**\n     * @type {!Object<string, import(\"../canvas.js\").TextState>}\n     */\n    this.textStates = instructions.textStates || {};\n\n    /**\n     * @private\n     * @type {Object<string, Object<string, number>>}\n     */\n    this.widths_ = {};\n\n    /**\n     * @private\n     * @type {Object<string, import(\"../canvas.js\").Label>}\n     */\n    this.labels_ = {};\n  }\n\n  /**\n   * @param {string|Array<string>} text Text.\n   * @param {string} textKey Text style key.\n   * @param {string} fillKey Fill style key.\n   * @param {string} strokeKey Stroke style key.\n   * @return {import(\"../canvas.js\").Label} Label.\n   */\n  createLabel(text, textKey, fillKey, strokeKey) {\n    const key = text + textKey + fillKey + strokeKey;\n    if (this.labels_[key]) {\n      return this.labels_[key];\n    }\n    const strokeState = strokeKey ? this.strokeStates[strokeKey] : null;\n    const fillState = fillKey ? this.fillStates[fillKey] : null;\n    const textState = this.textStates[textKey];\n    const pixelRatio = this.pixelRatio;\n    const scale = [\n      textState.scale[0] * pixelRatio,\n      textState.scale[1] * pixelRatio,\n    ];\n    const textIsArray = Array.isArray(text);\n    const align = textState.justify\n      ? TEXT_ALIGN[textState.justify]\n      : horizontalTextAlign(\n          Array.isArray(text) ? text[0] : text,\n          textState.textAlign || defaultTextAlign\n        );\n    const strokeWidth =\n      strokeKey && strokeState.lineWidth ? strokeState.lineWidth : 0;\n\n    const chunks = textIsArray\n      ? text\n      : text.split('\\n').reduce(createTextChunks, []);\n\n    const {width, height, widths, heights, lineWidths} = getTextDimensions(\n      textState,\n      chunks\n    );\n    const renderWidth = width + strokeWidth;\n    const contextInstructions = [];\n    // make canvas 2 pixels wider to account for italic text width measurement errors\n    const w = (renderWidth + 2) * scale[0];\n    const h = (height + strokeWidth) * scale[1];\n    /** @type {import(\"../canvas.js\").Label} */\n    const label = {\n      width: w < 0 ? Math.floor(w) : Math.ceil(w),\n      height: h < 0 ? Math.floor(h) : Math.ceil(h),\n      contextInstructions: contextInstructions,\n    };\n    if (scale[0] != 1 || scale[1] != 1) {\n      contextInstructions.push('scale', scale);\n    }\n    if (strokeKey) {\n      contextInstructions.push('strokeStyle', strokeState.strokeStyle);\n      contextInstructions.push('lineWidth', strokeWidth);\n      contextInstructions.push('lineCap', strokeState.lineCap);\n      contextInstructions.push('lineJoin', strokeState.lineJoin);\n      contextInstructions.push('miterLimit', strokeState.miterLimit);\n      contextInstructions.push('setLineDash', [strokeState.lineDash]);\n      contextInstructions.push('lineDashOffset', strokeState.lineDashOffset);\n    }\n    if (fillKey) {\n      contextInstructions.push('fillStyle', fillState.fillStyle);\n    }\n    contextInstructions.push('textBaseline', 'middle');\n    contextInstructions.push('textAlign', 'center');\n    const leftRight = 0.5 - align;\n    let x = align * renderWidth + leftRight * strokeWidth;\n    const strokeInstructions = [];\n    const fillInstructions = [];\n    let lineHeight = 0;\n    let lineOffset = 0;\n    let widthHeightIndex = 0;\n    let lineWidthIndex = 0;\n    let previousFont;\n    for (let i = 0, ii = chunks.length; i < ii; i += 2) {\n      const text = chunks[i];\n      if (text === '\\n') {\n        lineOffset += lineHeight;\n        lineHeight = 0;\n        x = align * renderWidth + leftRight * strokeWidth;\n        ++lineWidthIndex;\n        continue;\n      }\n      const font = chunks[i + 1] || textState.font;\n      if (font !== previousFont) {\n        if (strokeKey) {\n          strokeInstructions.push('font', font);\n        }\n        if (fillKey) {\n          fillInstructions.push('font', font);\n        }\n        previousFont = font;\n      }\n      lineHeight = Math.max(lineHeight, heights[widthHeightIndex]);\n      const fillStrokeArgs = [\n        text,\n        x +\n          leftRight * widths[widthHeightIndex] +\n          align * (widths[widthHeightIndex] - lineWidths[lineWidthIndex]),\n        0.5 * (strokeWidth + lineHeight) + lineOffset,\n      ];\n      x += widths[widthHeightIndex];\n      if (strokeKey) {\n        strokeInstructions.push('strokeText', fillStrokeArgs);\n      }\n      if (fillKey) {\n        fillInstructions.push('fillText', fillStrokeArgs);\n      }\n      ++widthHeightIndex;\n    }\n    Array.prototype.push.apply(contextInstructions, strokeInstructions);\n    Array.prototype.push.apply(contextInstructions, fillInstructions);\n    this.labels_[key] = label;\n    return label;\n  }\n\n  /**\n   * @param {CanvasRenderingContext2D} context Context.\n   * @param {import(\"../../coordinate.js\").Coordinate} p1 1st point of the background box.\n   * @param {import(\"../../coordinate.js\").Coordinate} p2 2nd point of the background box.\n   * @param {import(\"../../coordinate.js\").Coordinate} p3 3rd point of the background box.\n   * @param {import(\"../../coordinate.js\").Coordinate} p4 4th point of the background box.\n   * @param {Array<*>} fillInstruction Fill instruction.\n   * @param {Array<*>} strokeInstruction Stroke instruction.\n   */\n  replayTextBackground_(\n    context,\n    p1,\n    p2,\n    p3,\n    p4,\n    fillInstruction,\n    strokeInstruction\n  ) {\n    context.beginPath();\n    context.moveTo.apply(context, p1);\n    context.lineTo.apply(context, p2);\n    context.lineTo.apply(context, p3);\n    context.lineTo.apply(context, p4);\n    context.lineTo.apply(context, p1);\n    if (fillInstruction) {\n      this.alignFill_ = /** @type {boolean} */ (fillInstruction[2]);\n      this.fill_(context);\n    }\n    if (strokeInstruction) {\n      this.setStrokeStyle_(\n        context,\n        /** @type {Array<*>} */ (strokeInstruction)\n      );\n      context.stroke();\n    }\n  }\n\n  /**\n   * @private\n   * @param {number} sheetWidth Width of the sprite sheet.\n   * @param {number} sheetHeight Height of the sprite sheet.\n   * @param {number} centerX X.\n   * @param {number} centerY Y.\n   * @param {number} width Width.\n   * @param {number} height Height.\n   * @param {number} anchorX Anchor X.\n   * @param {number} anchorY Anchor Y.\n   * @param {number} originX Origin X.\n   * @param {number} originY Origin Y.\n   * @param {number} rotation Rotation.\n   * @param {import(\"../../size.js\").Size} scale Scale.\n   * @param {boolean} snapToPixel Snap to pixel.\n   * @param {Array<number>} padding Padding.\n   * @param {boolean} fillStroke Background fill or stroke.\n   * @param {import(\"../../Feature.js\").FeatureLike} feature Feature.\n   * @return {ImageOrLabelDimensions} Dimensions for positioning and decluttering the image or label.\n   */\n  calculateImageOrLabelDimensions_(\n    sheetWidth,\n    sheetHeight,\n    centerX,\n    centerY,\n    width,\n    height,\n    anchorX,\n    anchorY,\n    originX,\n    originY,\n    rotation,\n    scale,\n    snapToPixel,\n    padding,\n    fillStroke,\n    feature\n  ) {\n    anchorX *= scale[0];\n    anchorY *= scale[1];\n    let x = centerX - anchorX;\n    let y = centerY - anchorY;\n\n    const w = width + originX > sheetWidth ? sheetWidth - originX : width;\n    const h = height + originY > sheetHeight ? sheetHeight - originY : height;\n    const boxW = padding[3] + w * scale[0] + padding[1];\n    const boxH = padding[0] + h * scale[1] + padding[2];\n    const boxX = x - padding[3];\n    const boxY = y - padding[0];\n\n    if (fillStroke || rotation !== 0) {\n      p1[0] = boxX;\n      p4[0] = boxX;\n      p1[1] = boxY;\n      p2[1] = boxY;\n      p2[0] = boxX + boxW;\n      p3[0] = p2[0];\n      p3[1] = boxY + boxH;\n      p4[1] = p3[1];\n    }\n\n    let transform;\n    if (rotation !== 0) {\n      transform = composeTransform(\n        createTransform(),\n        centerX,\n        centerY,\n        1,\n        1,\n        rotation,\n        -centerX,\n        -centerY\n      );\n\n      applyTransform(transform, p1);\n      applyTransform(transform, p2);\n      applyTransform(transform, p3);\n      applyTransform(transform, p4);\n      createOrUpdate(\n        Math.min(p1[0], p2[0], p3[0], p4[0]),\n        Math.min(p1[1], p2[1], p3[1], p4[1]),\n        Math.max(p1[0], p2[0], p3[0], p4[0]),\n        Math.max(p1[1], p2[1], p3[1], p4[1]),\n        tmpExtent\n      );\n    } else {\n      createOrUpdate(\n        Math.min(boxX, boxX + boxW),\n        Math.min(boxY, boxY + boxH),\n        Math.max(boxX, boxX + boxW),\n        Math.max(boxY, boxY + boxH),\n        tmpExtent\n      );\n    }\n    if (snapToPixel) {\n      x = Math.round(x);\n      y = Math.round(y);\n    }\n    return {\n      drawImageX: x,\n      drawImageY: y,\n      drawImageW: w,\n      drawImageH: h,\n      originX: originX,\n      originY: originY,\n      declutterBox: {\n        minX: tmpExtent[0],\n        minY: tmpExtent[1],\n        maxX: tmpExtent[2],\n        maxY: tmpExtent[3],\n        value: feature,\n      },\n      canvasTransform: transform,\n      scale: scale,\n    };\n  }\n\n  /**\n   * @private\n   * @param {CanvasRenderingContext2D} context Context.\n   * @param {number} contextScale Scale of the context.\n   * @param {import(\"../canvas.js\").Label|HTMLImageElement|HTMLCanvasElement|HTMLVideoElement} imageOrLabel Image.\n   * @param {ImageOrLabelDimensions} dimensions Dimensions.\n   * @param {number} opacity Opacity.\n   * @param {Array<*>} fillInstruction Fill instruction.\n   * @param {Array<*>} strokeInstruction Stroke instruction.\n   * @return {boolean} The image or label was rendered.\n   */\n  replayImageOrLabel_(\n    context,\n    contextScale,\n    imageOrLabel,\n    dimensions,\n    opacity,\n    fillInstruction,\n    strokeInstruction\n  ) {\n    const fillStroke = !!(fillInstruction || strokeInstruction);\n\n    const box = dimensions.declutterBox;\n    const canvas = context.canvas;\n    const strokePadding = strokeInstruction\n      ? (strokeInstruction[2] * dimensions.scale[0]) / 2\n      : 0;\n    const intersects =\n      box.minX - strokePadding <= canvas.width / contextScale &&\n      box.maxX + strokePadding >= 0 &&\n      box.minY - strokePadding <= canvas.height / contextScale &&\n      box.maxY + strokePadding >= 0;\n\n    if (intersects) {\n      if (fillStroke) {\n        this.replayTextBackground_(\n          context,\n          p1,\n          p2,\n          p3,\n          p4,\n          /** @type {Array<*>} */ (fillInstruction),\n          /** @type {Array<*>} */ (strokeInstruction)\n        );\n      }\n      drawImageOrLabel(\n        context,\n        dimensions.canvasTransform,\n        opacity,\n        imageOrLabel,\n        dimensions.originX,\n        dimensions.originY,\n        dimensions.drawImageW,\n        dimensions.drawImageH,\n        dimensions.drawImageX,\n        dimensions.drawImageY,\n        dimensions.scale\n      );\n    }\n    return true;\n  }\n\n  /**\n   * @private\n   * @param {CanvasRenderingContext2D} context Context.\n   */\n  fill_(context) {\n    if (this.alignFill_) {\n      const origin = applyTransform(this.renderedTransform_, [0, 0]);\n      const repeatSize = 512 * this.pixelRatio;\n      context.save();\n      context.translate(origin[0] % repeatSize, origin[1] % repeatSize);\n      context.rotate(this.viewRotation_);\n    }\n    context.fill();\n    if (this.alignFill_) {\n      context.restore();\n    }\n  }\n\n  /**\n   * @private\n   * @param {CanvasRenderingContext2D} context Context.\n   * @param {Array<*>} instruction Instruction.\n   */\n  setStrokeStyle_(context, instruction) {\n    context['strokeStyle'] =\n      /** @type {import(\"../../colorlike.js\").ColorLike} */ (instruction[1]);\n    context.lineWidth = /** @type {number} */ (instruction[2]);\n    context.lineCap = /** @type {CanvasLineCap} */ (instruction[3]);\n    context.lineJoin = /** @type {CanvasLineJoin} */ (instruction[4]);\n    context.miterLimit = /** @type {number} */ (instruction[5]);\n    context.lineDashOffset = /** @type {number} */ (instruction[7]);\n    context.setLineDash(/** @type {Array<number>} */ (instruction[6]));\n  }\n\n  /**\n   * @private\n   * @param {string|Array<string>} text The text to draw.\n   * @param {string} textKey The key of the text state.\n   * @param {string} strokeKey The key for the stroke state.\n   * @param {string} fillKey The key for the fill state.\n   * @return {{label: import(\"../canvas.js\").Label, anchorX: number, anchorY: number}} The text image and its anchor.\n   */\n  drawLabelWithPointPlacement_(text, textKey, strokeKey, fillKey) {\n    const textState = this.textStates[textKey];\n\n    const label = this.createLabel(text, textKey, fillKey, strokeKey);\n\n    const strokeState = this.strokeStates[strokeKey];\n    const pixelRatio = this.pixelRatio;\n    const align = horizontalTextAlign(\n      Array.isArray(text) ? text[0] : text,\n      textState.textAlign || defaultTextAlign\n    );\n    const baseline = TEXT_ALIGN[textState.textBaseline || defaultTextBaseline];\n    const strokeWidth =\n      strokeState && strokeState.lineWidth ? strokeState.lineWidth : 0;\n\n    // Remove the 2 pixels we added in createLabel() for the anchor\n    const width = label.width / pixelRatio - 2 * textState.scale[0];\n    const anchorX = align * width + 2 * (0.5 - align) * strokeWidth;\n    const anchorY =\n      (baseline * label.height) / pixelRatio +\n      2 * (0.5 - baseline) * strokeWidth;\n\n    return {\n      label: label,\n      anchorX: anchorX,\n      anchorY: anchorY,\n    };\n  }\n\n  /**\n   * @private\n   * @param {CanvasRenderingContext2D} context Context.\n   * @param {number} contextScale Scale of the context.\n   * @param {import(\"../../transform.js\").Transform} transform Transform.\n   * @param {Array<*>} instructions Instructions array.\n   * @param {boolean} snapToPixel Snap point symbols and text to integer pixels.\n   * @param {FeatureCallback<T>} [featureCallback] Feature callback.\n   * @param {import(\"../../extent.js\").Extent} [hitExtent] Only check\n   *     features that intersect this extent.\n   * @param {import(\"rbush\").default} [declutterTree] Declutter tree.\n   * @return {T|undefined} Callback result.\n   * @template T\n   */\n  execute_(\n    context,\n    contextScale,\n    transform,\n    instructions,\n    snapToPixel,\n    featureCallback,\n    hitExtent,\n    declutterTree\n  ) {\n    /** @type {Array<number>} */\n    let pixelCoordinates;\n    if (this.pixelCoordinates_ && equals(transform, this.renderedTransform_)) {\n      pixelCoordinates = this.pixelCoordinates_;\n    } else {\n      if (!this.pixelCoordinates_) {\n        this.pixelCoordinates_ = [];\n      }\n      pixelCoordinates = transform2D(\n        this.coordinates,\n        0,\n        this.coordinates.length,\n        2,\n        transform,\n        this.pixelCoordinates_\n      );\n      transformSetFromArray(this.renderedTransform_, transform);\n    }\n    let i = 0; // instruction index\n    const ii = instructions.length; // end of instructions\n    let d = 0; // data index\n    let dd; // end of per-instruction data\n    let anchorX,\n      anchorY,\n      prevX,\n      prevY,\n      roundX,\n      roundY,\n      image,\n      text,\n      textKey,\n      strokeKey,\n      fillKey;\n    let pendingFill = 0;\n    let pendingStroke = 0;\n    let lastFillInstruction = null;\n    let lastStrokeInstruction = null;\n    const coordinateCache = this.coordinateCache_;\n    const viewRotation = this.viewRotation_;\n    const viewRotationFromTransform =\n      Math.round(Math.atan2(-transform[1], transform[0]) * 1e12) / 1e12;\n\n    const state = /** @type {import(\"../../render.js\").State} */ ({\n      context: context,\n      pixelRatio: this.pixelRatio,\n      resolution: this.resolution,\n      rotation: viewRotation,\n    });\n\n    // When the batch size gets too big, performance decreases. 200 is a good\n    // balance between batch size and number of fill/stroke instructions.\n    const batchSize =\n      this.instructions != instructions || this.overlaps ? 0 : 200;\n    let /** @type {import(\"../../Feature.js\").FeatureLike} */ feature;\n    let x, y, currentGeometry;\n    while (i < ii) {\n      const instruction = instructions[i];\n      const type = /** @type {import(\"./Instruction.js\").default} */ (\n        instruction[0]\n      );\n      switch (type) {\n        case CanvasInstruction.BEGIN_GEOMETRY:\n          feature = /** @type {import(\"../../Feature.js\").FeatureLike} */ (\n            instruction[1]\n          );\n          currentGeometry = instruction[3];\n          if (!feature.getGeometry()) {\n            i = /** @type {number} */ (instruction[2]);\n          } else if (\n            hitExtent !== undefined &&\n            !intersects(hitExtent, currentGeometry.getExtent())\n          ) {\n            i = /** @type {number} */ (instruction[2]) + 1;\n          } else {\n            ++i;\n          }\n          break;\n        case CanvasInstruction.BEGIN_PATH:\n          if (pendingFill > batchSize) {\n            this.fill_(context);\n            pendingFill = 0;\n          }\n          if (pendingStroke > batchSize) {\n            context.stroke();\n            pendingStroke = 0;\n          }\n          if (!pendingFill && !pendingStroke) {\n            context.beginPath();\n            prevX = NaN;\n            prevY = NaN;\n          }\n          ++i;\n          break;\n        case CanvasInstruction.CIRCLE:\n          d = /** @type {number} */ (instruction[1]);\n          const x1 = pixelCoordinates[d];\n          const y1 = pixelCoordinates[d + 1];\n          const x2 = pixelCoordinates[d + 2];\n          const y2 = pixelCoordinates[d + 3];\n          const dx = x2 - x1;\n          const dy = y2 - y1;\n          const r = Math.sqrt(dx * dx + dy * dy);\n          context.moveTo(x1 + r, y1);\n          context.arc(x1, y1, r, 0, 2 * Math.PI, true);\n          ++i;\n          break;\n        case CanvasInstruction.CLOSE_PATH:\n          context.closePath();\n          ++i;\n          break;\n        case CanvasInstruction.CUSTOM:\n          d = /** @type {number} */ (instruction[1]);\n          dd = instruction[2];\n          const geometry =\n            /** @type {import(\"../../geom/SimpleGeometry.js\").default} */ (\n              instruction[3]\n            );\n          const renderer = instruction[4];\n          const fn = instruction.length == 6 ? instruction[5] : undefined;\n          state.geometry = geometry;\n          state.feature = feature;\n          if (!(i in coordinateCache)) {\n            coordinateCache[i] = [];\n          }\n          const coords = coordinateCache[i];\n          if (fn) {\n            fn(pixelCoordinates, d, dd, 2, coords);\n          } else {\n            coords[0] = pixelCoordinates[d];\n            coords[1] = pixelCoordinates[d + 1];\n            coords.length = 2;\n          }\n          renderer(coords, state);\n          ++i;\n          break;\n        case CanvasInstruction.DRAW_IMAGE:\n          d = /** @type {number} */ (instruction[1]);\n          dd = /** @type {number} */ (instruction[2]);\n          image =\n            /** @type {HTMLCanvasElement|HTMLVideoElement|HTMLImageElement} */ (\n              instruction[3]\n            );\n\n          // Remaining arguments in DRAW_IMAGE are in alphabetical order\n          anchorX = /** @type {number} */ (instruction[4]);\n          anchorY = /** @type {number} */ (instruction[5]);\n          let height = /** @type {number} */ (instruction[6]);\n          const opacity = /** @type {number} */ (instruction[7]);\n          const originX = /** @type {number} */ (instruction[8]);\n          const originY = /** @type {number} */ (instruction[9]);\n          const rotateWithView = /** @type {boolean} */ (instruction[10]);\n          let rotation = /** @type {number} */ (instruction[11]);\n          const scale = /** @type {import(\"../../size.js\").Size} */ (\n            instruction[12]\n          );\n          let width = /** @type {number} */ (instruction[13]);\n          const declutterMode =\n            /** @type {\"declutter\"|\"obstacle\"|\"none\"|undefined} */ (\n              instruction[14]\n            );\n          const declutterImageWithText =\n            /** @type {import(\"../canvas.js\").DeclutterImageWithText} */ (\n              instruction[15]\n            );\n\n          if (!image && instruction.length >= 20) {\n            // create label images\n            text = /** @type {string} */ (instruction[19]);\n            textKey = /** @type {string} */ (instruction[20]);\n            strokeKey = /** @type {string} */ (instruction[21]);\n            fillKey = /** @type {string} */ (instruction[22]);\n            const labelWithAnchor = this.drawLabelWithPointPlacement_(\n              text,\n              textKey,\n              strokeKey,\n              fillKey\n            );\n            image = labelWithAnchor.label;\n            instruction[3] = image;\n            const textOffsetX = /** @type {number} */ (instruction[23]);\n            anchorX = (labelWithAnchor.anchorX - textOffsetX) * this.pixelRatio;\n            instruction[4] = anchorX;\n            const textOffsetY = /** @type {number} */ (instruction[24]);\n            anchorY = (labelWithAnchor.anchorY - textOffsetY) * this.pixelRatio;\n            instruction[5] = anchorY;\n            height = image.height;\n            instruction[6] = height;\n            width = image.width;\n            instruction[13] = width;\n          }\n\n          let geometryWidths;\n          if (instruction.length > 25) {\n            geometryWidths = /** @type {number} */ (instruction[25]);\n          }\n\n          let padding, backgroundFill, backgroundStroke;\n          if (instruction.length > 17) {\n            padding = /** @type {Array<number>} */ (instruction[16]);\n            backgroundFill = /** @type {boolean} */ (instruction[17]);\n            backgroundStroke = /** @type {boolean} */ (instruction[18]);\n          } else {\n            padding = defaultPadding;\n            backgroundFill = false;\n            backgroundStroke = false;\n          }\n\n          if (rotateWithView && viewRotationFromTransform) {\n            // Canvas is expected to be rotated to reverse view rotation.\n            rotation += viewRotation;\n          } else if (!rotateWithView && !viewRotationFromTransform) {\n            // Canvas is not rotated, images need to be rotated back to be north-up.\n            rotation -= viewRotation;\n          }\n          let widthIndex = 0;\n          for (; d < dd; d += 2) {\n            if (\n              geometryWidths &&\n              geometryWidths[widthIndex++] < width / this.pixelRatio\n            ) {\n              continue;\n            }\n            const dimensions = this.calculateImageOrLabelDimensions_(\n              image.width,\n              image.height,\n              pixelCoordinates[d],\n              pixelCoordinates[d + 1],\n              width,\n              height,\n              anchorX,\n              anchorY,\n              originX,\n              originY,\n              rotation,\n              scale,\n              snapToPixel,\n              padding,\n              backgroundFill || backgroundStroke,\n              feature\n            );\n            /** @type {ReplayImageOrLabelArgs} */\n            const args = [\n              context,\n              contextScale,\n              image,\n              dimensions,\n              opacity,\n              backgroundFill\n                ? /** @type {Array<*>} */ (lastFillInstruction)\n                : null,\n              backgroundStroke\n                ? /** @type {Array<*>} */ (lastStrokeInstruction)\n                : null,\n            ];\n            if (declutterTree) {\n              if (declutterMode === 'none') {\n                // not rendered in declutter group\n                continue;\n              } else if (declutterMode === 'obstacle') {\n                // will always be drawn, thus no collision detection, but insert as obstacle\n                declutterTree.insert(dimensions.declutterBox);\n                continue;\n              } else {\n                let imageArgs;\n                let imageDeclutterBox;\n                if (declutterImageWithText) {\n                  const index = dd - d;\n                  if (!declutterImageWithText[index]) {\n                    // We now have the image for an image+text combination.\n                    declutterImageWithText[index] = args;\n                    // Don't render anything for now, wait for the text.\n                    continue;\n                  }\n                  imageArgs = declutterImageWithText[index];\n                  delete declutterImageWithText[index];\n                  imageDeclutterBox = getDeclutterBox(imageArgs);\n                  if (declutterTree.collides(imageDeclutterBox)) {\n                    continue;\n                  }\n                }\n                if (declutterTree.collides(dimensions.declutterBox)) {\n                  continue;\n                }\n                if (imageArgs) {\n                  // We now have image and text for an image+text combination.\n                  declutterTree.insert(imageDeclutterBox);\n                  // Render the image before we render the text.\n                  this.replayImageOrLabel_.apply(this, imageArgs);\n                }\n                declutterTree.insert(dimensions.declutterBox);\n              }\n            }\n            this.replayImageOrLabel_.apply(this, args);\n          }\n          ++i;\n          break;\n        case CanvasInstruction.DRAW_CHARS:\n          const begin = /** @type {number} */ (instruction[1]);\n          const end = /** @type {number} */ (instruction[2]);\n          const baseline = /** @type {number} */ (instruction[3]);\n          const overflow = /** @type {number} */ (instruction[4]);\n          fillKey = /** @type {string} */ (instruction[5]);\n          const maxAngle = /** @type {number} */ (instruction[6]);\n          const measurePixelRatio = /** @type {number} */ (instruction[7]);\n          const offsetY = /** @type {number} */ (instruction[8]);\n          strokeKey = /** @type {string} */ (instruction[9]);\n          const strokeWidth = /** @type {number} */ (instruction[10]);\n          text = /** @type {string} */ (instruction[11]);\n          textKey = /** @type {string} */ (instruction[12]);\n          const pixelRatioScale = [\n            /** @type {number} */ (instruction[13]),\n            /** @type {number} */ (instruction[13]),\n          ];\n\n          const textState = this.textStates[textKey];\n          const font = textState.font;\n          const textScale = [\n            textState.scale[0] * measurePixelRatio,\n            textState.scale[1] * measurePixelRatio,\n          ];\n\n          let cachedWidths;\n          if (font in this.widths_) {\n            cachedWidths = this.widths_[font];\n          } else {\n            cachedWidths = {};\n            this.widths_[font] = cachedWidths;\n          }\n\n          const pathLength = lineStringLength(pixelCoordinates, begin, end, 2);\n          const textLength =\n            Math.abs(textScale[0]) *\n            measureAndCacheTextWidth(font, text, cachedWidths);\n          if (overflow || textLength <= pathLength) {\n            const textAlign = this.textStates[textKey].textAlign;\n            const startM =\n              (pathLength - textLength) * horizontalTextAlign(text, textAlign);\n            const parts = drawTextOnPath(\n              pixelCoordinates,\n              begin,\n              end,\n              2,\n              text,\n              startM,\n              maxAngle,\n              Math.abs(textScale[0]),\n              measureAndCacheTextWidth,\n              font,\n              cachedWidths,\n              viewRotationFromTransform ? 0 : this.viewRotation_\n            );\n            drawChars: if (parts) {\n              /** @type {Array<ReplayImageOrLabelArgs>} */\n              const replayImageOrLabelArgs = [];\n              let c, cc, chars, label, part;\n              if (strokeKey) {\n                for (c = 0, cc = parts.length; c < cc; ++c) {\n                  part = parts[c]; // x, y, anchorX, rotation, chunk\n                  chars = /** @type {string} */ (part[4]);\n                  label = this.createLabel(chars, textKey, '', strokeKey);\n                  anchorX =\n                    /** @type {number} */ (part[2]) +\n                    (textScale[0] < 0 ? -strokeWidth : strokeWidth);\n                  anchorY =\n                    baseline * label.height +\n                    ((0.5 - baseline) * 2 * strokeWidth * textScale[1]) /\n                      textScale[0] -\n                    offsetY;\n                  const dimensions = this.calculateImageOrLabelDimensions_(\n                    label.width,\n                    label.height,\n                    part[0],\n                    part[1],\n                    label.width,\n                    label.height,\n                    anchorX,\n                    anchorY,\n                    0,\n                    0,\n                    part[3],\n                    pixelRatioScale,\n                    false,\n                    defaultPadding,\n                    false,\n                    feature\n                  );\n                  if (\n                    declutterTree &&\n                    declutterTree.collides(dimensions.declutterBox)\n                  ) {\n                    break drawChars;\n                  }\n                  replayImageOrLabelArgs.push([\n                    context,\n                    contextScale,\n                    label,\n                    dimensions,\n                    1,\n                    null,\n                    null,\n                  ]);\n                }\n              }\n              if (fillKey) {\n                for (c = 0, cc = parts.length; c < cc; ++c) {\n                  part = parts[c]; // x, y, anchorX, rotation, chunk\n                  chars = /** @type {string} */ (part[4]);\n                  label = this.createLabel(chars, textKey, fillKey, '');\n                  anchorX = /** @type {number} */ (part[2]);\n                  anchorY = baseline * label.height - offsetY;\n                  const dimensions = this.calculateImageOrLabelDimensions_(\n                    label.width,\n                    label.height,\n                    part[0],\n                    part[1],\n                    label.width,\n                    label.height,\n                    anchorX,\n                    anchorY,\n                    0,\n                    0,\n                    part[3],\n                    pixelRatioScale,\n                    false,\n                    defaultPadding,\n                    false,\n                    feature\n                  );\n                  if (\n                    declutterTree &&\n                    declutterTree.collides(dimensions.declutterBox)\n                  ) {\n                    break drawChars;\n                  }\n                  replayImageOrLabelArgs.push([\n                    context,\n                    contextScale,\n                    label,\n                    dimensions,\n                    1,\n                    null,\n                    null,\n                  ]);\n                }\n              }\n              if (declutterTree) {\n                declutterTree.load(replayImageOrLabelArgs.map(getDeclutterBox));\n              }\n              for (let i = 0, ii = replayImageOrLabelArgs.length; i < ii; ++i) {\n                this.replayImageOrLabel_.apply(this, replayImageOrLabelArgs[i]);\n              }\n            }\n          }\n          ++i;\n          break;\n        case CanvasInstruction.END_GEOMETRY:\n          if (featureCallback !== undefined) {\n            feature = /** @type {import(\"../../Feature.js\").FeatureLike} */ (\n              instruction[1]\n            );\n            const result = featureCallback(feature, currentGeometry);\n            if (result) {\n              return result;\n            }\n          }\n          ++i;\n          break;\n        case CanvasInstruction.FILL:\n          if (batchSize) {\n            pendingFill++;\n          } else {\n            this.fill_(context);\n          }\n          ++i;\n          break;\n        case CanvasInstruction.MOVE_TO_LINE_TO:\n          d = /** @type {number} */ (instruction[1]);\n          dd = /** @type {number} */ (instruction[2]);\n          x = pixelCoordinates[d];\n          y = pixelCoordinates[d + 1];\n          roundX = (x + 0.5) | 0;\n          roundY = (y + 0.5) | 0;\n          if (roundX !== prevX || roundY !== prevY) {\n            context.moveTo(x, y);\n            prevX = roundX;\n            prevY = roundY;\n          }\n          for (d += 2; d < dd; d += 2) {\n            x = pixelCoordinates[d];\n            y = pixelCoordinates[d + 1];\n            roundX = (x + 0.5) | 0;\n            roundY = (y + 0.5) | 0;\n            if (d == dd - 2 || roundX !== prevX || roundY !== prevY) {\n              context.lineTo(x, y);\n              prevX = roundX;\n              prevY = roundY;\n            }\n          }\n          ++i;\n          break;\n        case CanvasInstruction.SET_FILL_STYLE:\n          lastFillInstruction = instruction;\n          this.alignFill_ = instruction[2];\n\n          if (pendingFill) {\n            this.fill_(context);\n            pendingFill = 0;\n            if (pendingStroke) {\n              context.stroke();\n              pendingStroke = 0;\n            }\n          }\n\n          context.fillStyle =\n            /** @type {import(\"../../colorlike.js\").ColorLike} */ (\n              instruction[1]\n            );\n          ++i;\n          break;\n        case CanvasInstruction.SET_STROKE_STYLE:\n          lastStrokeInstruction = instruction;\n          if (pendingStroke) {\n            context.stroke();\n            pendingStroke = 0;\n          }\n          this.setStrokeStyle_(context, /** @type {Array<*>} */ (instruction));\n          ++i;\n          break;\n        case CanvasInstruction.STROKE:\n          if (batchSize) {\n            pendingStroke++;\n          } else {\n            context.stroke();\n          }\n          ++i;\n          break;\n        default: // consume the instruction anyway, to avoid an infinite loop\n          ++i;\n          break;\n      }\n    }\n    if (pendingFill) {\n      this.fill_(context);\n    }\n    if (pendingStroke) {\n      context.stroke();\n    }\n    return undefined;\n  }\n\n  /**\n   * @param {CanvasRenderingContext2D} context Context.\n   * @param {number} contextScale Scale of the context.\n   * @param {import(\"../../transform.js\").Transform} transform Transform.\n   * @param {number} viewRotation View rotation.\n   * @param {boolean} snapToPixel Snap point symbols and text to integer pixels.\n   * @param {import(\"rbush\").default} [declutterTree] Declutter tree.\n   */\n  execute(\n    context,\n    contextScale,\n    transform,\n    viewRotation,\n    snapToPixel,\n    declutterTree\n  ) {\n    this.viewRotation_ = viewRotation;\n    this.execute_(\n      context,\n      contextScale,\n      transform,\n      this.instructions,\n      snapToPixel,\n      undefined,\n      undefined,\n      declutterTree\n    );\n  }\n\n  /**\n   * @param {CanvasRenderingContext2D} context Context.\n   * @param {import(\"../../transform.js\").Transform} transform Transform.\n   * @param {number} viewRotation View rotation.\n   * @param {FeatureCallback<T>} [featureCallback] Feature callback.\n   * @param {import(\"../../extent.js\").Extent} [hitExtent] Only check\n   *     features that intersect this extent.\n   * @return {T|undefined} Callback result.\n   * @template T\n   */\n  executeHitDetection(\n    context,\n    transform,\n    viewRotation,\n    featureCallback,\n    hitExtent\n  ) {\n    this.viewRotation_ = viewRotation;\n    return this.execute_(\n      context,\n      1,\n      transform,\n      this.hitDetectionInstructions,\n      true,\n      featureCallback,\n      hitExtent\n    );\n  }\n}\n\nexport default Executor;\n","/**\n * @module ol/render/canvas/ExecutorGroup\n */\n\nimport Executor from './Executor.js';\nimport {ascending} from '../../array.js';\nimport {buffer, createEmpty, extendCoordinate} from '../../extent.js';\nimport {\n  compose as composeTransform,\n  create as createTransform,\n} from '../../transform.js';\nimport {createCanvasContext2D} from '../../dom.js';\nimport {isEmpty} from '../../obj.js';\nimport {transform2D} from '../../geom/flat/transform.js';\n\n/**\n * @const\n * @type {Array<import(\"../canvas.js\").BuilderType>}\n */\nconst ORDER = ['Polygon', 'Circle', 'LineString', 'Image', 'Text', 'Default'];\n\nclass ExecutorGroup {\n  /**\n   * @param {import(\"../../extent.js\").Extent} maxExtent Max extent for clipping. When a\n   * `maxExtent` was set on the Builder for this executor group, the same `maxExtent`\n   * should be set here, unless the target context does not exceed that extent (which\n   * can be the case when rendering to tiles).\n   * @param {number} resolution Resolution.\n   * @param {number} pixelRatio Pixel ratio.\n   * @param {boolean} overlaps The executor group can have overlapping geometries.\n   * @param {!Object<string, !Object<import(\"../canvas.js\").BuilderType, import(\"../canvas.js\").SerializableInstructions>>} allInstructions\n   * The serializable instructions.\n   * @param {number} [renderBuffer] Optional rendering buffer.\n   */\n  constructor(\n    maxExtent,\n    resolution,\n    pixelRatio,\n    overlaps,\n    allInstructions,\n    renderBuffer\n  ) {\n    /**\n     * @private\n     * @type {import(\"../../extent.js\").Extent}\n     */\n    this.maxExtent_ = maxExtent;\n\n    /**\n     * @private\n     * @type {boolean}\n     */\n    this.overlaps_ = overlaps;\n\n    /**\n     * @private\n     * @type {number}\n     */\n    this.pixelRatio_ = pixelRatio;\n\n    /**\n     * @private\n     * @type {number}\n     */\n    this.resolution_ = resolution;\n\n    /**\n     * @private\n     * @type {number|undefined}\n     */\n    this.renderBuffer_ = renderBuffer;\n\n    /**\n     * @private\n     * @type {!Object<string, !Object<import(\"../canvas.js\").BuilderType, import(\"./Executor\").default>>}\n     */\n    this.executorsByZIndex_ = {};\n\n    /**\n     * @private\n     * @type {CanvasRenderingContext2D}\n     */\n    this.hitDetectionContext_ = null;\n\n    /**\n     * @private\n     * @type {import(\"../../transform.js\").Transform}\n     */\n    this.hitDetectionTransform_ = createTransform();\n\n    this.createExecutors_(allInstructions);\n  }\n\n  /**\n   * @param {CanvasRenderingContext2D} context Context.\n   * @param {import(\"../../transform.js\").Transform} transform Transform.\n   */\n  clip(context, transform) {\n    const flatClipCoords = this.getClipCoords(transform);\n    context.beginPath();\n    context.moveTo(flatClipCoords[0], flatClipCoords[1]);\n    context.lineTo(flatClipCoords[2], flatClipCoords[3]);\n    context.lineTo(flatClipCoords[4], flatClipCoords[5]);\n    context.lineTo(flatClipCoords[6], flatClipCoords[7]);\n    context.clip();\n  }\n\n  /**\n   * Create executors and populate them using the provided instructions.\n   * @private\n   * @param {!Object<string, !Object<import(\"../canvas.js\").BuilderType, import(\"../canvas.js\").SerializableInstructions>>} allInstructions The serializable instructions\n   */\n  createExecutors_(allInstructions) {\n    for (const zIndex in allInstructions) {\n      let executors = this.executorsByZIndex_[zIndex];\n      if (executors === undefined) {\n        executors = {};\n        this.executorsByZIndex_[zIndex] = executors;\n      }\n      const instructionByZindex = allInstructions[zIndex];\n      for (const builderType in instructionByZindex) {\n        const instructions = instructionByZindex[builderType];\n        executors[builderType] = new Executor(\n          this.resolution_,\n          this.pixelRatio_,\n          this.overlaps_,\n          instructions\n        );\n      }\n    }\n  }\n\n  /**\n   * @param {Array<import(\"../canvas.js\").BuilderType>} executors Executors.\n   * @return {boolean} Has executors of the provided types.\n   */\n  hasExecutors(executors) {\n    for (const zIndex in this.executorsByZIndex_) {\n      const candidates = this.executorsByZIndex_[zIndex];\n      for (let i = 0, ii = executors.length; i < ii; ++i) {\n        if (executors[i] in candidates) {\n          return true;\n        }\n      }\n    }\n    return false;\n  }\n\n  /**\n   * @param {import(\"../../coordinate.js\").Coordinate} coordinate Coordinate.\n   * @param {number} resolution Resolution.\n   * @param {number} rotation Rotation.\n   * @param {number} hitTolerance Hit tolerance in pixels.\n   * @param {function(import(\"../../Feature.js\").FeatureLike, import(\"../../geom/SimpleGeometry.js\").default, number): T} callback Feature callback.\n   * @param {Array<import(\"../../Feature.js\").FeatureLike>} declutteredFeatures Decluttered features.\n   * @return {T|undefined} Callback result.\n   * @template T\n   */\n  forEachFeatureAtCoordinate(\n    coordinate,\n    resolution,\n    rotation,\n    hitTolerance,\n    callback,\n    declutteredFeatures\n  ) {\n    hitTolerance = Math.round(hitTolerance);\n    const contextSize = hitTolerance * 2 + 1;\n    const transform = composeTransform(\n      this.hitDetectionTransform_,\n      hitTolerance + 0.5,\n      hitTolerance + 0.5,\n      1 / resolution,\n      -1 / resolution,\n      -rotation,\n      -coordinate[0],\n      -coordinate[1]\n    );\n\n    const newContext = !this.hitDetectionContext_;\n    if (newContext) {\n      this.hitDetectionContext_ = createCanvasContext2D(\n        contextSize,\n        contextSize,\n        undefined,\n        {willReadFrequently: true}\n      );\n    }\n    const context = this.hitDetectionContext_;\n\n    if (\n      context.canvas.width !== contextSize ||\n      context.canvas.height !== contextSize\n    ) {\n      context.canvas.width = contextSize;\n      context.canvas.height = contextSize;\n    } else if (!newContext) {\n      context.clearRect(0, 0, contextSize, contextSize);\n    }\n\n    /**\n     * @type {import(\"../../extent.js\").Extent}\n     */\n    let hitExtent;\n    if (this.renderBuffer_ !== undefined) {\n      hitExtent = createEmpty();\n      extendCoordinate(hitExtent, coordinate);\n      buffer(\n        hitExtent,\n        resolution * (this.renderBuffer_ + hitTolerance),\n        hitExtent\n      );\n    }\n\n    const indexes = getPixelIndexArray(hitTolerance);\n\n    let builderType;\n\n    /**\n     * @param {import(\"../../Feature.js\").FeatureLike} feature Feature.\n     * @param {import(\"../../geom/SimpleGeometry.js\").default} geometry Geometry.\n     * @return {T|undefined} Callback result.\n     */\n    function featureCallback(feature, geometry) {\n      const imageData = context.getImageData(\n        0,\n        0,\n        contextSize,\n        contextSize\n      ).data;\n      for (let i = 0, ii = indexes.length; i < ii; i++) {\n        if (imageData[indexes[i]] > 0) {\n          if (\n            !declutteredFeatures ||\n            (builderType !== 'Image' && builderType !== 'Text') ||\n            declutteredFeatures.includes(feature)\n          ) {\n            const idx = (indexes[i] - 3) / 4;\n            const x = hitTolerance - (idx % contextSize);\n            const y = hitTolerance - ((idx / contextSize) | 0);\n            const result = callback(feature, geometry, x * x + y * y);\n            if (result) {\n              return result;\n            }\n          }\n          context.clearRect(0, 0, contextSize, contextSize);\n          break;\n        }\n      }\n      return undefined;\n    }\n\n    /** @type {Array<number>} */\n    const zs = Object.keys(this.executorsByZIndex_).map(Number);\n    zs.sort(ascending);\n\n    let i, j, executors, executor, result;\n    for (i = zs.length - 1; i >= 0; --i) {\n      const zIndexKey = zs[i].toString();\n      executors = this.executorsByZIndex_[zIndexKey];\n      for (j = ORDER.length - 1; j >= 0; --j) {\n        builderType = ORDER[j];\n        executor = executors[builderType];\n        if (executor !== undefined) {\n          result = executor.executeHitDetection(\n            context,\n            transform,\n            rotation,\n            featureCallback,\n            hitExtent\n          );\n          if (result) {\n            return result;\n          }\n        }\n      }\n    }\n    return undefined;\n  }\n\n  /**\n   * @param {import(\"../../transform.js\").Transform} transform Transform.\n   * @return {Array<number>|null} Clip coordinates.\n   */\n  getClipCoords(transform) {\n    const maxExtent = this.maxExtent_;\n    if (!maxExtent) {\n      return null;\n    }\n    const minX = maxExtent[0];\n    const minY = maxExtent[1];\n    const maxX = maxExtent[2];\n    const maxY = maxExtent[3];\n    const flatClipCoords = [minX, minY, minX, maxY, maxX, maxY, maxX, minY];\n    transform2D(flatClipCoords, 0, 8, 2, transform, flatClipCoords);\n    return flatClipCoords;\n  }\n\n  /**\n   * @return {boolean} Is empty.\n   */\n  isEmpty() {\n    return isEmpty(this.executorsByZIndex_);\n  }\n\n  /**\n   * @param {CanvasRenderingContext2D} context Context.\n   * @param {number} contextScale Scale of the context.\n   * @param {import(\"../../transform.js\").Transform} transform Transform.\n   * @param {number} viewRotation View rotation.\n   * @param {boolean} snapToPixel Snap point symbols and test to integer pixel.\n   * @param {Array<import(\"../canvas.js\").BuilderType>} [builderTypes] Ordered replay types to replay.\n   *     Default is {@link module:ol/render/replay~ORDER}\n   * @param {import(\"rbush\").default} [declutterTree] Declutter tree.\n   */\n  execute(\n    context,\n    contextScale,\n    transform,\n    viewRotation,\n    snapToPixel,\n    builderTypes,\n    declutterTree\n  ) {\n    /** @type {Array<number>} */\n    const zs = Object.keys(this.executorsByZIndex_).map(Number);\n    zs.sort(ascending);\n\n    // setup clipping so that the parts of over-simplified geometries are not\n    // visible outside the current extent when panning\n    if (this.maxExtent_) {\n      context.save();\n      this.clip(context, transform);\n    }\n\n    builderTypes = builderTypes ? builderTypes : ORDER;\n    let i, ii, j, jj, replays, replay;\n    if (declutterTree) {\n      zs.reverse();\n    }\n    for (i = 0, ii = zs.length; i < ii; ++i) {\n      const zIndexKey = zs[i].toString();\n      replays = this.executorsByZIndex_[zIndexKey];\n      for (j = 0, jj = builderTypes.length; j < jj; ++j) {\n        const builderType = builderTypes[j];\n        replay = replays[builderType];\n        if (replay !== undefined) {\n          replay.execute(\n            context,\n            contextScale,\n            transform,\n            viewRotation,\n            snapToPixel,\n            declutterTree\n          );\n        }\n      }\n    }\n\n    if (this.maxExtent_) {\n      context.restore();\n    }\n  }\n}\n\n/**\n * This cache is used to store arrays of indexes for calculated pixel circles\n * to increase performance.\n * It is a static property to allow each Replaygroup to access it.\n * @type {Object<number, Array<number>>}\n */\nconst circlePixelIndexArrayCache = {};\n\n/**\n * This methods creates an array with indexes of all pixels within a circle,\n * ordered by how close they are to the center.\n * A cache is used to increase performance.\n * @param {number} radius Radius.\n * @return {Array<number>} An array with indexes within a circle.\n */\nexport function getPixelIndexArray(radius) {\n  if (circlePixelIndexArrayCache[radius] !== undefined) {\n    return circlePixelIndexArrayCache[radius];\n  }\n\n  const size = radius * 2 + 1;\n  const maxDistanceSq = radius * radius;\n  const distances = new Array(maxDistanceSq + 1);\n  for (let i = 0; i <= radius; ++i) {\n    for (let j = 0; j <= radius; ++j) {\n      const distanceSq = i * i + j * j;\n      if (distanceSq > maxDistanceSq) {\n        break;\n      }\n      let distance = distances[distanceSq];\n      if (!distance) {\n        distance = [];\n        distances[distanceSq] = distance;\n      }\n      distance.push(((radius + i) * size + (radius + j)) * 4 + 3);\n      if (i > 0) {\n        distance.push(((radius - i) * size + (radius + j)) * 4 + 3);\n      }\n      if (j > 0) {\n        distance.push(((radius + i) * size + (radius - j)) * 4 + 3);\n        if (i > 0) {\n          distance.push(((radius - i) * size + (radius - j)) * 4 + 3);\n        }\n      }\n    }\n  }\n\n  const pixelIndex = [];\n  for (let i = 0, ii = distances.length; i < ii; ++i) {\n    if (distances[i]) {\n      pixelIndex.push(...distances[i]);\n    }\n  }\n\n  circlePixelIndexArrayCache[radius] = pixelIndex;\n  return pixelIndex;\n}\n\nexport default ExecutorGroup;\n","/**\n * @module ol/render/canvas/ImageBuilder\n */\nimport CanvasBuilder from './Builder.js';\nimport CanvasInstruction from './Instruction.js';\n\nclass CanvasImageBuilder extends CanvasBuilder {\n  /**\n   * @param {number} tolerance Tolerance.\n   * @param {import(\"../../extent.js\").Extent} maxExtent Maximum extent.\n   * @param {number} resolution Resolution.\n   * @param {number} pixelRatio Pixel ratio.\n   */\n  constructor(tolerance, maxExtent, resolution, pixelRatio) {\n    super(tolerance, maxExtent, resolution, pixelRatio);\n\n    /**\n     * @private\n     * @type {HTMLCanvasElement|HTMLVideoElement|HTMLImageElement}\n     */\n    this.hitDetectionImage_ = null;\n\n    /**\n     * @private\n     * @type {HTMLCanvasElement|HTMLVideoElement|HTMLImageElement}\n     */\n    this.image_ = null;\n\n    /**\n     * @private\n     * @type {number|undefined}\n     */\n    this.imagePixelRatio_ = undefined;\n\n    /**\n     * @private\n     * @type {number|undefined}\n     */\n    this.anchorX_ = undefined;\n\n    /**\n     * @private\n     * @type {number|undefined}\n     */\n    this.anchorY_ = undefined;\n\n    /**\n     * @private\n     * @type {number|undefined}\n     */\n    this.height_ = undefined;\n\n    /**\n     * @private\n     * @type {number|undefined}\n     */\n    this.opacity_ = undefined;\n\n    /**\n     * @private\n     * @type {number|undefined}\n     */\n    this.originX_ = undefined;\n\n    /**\n     * @private\n     * @type {number|undefined}\n     */\n    this.originY_ = undefined;\n\n    /**\n     * @private\n     * @type {boolean|undefined}\n     */\n    this.rotateWithView_ = undefined;\n\n    /**\n     * @private\n     * @type {number|undefined}\n     */\n    this.rotation_ = undefined;\n\n    /**\n     * @private\n     * @type {import(\"../../size.js\").Size|undefined}\n     */\n    this.scale_ = undefined;\n\n    /**\n     * @private\n     * @type {number|undefined}\n     */\n    this.width_ = undefined;\n\n    /**\n     * @private\n     * @type {\"declutter\"|\"obstacle\"|\"none\"|undefined}\n     */\n    this.declutterMode_ = undefined;\n\n    /**\n     * Data shared with a text builder for combined decluttering.\n     * @private\n     * @type {import(\"../canvas.js\").DeclutterImageWithText}\n     */\n    this.declutterImageWithText_ = undefined;\n  }\n\n  /**\n   * @param {import(\"../../geom/Point.js\").default|import(\"../Feature.js\").default} pointGeometry Point geometry.\n   * @param {import(\"../../Feature.js\").FeatureLike} feature Feature.\n   */\n  drawPoint(pointGeometry, feature) {\n    if (!this.image_) {\n      return;\n    }\n    this.beginGeometry(pointGeometry, feature);\n    const flatCoordinates = pointGeometry.getFlatCoordinates();\n    const stride = pointGeometry.getStride();\n    const myBegin = this.coordinates.length;\n    const myEnd = this.appendFlatPointCoordinates(flatCoordinates, stride);\n    this.instructions.push([\n      CanvasInstruction.DRAW_IMAGE,\n      myBegin,\n      myEnd,\n      this.image_,\n      // Remaining arguments to DRAW_IMAGE are in alphabetical order\n      this.anchorX_ * this.imagePixelRatio_,\n      this.anchorY_ * this.imagePixelRatio_,\n      Math.ceil(this.height_ * this.imagePixelRatio_),\n      this.opacity_,\n      this.originX_ * this.imagePixelRatio_,\n      this.originY_ * this.imagePixelRatio_,\n      this.rotateWithView_,\n      this.rotation_,\n      [\n        (this.scale_[0] * this.pixelRatio) / this.imagePixelRatio_,\n        (this.scale_[1] * this.pixelRatio) / this.imagePixelRatio_,\n      ],\n      Math.ceil(this.width_ * this.imagePixelRatio_),\n      this.declutterMode_,\n      this.declutterImageWithText_,\n    ]);\n    this.hitDetectionInstructions.push([\n      CanvasInstruction.DRAW_IMAGE,\n      myBegin,\n      myEnd,\n      this.hitDetectionImage_,\n      // Remaining arguments to DRAW_IMAGE are in alphabetical order\n      this.anchorX_,\n      this.anchorY_,\n      this.height_,\n      1,\n      this.originX_,\n      this.originY_,\n      this.rotateWithView_,\n      this.rotation_,\n      this.scale_,\n      this.width_,\n      this.declutterMode_,\n      this.declutterImageWithText_,\n    ]);\n    this.endGeometry(feature);\n  }\n\n  /**\n   * @param {import(\"../../geom/MultiPoint.js\").default|import(\"../Feature.js\").default} multiPointGeometry MultiPoint geometry.\n   * @param {import(\"../../Feature.js\").FeatureLike} feature Feature.\n   */\n  drawMultiPoint(multiPointGeometry, feature) {\n    if (!this.image_) {\n      return;\n    }\n    this.beginGeometry(multiPointGeometry, feature);\n    const flatCoordinates = multiPointGeometry.getFlatCoordinates();\n    const stride = multiPointGeometry.getStride();\n    const myBegin = this.coordinates.length;\n    const myEnd = this.appendFlatPointCoordinates(flatCoordinates, stride);\n    this.instructions.push([\n      CanvasInstruction.DRAW_IMAGE,\n      myBegin,\n      myEnd,\n      this.image_,\n      // Remaining arguments to DRAW_IMAGE are in alphabetical order\n      this.anchorX_ * this.imagePixelRatio_,\n      this.anchorY_ * this.imagePixelRatio_,\n      Math.ceil(this.height_ * this.imagePixelRatio_),\n      this.opacity_,\n      this.originX_ * this.imagePixelRatio_,\n      this.originY_ * this.imagePixelRatio_,\n      this.rotateWithView_,\n      this.rotation_,\n      [\n        (this.scale_[0] * this.pixelRatio) / this.imagePixelRatio_,\n        (this.scale_[1] * this.pixelRatio) / this.imagePixelRatio_,\n      ],\n      Math.ceil(this.width_ * this.imagePixelRatio_),\n      this.declutterMode_,\n      this.declutterImageWithText_,\n    ]);\n    this.hitDetectionInstructions.push([\n      CanvasInstruction.DRAW_IMAGE,\n      myBegin,\n      myEnd,\n      this.hitDetectionImage_,\n      // Remaining arguments to DRAW_IMAGE are in alphabetical order\n      this.anchorX_,\n      this.anchorY_,\n      this.height_,\n      1,\n      this.originX_,\n      this.originY_,\n      this.rotateWithView_,\n      this.rotation_,\n      this.scale_,\n      this.width_,\n      this.declutterMode_,\n      this.declutterImageWithText_,\n    ]);\n    this.endGeometry(feature);\n  }\n\n  /**\n   * @return {import(\"../canvas.js\").SerializableInstructions} the serializable instructions.\n   */\n  finish() {\n    this.reverseHitDetectionInstructions();\n    // FIXME this doesn't really protect us against further calls to draw*Geometry\n    this.anchorX_ = undefined;\n    this.anchorY_ = undefined;\n    this.hitDetectionImage_ = null;\n    this.image_ = null;\n    this.imagePixelRatio_ = undefined;\n    this.height_ = undefined;\n    this.scale_ = undefined;\n    this.opacity_ = undefined;\n    this.originX_ = undefined;\n    this.originY_ = undefined;\n    this.rotateWithView_ = undefined;\n    this.rotation_ = undefined;\n    this.width_ = undefined;\n    return super.finish();\n  }\n\n  /**\n   * @param {import(\"../../style/Image.js\").default} imageStyle Image style.\n   * @param {Object} [sharedData] Shared data.\n   */\n  setImageStyle(imageStyle, sharedData) {\n    const anchor = imageStyle.getAnchor();\n    const size = imageStyle.getSize();\n    const origin = imageStyle.getOrigin();\n    this.imagePixelRatio_ = imageStyle.getPixelRatio(this.pixelRatio);\n    this.anchorX_ = anchor[0];\n    this.anchorY_ = anchor[1];\n    this.hitDetectionImage_ = imageStyle.getHitDetectionImage();\n    this.image_ = imageStyle.getImage(this.pixelRatio);\n    this.height_ = size[1];\n    this.opacity_ = imageStyle.getOpacity();\n    this.originX_ = origin[0];\n    this.originY_ = origin[1];\n    this.rotateWithView_ = imageStyle.getRotateWithView();\n    this.rotation_ = imageStyle.getRotation();\n    this.scale_ = imageStyle.getScaleArray();\n    this.width_ = size[0];\n    this.declutterMode_ = imageStyle.getDeclutterMode();\n    this.declutterImageWithText_ = sharedData;\n  }\n}\n\nexport default CanvasImageBuilder;\n","/**\n * @module ol/render/canvas/Immediate\n */\n// FIXME test, especially polygons with holes and multipolygons\n// FIXME need to handle large thick features (where pixel size matters)\n// FIXME add offset and end to ol/geom/flat/transform~transform2D?\n\nimport VectorContext from '../VectorContext.js';\nimport {asColorLike} from '../../colorlike.js';\nimport {\n  compose as composeTransform,\n  create as createTransform,\n} from '../../transform.js';\nimport {\n  defaultFillStyle,\n  defaultFont,\n  defaultLineCap,\n  defaultLineDash,\n  defaultLineDashOffset,\n  defaultLineJoin,\n  defaultLineWidth,\n  defaultMiterLimit,\n  defaultStrokeStyle,\n  defaultTextAlign,\n  defaultTextBaseline,\n} from '../canvas.js';\nimport {equals} from '../../array.js';\nimport {intersects} from '../../extent.js';\nimport {toFixed} from '../../math.js';\nimport {transform2D} from '../../geom/flat/transform.js';\nimport {transformGeom2D} from '../../geom/SimpleGeometry.js';\n\n/**\n * @classdesc\n * A concrete subclass of {@link module:ol/render/VectorContext~VectorContext} that implements\n * direct rendering of features and geometries to an HTML5 Canvas context.\n * Instances of this class are created internally by the library and\n * provided to application code as vectorContext member of the\n * {@link module:ol/render/Event~RenderEvent} object associated with postcompose, precompose and\n * render events emitted by layers and maps.\n */\nclass CanvasImmediateRenderer extends VectorContext {\n  /**\n   * @param {CanvasRenderingContext2D} context Context.\n   * @param {number} pixelRatio Pixel ratio.\n   * @param {import(\"../../extent.js\").Extent} extent Extent.\n   * @param {import(\"../../transform.js\").Transform} transform Transform.\n   * @param {number} viewRotation View rotation.\n   * @param {number} [squaredTolerance] Optional squared tolerance for simplification.\n   * @param {import(\"../../proj.js\").TransformFunction} [userTransform] Transform from user to view projection.\n   */\n  constructor(\n    context,\n    pixelRatio,\n    extent,\n    transform,\n    viewRotation,\n    squaredTolerance,\n    userTransform\n  ) {\n    super();\n\n    /**\n     * @private\n     * @type {CanvasRenderingContext2D}\n     */\n    this.context_ = context;\n\n    /**\n     * @private\n     * @type {number}\n     */\n    this.pixelRatio_ = pixelRatio;\n\n    /**\n     * @private\n     * @type {import(\"../../extent.js\").Extent}\n     */\n    this.extent_ = extent;\n\n    /**\n     * @private\n     * @type {import(\"../../transform.js\").Transform}\n     */\n    this.transform_ = transform;\n\n    /**\n     * @private\n     * @type {number}\n     */\n    this.transformRotation_ = transform\n      ? toFixed(Math.atan2(transform[1], transform[0]), 10)\n      : 0;\n\n    /**\n     * @private\n     * @type {number}\n     */\n    this.viewRotation_ = viewRotation;\n\n    /**\n     * @private\n     * @type {number}\n     */\n    this.squaredTolerance_ = squaredTolerance;\n\n    /**\n     * @private\n     * @type {import(\"../../proj.js\").TransformFunction}\n     */\n    this.userTransform_ = userTransform;\n\n    /**\n     * @private\n     * @type {?import(\"../canvas.js\").FillState}\n     */\n    this.contextFillState_ = null;\n\n    /**\n     * @private\n     * @type {?import(\"../canvas.js\").StrokeState}\n     */\n    this.contextStrokeState_ = null;\n\n    /**\n     * @private\n     * @type {?import(\"../canvas.js\").TextState}\n     */\n    this.contextTextState_ = null;\n\n    /**\n     * @private\n     * @type {?import(\"../canvas.js\").FillState}\n     */\n    this.fillState_ = null;\n\n    /**\n     * @private\n     * @type {?import(\"../canvas.js\").StrokeState}\n     */\n    this.strokeState_ = null;\n\n    /**\n     * @private\n     * @type {HTMLCanvasElement|HTMLVideoElement|HTMLImageElement}\n     */\n    this.image_ = null;\n\n    /**\n     * @private\n     * @type {number}\n     */\n    this.imageAnchorX_ = 0;\n\n    /**\n     * @private\n     * @type {number}\n     */\n    this.imageAnchorY_ = 0;\n\n    /**\n     * @private\n     * @type {number}\n     */\n    this.imageHeight_ = 0;\n\n    /**\n     * @private\n     * @type {number}\n     */\n    this.imageOpacity_ = 0;\n\n    /**\n     * @private\n     * @type {number}\n     */\n    this.imageOriginX_ = 0;\n\n    /**\n     * @private\n     * @type {number}\n     */\n    this.imageOriginY_ = 0;\n\n    /**\n     * @private\n     * @type {boolean}\n     */\n    this.imageRotateWithView_ = false;\n\n    /**\n     * @private\n     * @type {number}\n     */\n    this.imageRotation_ = 0;\n\n    /**\n     * @private\n     * @type {import(\"../../size.js\").Size}\n     */\n    this.imageScale_ = [0, 0];\n\n    /**\n     * @private\n     * @type {number}\n     */\n    this.imageWidth_ = 0;\n\n    /**\n     * @private\n     * @type {string}\n     */\n    this.text_ = '';\n\n    /**\n     * @private\n     * @type {number}\n     */\n    this.textOffsetX_ = 0;\n\n    /**\n     * @private\n     * @type {number}\n     */\n    this.textOffsetY_ = 0;\n\n    /**\n     * @private\n     * @type {boolean}\n     */\n    this.textRotateWithView_ = false;\n\n    /**\n     * @private\n     * @type {number}\n     */\n    this.textRotation_ = 0;\n\n    /**\n     * @private\n     * @type {import(\"../../size.js\").Size}\n     */\n    this.textScale_ = [0, 0];\n\n    /**\n     * @private\n     * @type {?import(\"../canvas.js\").FillState}\n     */\n    this.textFillState_ = null;\n\n    /**\n     * @private\n     * @type {?import(\"../canvas.js\").StrokeState}\n     */\n    this.textStrokeState_ = null;\n\n    /**\n     * @private\n     * @type {?import(\"../canvas.js\").TextState}\n     */\n    this.textState_ = null;\n\n    /**\n     * @private\n     * @type {Array<number>}\n     */\n    this.pixelCoordinates_ = [];\n\n    /**\n     * @private\n     * @type {import(\"../../transform.js\").Transform}\n     */\n    this.tmpLocalTransform_ = createTransform();\n  }\n\n  /**\n   * @param {Array<number>} flatCoordinates Flat coordinates.\n   * @param {number} offset Offset.\n   * @param {number} end End.\n   * @param {number} stride Stride.\n   * @private\n   */\n  drawImages_(flatCoordinates, offset, end, stride) {\n    if (!this.image_) {\n      return;\n    }\n    const pixelCoordinates = transform2D(\n      flatCoordinates,\n      offset,\n      end,\n      stride,\n      this.transform_,\n      this.pixelCoordinates_\n    );\n    const context = this.context_;\n    const localTransform = this.tmpLocalTransform_;\n    const alpha = context.globalAlpha;\n    if (this.imageOpacity_ != 1) {\n      context.globalAlpha = alpha * this.imageOpacity_;\n    }\n    let rotation = this.imageRotation_;\n    if (this.transformRotation_ === 0) {\n      rotation -= this.viewRotation_;\n    }\n    if (this.imageRotateWithView_) {\n      rotation += this.viewRotation_;\n    }\n    for (let i = 0, ii = pixelCoordinates.length; i < ii; i += 2) {\n      const x = pixelCoordinates[i] - this.imageAnchorX_;\n      const y = pixelCoordinates[i + 1] - this.imageAnchorY_;\n      if (\n        rotation !== 0 ||\n        this.imageScale_[0] != 1 ||\n        this.imageScale_[1] != 1\n      ) {\n        const centerX = x + this.imageAnchorX_;\n        const centerY = y + this.imageAnchorY_;\n        composeTransform(\n          localTransform,\n          centerX,\n          centerY,\n          1,\n          1,\n          rotation,\n          -centerX,\n          -centerY\n        );\n        context.setTransform.apply(context, localTransform);\n        context.translate(centerX, centerY);\n        context.scale(this.imageScale_[0], this.imageScale_[1]);\n        context.drawImage(\n          this.image_,\n          this.imageOriginX_,\n          this.imageOriginY_,\n          this.imageWidth_,\n          this.imageHeight_,\n          -this.imageAnchorX_,\n          -this.imageAnchorY_,\n          this.imageWidth_,\n          this.imageHeight_\n        );\n        context.setTransform(1, 0, 0, 1, 0, 0);\n      } else {\n        context.drawImage(\n          this.image_,\n          this.imageOriginX_,\n          this.imageOriginY_,\n          this.imageWidth_,\n          this.imageHeight_,\n          x,\n          y,\n          this.imageWidth_,\n          this.imageHeight_\n        );\n      }\n    }\n    if (this.imageOpacity_ != 1) {\n      context.globalAlpha = alpha;\n    }\n  }\n\n  /**\n   * @param {Array<number>} flatCoordinates Flat coordinates.\n   * @param {number} offset Offset.\n   * @param {number} end End.\n   * @param {number} stride Stride.\n   * @private\n   */\n  drawText_(flatCoordinates, offset, end, stride) {\n    if (!this.textState_ || this.text_ === '') {\n      return;\n    }\n    if (this.textFillState_) {\n      this.setContextFillState_(this.textFillState_);\n    }\n    if (this.textStrokeState_) {\n      this.setContextStrokeState_(this.textStrokeState_);\n    }\n    this.setContextTextState_(this.textState_);\n    const pixelCoordinates = transform2D(\n      flatCoordinates,\n      offset,\n      end,\n      stride,\n      this.transform_,\n      this.pixelCoordinates_\n    );\n    const context = this.context_;\n    let rotation = this.textRotation_;\n    if (this.transformRotation_ === 0) {\n      rotation -= this.viewRotation_;\n    }\n    if (this.textRotateWithView_) {\n      rotation += this.viewRotation_;\n    }\n    for (; offset < end; offset += stride) {\n      const x = pixelCoordinates[offset] + this.textOffsetX_;\n      const y = pixelCoordinates[offset + 1] + this.textOffsetY_;\n      if (\n        rotation !== 0 ||\n        this.textScale_[0] != 1 ||\n        this.textScale_[1] != 1\n      ) {\n        context.translate(x - this.textOffsetX_, y - this.textOffsetY_);\n        context.rotate(rotation);\n        context.translate(this.textOffsetX_, this.textOffsetY_);\n        context.scale(this.textScale_[0], this.textScale_[1]);\n        if (this.textStrokeState_) {\n          context.strokeText(this.text_, 0, 0);\n        }\n        if (this.textFillState_) {\n          context.fillText(this.text_, 0, 0);\n        }\n        context.setTransform(1, 0, 0, 1, 0, 0);\n      } else {\n        if (this.textStrokeState_) {\n          context.strokeText(this.text_, x, y);\n        }\n        if (this.textFillState_) {\n          context.fillText(this.text_, x, y);\n        }\n      }\n    }\n  }\n\n  /**\n   * @param {Array<number>} flatCoordinates Flat coordinates.\n   * @param {number} offset Offset.\n   * @param {number} end End.\n   * @param {number} stride Stride.\n   * @param {boolean} close Close.\n   * @private\n   * @return {number} end End.\n   */\n  moveToLineTo_(flatCoordinates, offset, end, stride, close) {\n    const context = this.context_;\n    const pixelCoordinates = transform2D(\n      flatCoordinates,\n      offset,\n      end,\n      stride,\n      this.transform_,\n      this.pixelCoordinates_\n    );\n    context.moveTo(pixelCoordinates[0], pixelCoordinates[1]);\n    let length = pixelCoordinates.length;\n    if (close) {\n      length -= 2;\n    }\n    for (let i = 2; i < length; i += 2) {\n      context.lineTo(pixelCoordinates[i], pixelCoordinates[i + 1]);\n    }\n    if (close) {\n      context.closePath();\n    }\n    return end;\n  }\n\n  /**\n   * @param {Array<number>} flatCoordinates Flat coordinates.\n   * @param {number} offset Offset.\n   * @param {Array<number>} ends Ends.\n   * @param {number} stride Stride.\n   * @private\n   * @return {number} End.\n   */\n  drawRings_(flatCoordinates, offset, ends, stride) {\n    for (let i = 0, ii = ends.length; i < ii; ++i) {\n      offset = this.moveToLineTo_(\n        flatCoordinates,\n        offset,\n        ends[i],\n        stride,\n        true\n      );\n    }\n    return offset;\n  }\n\n  /**\n   * Render a circle geometry into the canvas.  Rendering is immediate and uses\n   * the current fill and stroke styles.\n   *\n   * @param {import(\"../../geom/Circle.js\").default} geometry Circle geometry.\n   * @api\n   */\n  drawCircle(geometry) {\n    if (this.squaredTolerance_) {\n      geometry = /** @type {import(\"../../geom/Circle.js\").default} */ (\n        geometry.simplifyTransformed(\n          this.squaredTolerance_,\n          this.userTransform_\n        )\n      );\n    }\n    if (!intersects(this.extent_, geometry.getExtent())) {\n      return;\n    }\n    if (this.fillState_ || this.strokeState_) {\n      if (this.fillState_) {\n        this.setContextFillState_(this.fillState_);\n      }\n      if (this.strokeState_) {\n        this.setContextStrokeState_(this.strokeState_);\n      }\n      const pixelCoordinates = transformGeom2D(\n        geometry,\n        this.transform_,\n        this.pixelCoordinates_\n      );\n      const dx = pixelCoordinates[2] - pixelCoordinates[0];\n      const dy = pixelCoordinates[3] - pixelCoordinates[1];\n      const radius = Math.sqrt(dx * dx + dy * dy);\n      const context = this.context_;\n      context.beginPath();\n      context.arc(\n        pixelCoordinates[0],\n        pixelCoordinates[1],\n        radius,\n        0,\n        2 * Math.PI\n      );\n      if (this.fillState_) {\n        context.fill();\n      }\n      if (this.strokeState_) {\n        context.stroke();\n      }\n    }\n    if (this.text_ !== '') {\n      this.drawText_(geometry.getCenter(), 0, 2, 2);\n    }\n  }\n\n  /**\n   * Set the rendering style.  Note that since this is an immediate rendering API,\n   * any `zIndex` on the provided style will be ignored.\n   *\n   * @param {import(\"../../style/Style.js\").default} style The rendering style.\n   * @api\n   */\n  setStyle(style) {\n    this.setFillStrokeStyle(style.getFill(), style.getStroke());\n    this.setImageStyle(style.getImage());\n    this.setTextStyle(style.getText());\n  }\n\n  /**\n   * @param {import(\"../../transform.js\").Transform} transform Transform.\n   */\n  setTransform(transform) {\n    this.transform_ = transform;\n  }\n\n  /**\n   * Render a geometry into the canvas.  Call\n   * {@link module:ol/render/canvas/Immediate~CanvasImmediateRenderer#setStyle renderer.setStyle()} first to set the rendering style.\n   *\n   * @param {import(\"../../geom/Geometry.js\").default|import(\"../Feature.js\").default} geometry The geometry to render.\n   * @api\n   */\n  drawGeometry(geometry) {\n    const type = geometry.getType();\n    switch (type) {\n      case 'Point':\n        this.drawPoint(\n          /** @type {import(\"../../geom/Point.js\").default} */ (geometry)\n        );\n        break;\n      case 'LineString':\n        this.drawLineString(\n          /** @type {import(\"../../geom/LineString.js\").default} */ (geometry)\n        );\n        break;\n      case 'Polygon':\n        this.drawPolygon(\n          /** @type {import(\"../../geom/Polygon.js\").default} */ (geometry)\n        );\n        break;\n      case 'MultiPoint':\n        this.drawMultiPoint(\n          /** @type {import(\"../../geom/MultiPoint.js\").default} */ (geometry)\n        );\n        break;\n      case 'MultiLineString':\n        this.drawMultiLineString(\n          /** @type {import(\"../../geom/MultiLineString.js\").default} */ (\n            geometry\n          )\n        );\n        break;\n      case 'MultiPolygon':\n        this.drawMultiPolygon(\n          /** @type {import(\"../../geom/MultiPolygon.js\").default} */ (geometry)\n        );\n        break;\n      case 'GeometryCollection':\n        this.drawGeometryCollection(\n          /** @type {import(\"../../geom/GeometryCollection.js\").default} */ (\n            geometry\n          )\n        );\n        break;\n      case 'Circle':\n        this.drawCircle(\n          /** @type {import(\"../../geom/Circle.js\").default} */ (geometry)\n        );\n        break;\n      default:\n    }\n  }\n\n  /**\n   * Render a feature into the canvas.  Note that any `zIndex` on the provided\n   * style will be ignored - features are rendered immediately in the order that\n   * this method is called.  If you need `zIndex` support, you should be using an\n   * {@link module:ol/layer/Vector~VectorLayer} instead.\n   *\n   * @param {import(\"../../Feature.js\").default} feature Feature.\n   * @param {import(\"../../style/Style.js\").default} style Style.\n   * @api\n   */\n  drawFeature(feature, style) {\n    const geometry = style.getGeometryFunction()(feature);\n    if (!geometry) {\n      return;\n    }\n    this.setStyle(style);\n    this.drawGeometry(geometry);\n  }\n\n  /**\n   * Render a GeometryCollection to the canvas.  Rendering is immediate and\n   * uses the current styles appropriate for each geometry in the collection.\n   *\n   * @param {import(\"../../geom/GeometryCollection.js\").default} geometry Geometry collection.\n   */\n  drawGeometryCollection(geometry) {\n    const geometries = geometry.getGeometriesArray();\n    for (let i = 0, ii = geometries.length; i < ii; ++i) {\n      this.drawGeometry(geometries[i]);\n    }\n  }\n\n  /**\n   * Render a Point geometry into the canvas.  Rendering is immediate and uses\n   * the current style.\n   *\n   * @param {import(\"../../geom/Point.js\").default|import(\"../Feature.js\").default} geometry Point geometry.\n   */\n  drawPoint(geometry) {\n    if (this.squaredTolerance_) {\n      geometry = /** @type {import(\"../../geom/Point.js\").default} */ (\n        geometry.simplifyTransformed(\n          this.squaredTolerance_,\n          this.userTransform_\n        )\n      );\n    }\n    const flatCoordinates = geometry.getFlatCoordinates();\n    const stride = geometry.getStride();\n    if (this.image_) {\n      this.drawImages_(flatCoordinates, 0, flatCoordinates.length, stride);\n    }\n    if (this.text_ !== '') {\n      this.drawText_(flatCoordinates, 0, flatCoordinates.length, stride);\n    }\n  }\n\n  /**\n   * Render a MultiPoint geometry  into the canvas.  Rendering is immediate and\n   * uses the current style.\n   *\n   * @param {import(\"../../geom/MultiPoint.js\").default|import(\"../Feature.js\").default} geometry MultiPoint geometry.\n   */\n  drawMultiPoint(geometry) {\n    if (this.squaredTolerance_) {\n      geometry = /** @type {import(\"../../geom/MultiPoint.js\").default} */ (\n        geometry.simplifyTransformed(\n          this.squaredTolerance_,\n          this.userTransform_\n        )\n      );\n    }\n    const flatCoordinates = geometry.getFlatCoordinates();\n    const stride = geometry.getStride();\n    if (this.image_) {\n      this.drawImages_(flatCoordinates, 0, flatCoordinates.length, stride);\n    }\n    if (this.text_ !== '') {\n      this.drawText_(flatCoordinates, 0, flatCoordinates.length, stride);\n    }\n  }\n\n  /**\n   * Render a LineString into the canvas.  Rendering is immediate and uses\n   * the current style.\n   *\n   * @param {import(\"../../geom/LineString.js\").default|import(\"../Feature.js\").default} geometry LineString geometry.\n   */\n  drawLineString(geometry) {\n    if (this.squaredTolerance_) {\n      geometry = /** @type {import(\"../../geom/LineString.js\").default} */ (\n        geometry.simplifyTransformed(\n          this.squaredTolerance_,\n          this.userTransform_\n        )\n      );\n    }\n    if (!intersects(this.extent_, geometry.getExtent())) {\n      return;\n    }\n    if (this.strokeState_) {\n      this.setContextStrokeState_(this.strokeState_);\n      const context = this.context_;\n      const flatCoordinates = geometry.getFlatCoordinates();\n      context.beginPath();\n      this.moveToLineTo_(\n        flatCoordinates,\n        0,\n        flatCoordinates.length,\n        geometry.getStride(),\n        false\n      );\n      context.stroke();\n    }\n    if (this.text_ !== '') {\n      const flatMidpoint = geometry.getFlatMidpoint();\n      this.drawText_(flatMidpoint, 0, 2, 2);\n    }\n  }\n\n  /**\n   * Render a MultiLineString geometry into the canvas.  Rendering is immediate\n   * and uses the current style.\n   *\n   * @param {import(\"../../geom/MultiLineString.js\").default|import(\"../Feature.js\").default} geometry MultiLineString geometry.\n   */\n  drawMultiLineString(geometry) {\n    if (this.squaredTolerance_) {\n      geometry =\n        /** @type {import(\"../../geom/MultiLineString.js\").default} */ (\n          geometry.simplifyTransformed(\n            this.squaredTolerance_,\n            this.userTransform_\n          )\n        );\n    }\n    const geometryExtent = geometry.getExtent();\n    if (!intersects(this.extent_, geometryExtent)) {\n      return;\n    }\n    if (this.strokeState_) {\n      this.setContextStrokeState_(this.strokeState_);\n      const context = this.context_;\n      const flatCoordinates = geometry.getFlatCoordinates();\n      let offset = 0;\n      const ends = /** @type {Array<number>} */ (geometry.getEnds());\n      const stride = geometry.getStride();\n      context.beginPath();\n      for (let i = 0, ii = ends.length; i < ii; ++i) {\n        offset = this.moveToLineTo_(\n          flatCoordinates,\n          offset,\n          ends[i],\n          stride,\n          false\n        );\n      }\n      context.stroke();\n    }\n    if (this.text_ !== '') {\n      const flatMidpoints = geometry.getFlatMidpoints();\n      this.drawText_(flatMidpoints, 0, flatMidpoints.length, 2);\n    }\n  }\n\n  /**\n   * Render a Polygon geometry into the canvas.  Rendering is immediate and uses\n   * the current style.\n   *\n   * @param {import(\"../../geom/Polygon.js\").default|import(\"../Feature.js\").default} geometry Polygon geometry.\n   */\n  drawPolygon(geometry) {\n    if (this.squaredTolerance_) {\n      geometry = /** @type {import(\"../../geom/Polygon.js\").default} */ (\n        geometry.simplifyTransformed(\n          this.squaredTolerance_,\n          this.userTransform_\n        )\n      );\n    }\n    if (!intersects(this.extent_, geometry.getExtent())) {\n      return;\n    }\n    if (this.strokeState_ || this.fillState_) {\n      if (this.fillState_) {\n        this.setContextFillState_(this.fillState_);\n      }\n      if (this.strokeState_) {\n        this.setContextStrokeState_(this.strokeState_);\n      }\n      const context = this.context_;\n      context.beginPath();\n      this.drawRings_(\n        geometry.getOrientedFlatCoordinates(),\n        0,\n        /** @type {Array<number>} */ (geometry.getEnds()),\n        geometry.getStride()\n      );\n      if (this.fillState_) {\n        context.fill();\n      }\n      if (this.strokeState_) {\n        context.stroke();\n      }\n    }\n    if (this.text_ !== '') {\n      const flatInteriorPoint = geometry.getFlatInteriorPoint();\n      this.drawText_(flatInteriorPoint, 0, 2, 2);\n    }\n  }\n\n  /**\n   * Render MultiPolygon geometry into the canvas.  Rendering is immediate and\n   * uses the current style.\n   * @param {import(\"../../geom/MultiPolygon.js\").default} geometry MultiPolygon geometry.\n   */\n  drawMultiPolygon(geometry) {\n    if (this.squaredTolerance_) {\n      geometry = /** @type {import(\"../../geom/MultiPolygon.js\").default} */ (\n        geometry.simplifyTransformed(\n          this.squaredTolerance_,\n          this.userTransform_\n        )\n      );\n    }\n    if (!intersects(this.extent_, geometry.getExtent())) {\n      return;\n    }\n    if (this.strokeState_ || this.fillState_) {\n      if (this.fillState_) {\n        this.setContextFillState_(this.fillState_);\n      }\n      if (this.strokeState_) {\n        this.setContextStrokeState_(this.strokeState_);\n      }\n      const context = this.context_;\n      const flatCoordinates = geometry.getOrientedFlatCoordinates();\n      let offset = 0;\n      const endss = geometry.getEndss();\n      const stride = geometry.getStride();\n      context.beginPath();\n      for (let i = 0, ii = endss.length; i < ii; ++i) {\n        const ends = endss[i];\n        offset = this.drawRings_(flatCoordinates, offset, ends, stride);\n      }\n      if (this.fillState_) {\n        context.fill();\n      }\n      if (this.strokeState_) {\n        context.stroke();\n      }\n    }\n    if (this.text_ !== '') {\n      const flatInteriorPoints = geometry.getFlatInteriorPoints();\n      this.drawText_(flatInteriorPoints, 0, flatInteriorPoints.length, 2);\n    }\n  }\n\n  /**\n   * @param {import(\"../canvas.js\").FillState} fillState Fill state.\n   * @private\n   */\n  setContextFillState_(fillState) {\n    const context = this.context_;\n    const contextFillState = this.contextFillState_;\n    if (!contextFillState) {\n      context.fillStyle = fillState.fillStyle;\n      this.contextFillState_ = {\n        fillStyle: fillState.fillStyle,\n      };\n    } else {\n      if (contextFillState.fillStyle != fillState.fillStyle) {\n        contextFillState.fillStyle = fillState.fillStyle;\n        context.fillStyle = fillState.fillStyle;\n      }\n    }\n  }\n\n  /**\n   * @param {import(\"../canvas.js\").StrokeState} strokeState Stroke state.\n   * @private\n   */\n  setContextStrokeState_(strokeState) {\n    const context = this.context_;\n    const contextStrokeState = this.contextStrokeState_;\n    if (!contextStrokeState) {\n      context.lineCap = strokeState.lineCap;\n      context.setLineDash(strokeState.lineDash);\n      context.lineDashOffset = strokeState.lineDashOffset;\n      context.lineJoin = strokeState.lineJoin;\n      context.lineWidth = strokeState.lineWidth;\n      context.miterLimit = strokeState.miterLimit;\n      context.strokeStyle = strokeState.strokeStyle;\n      this.contextStrokeState_ = {\n        lineCap: strokeState.lineCap,\n        lineDash: strokeState.lineDash,\n        lineDashOffset: strokeState.lineDashOffset,\n        lineJoin: strokeState.lineJoin,\n        lineWidth: strokeState.lineWidth,\n        miterLimit: strokeState.miterLimit,\n        strokeStyle: strokeState.strokeStyle,\n      };\n    } else {\n      if (contextStrokeState.lineCap != strokeState.lineCap) {\n        contextStrokeState.lineCap = strokeState.lineCap;\n        context.lineCap = strokeState.lineCap;\n      }\n      if (!equals(contextStrokeState.lineDash, strokeState.lineDash)) {\n        context.setLineDash(\n          (contextStrokeState.lineDash = strokeState.lineDash)\n        );\n      }\n      if (contextStrokeState.lineDashOffset != strokeState.lineDashOffset) {\n        contextStrokeState.lineDashOffset = strokeState.lineDashOffset;\n        context.lineDashOffset = strokeState.lineDashOffset;\n      }\n      if (contextStrokeState.lineJoin != strokeState.lineJoin) {\n        contextStrokeState.lineJoin = strokeState.lineJoin;\n        context.lineJoin = strokeState.lineJoin;\n      }\n      if (contextStrokeState.lineWidth != strokeState.lineWidth) {\n        contextStrokeState.lineWidth = strokeState.lineWidth;\n        context.lineWidth = strokeState.lineWidth;\n      }\n      if (contextStrokeState.miterLimit != strokeState.miterLimit) {\n        contextStrokeState.miterLimit = strokeState.miterLimit;\n        context.miterLimit = strokeState.miterLimit;\n      }\n      if (contextStrokeState.strokeStyle != strokeState.strokeStyle) {\n        contextStrokeState.strokeStyle = strokeState.strokeStyle;\n        context.strokeStyle = strokeState.strokeStyle;\n      }\n    }\n  }\n\n  /**\n   * @param {import(\"../canvas.js\").TextState} textState Text state.\n   * @private\n   */\n  setContextTextState_(textState) {\n    const context = this.context_;\n    const contextTextState = this.contextTextState_;\n    const textAlign = textState.textAlign\n      ? textState.textAlign\n      : defaultTextAlign;\n    if (!contextTextState) {\n      context.font = textState.font;\n      context.textAlign = textAlign;\n      context.textBaseline = textState.textBaseline;\n      this.contextTextState_ = {\n        font: textState.font,\n        textAlign: textAlign,\n        textBaseline: textState.textBaseline,\n      };\n    } else {\n      if (contextTextState.font != textState.font) {\n        contextTextState.font = textState.font;\n        context.font = textState.font;\n      }\n      if (contextTextState.textAlign != textAlign) {\n        contextTextState.textAlign = textAlign;\n        context.textAlign = textAlign;\n      }\n      if (contextTextState.textBaseline != textState.textBaseline) {\n        contextTextState.textBaseline = textState.textBaseline;\n        context.textBaseline = textState.textBaseline;\n      }\n    }\n  }\n\n  /**\n   * Set the fill and stroke style for subsequent draw operations.  To clear\n   * either fill or stroke styles, pass null for the appropriate parameter.\n   *\n   * @param {import(\"../../style/Fill.js\").default} fillStyle Fill style.\n   * @param {import(\"../../style/Stroke.js\").default} strokeStyle Stroke style.\n   */\n  setFillStrokeStyle(fillStyle, strokeStyle) {\n    if (!fillStyle) {\n      this.fillState_ = null;\n    } else {\n      const fillStyleColor = fillStyle.getColor();\n      this.fillState_ = {\n        fillStyle: asColorLike(\n          fillStyleColor ? fillStyleColor : defaultFillStyle\n        ),\n      };\n    }\n    if (!strokeStyle) {\n      this.strokeState_ = null;\n    } else {\n      const strokeStyleColor = strokeStyle.getColor();\n      const strokeStyleLineCap = strokeStyle.getLineCap();\n      const strokeStyleLineDash = strokeStyle.getLineDash();\n      const strokeStyleLineDashOffset = strokeStyle.getLineDashOffset();\n      const strokeStyleLineJoin = strokeStyle.getLineJoin();\n      const strokeStyleWidth = strokeStyle.getWidth();\n      const strokeStyleMiterLimit = strokeStyle.getMiterLimit();\n      const lineDash = strokeStyleLineDash\n        ? strokeStyleLineDash\n        : defaultLineDash;\n      this.strokeState_ = {\n        lineCap:\n          strokeStyleLineCap !== undefined\n            ? strokeStyleLineCap\n            : defaultLineCap,\n        lineDash:\n          this.pixelRatio_ === 1\n            ? lineDash\n            : lineDash.map((n) => n * this.pixelRatio_),\n        lineDashOffset:\n          (strokeStyleLineDashOffset\n            ? strokeStyleLineDashOffset\n            : defaultLineDashOffset) * this.pixelRatio_,\n        lineJoin:\n          strokeStyleLineJoin !== undefined\n            ? strokeStyleLineJoin\n            : defaultLineJoin,\n        lineWidth:\n          (strokeStyleWidth !== undefined\n            ? strokeStyleWidth\n            : defaultLineWidth) * this.pixelRatio_,\n        miterLimit:\n          strokeStyleMiterLimit !== undefined\n            ? strokeStyleMiterLimit\n            : defaultMiterLimit,\n        strokeStyle: asColorLike(\n          strokeStyleColor ? strokeStyleColor : defaultStrokeStyle\n        ),\n      };\n    }\n  }\n\n  /**\n   * Set the image style for subsequent draw operations.  Pass null to remove\n   * the image style.\n   *\n   * @param {import(\"../../style/Image.js\").default} imageStyle Image style.\n   */\n  setImageStyle(imageStyle) {\n    let imageSize;\n    if (!imageStyle || !(imageSize = imageStyle.getSize())) {\n      this.image_ = null;\n      return;\n    }\n    const imagePixelRatio = imageStyle.getPixelRatio(this.pixelRatio_);\n    const imageAnchor = imageStyle.getAnchor();\n    const imageOrigin = imageStyle.getOrigin();\n    this.image_ = imageStyle.getImage(this.pixelRatio_);\n    this.imageAnchorX_ = imageAnchor[0] * imagePixelRatio;\n    this.imageAnchorY_ = imageAnchor[1] * imagePixelRatio;\n    this.imageHeight_ = imageSize[1] * imagePixelRatio;\n    this.imageOpacity_ = imageStyle.getOpacity();\n    this.imageOriginX_ = imageOrigin[0];\n    this.imageOriginY_ = imageOrigin[1];\n    this.imageRotateWithView_ = imageStyle.getRotateWithView();\n    this.imageRotation_ = imageStyle.getRotation();\n    const imageScale = imageStyle.getScaleArray();\n    this.imageScale_ = [\n      (imageScale[0] * this.pixelRatio_) / imagePixelRatio,\n      (imageScale[1] * this.pixelRatio_) / imagePixelRatio,\n    ];\n    this.imageWidth_ = imageSize[0] * imagePixelRatio;\n  }\n\n  /**\n   * Set the text style for subsequent draw operations.  Pass null to\n   * remove the text style.\n   *\n   * @param {import(\"../../style/Text.js\").default} textStyle Text style.\n   */\n  setTextStyle(textStyle) {\n    if (!textStyle) {\n      this.text_ = '';\n    } else {\n      const textFillStyle = textStyle.getFill();\n      if (!textFillStyle) {\n        this.textFillState_ = null;\n      } else {\n        const textFillStyleColor = textFillStyle.getColor();\n        this.textFillState_ = {\n          fillStyle: asColorLike(\n            textFillStyleColor ? textFillStyleColor : defaultFillStyle\n          ),\n        };\n      }\n      const textStrokeStyle = textStyle.getStroke();\n      if (!textStrokeStyle) {\n        this.textStrokeState_ = null;\n      } else {\n        const textStrokeStyleColor = textStrokeStyle.getColor();\n        const textStrokeStyleLineCap = textStrokeStyle.getLineCap();\n        const textStrokeStyleLineDash = textStrokeStyle.getLineDash();\n        const textStrokeStyleLineDashOffset =\n          textStrokeStyle.getLineDashOffset();\n        const textStrokeStyleLineJoin = textStrokeStyle.getLineJoin();\n        const textStrokeStyleWidth = textStrokeStyle.getWidth();\n        const textStrokeStyleMiterLimit = textStrokeStyle.getMiterLimit();\n        this.textStrokeState_ = {\n          lineCap:\n            textStrokeStyleLineCap !== undefined\n              ? textStrokeStyleLineCap\n              : defaultLineCap,\n          lineDash: textStrokeStyleLineDash\n            ? textStrokeStyleLineDash\n            : defaultLineDash,\n          lineDashOffset: textStrokeStyleLineDashOffset\n            ? textStrokeStyleLineDashOffset\n            : defaultLineDashOffset,\n          lineJoin:\n            textStrokeStyleLineJoin !== undefined\n              ? textStrokeStyleLineJoin\n              : defaultLineJoin,\n          lineWidth:\n            textStrokeStyleWidth !== undefined\n              ? textStrokeStyleWidth\n              : defaultLineWidth,\n          miterLimit:\n            textStrokeStyleMiterLimit !== undefined\n              ? textStrokeStyleMiterLimit\n              : defaultMiterLimit,\n          strokeStyle: asColorLike(\n            textStrokeStyleColor ? textStrokeStyleColor : defaultStrokeStyle\n          ),\n        };\n      }\n      const textFont = textStyle.getFont();\n      const textOffsetX = textStyle.getOffsetX();\n      const textOffsetY = textStyle.getOffsetY();\n      const textRotateWithView = textStyle.getRotateWithView();\n      const textRotation = textStyle.getRotation();\n      const textScale = textStyle.getScaleArray();\n      const textText = textStyle.getText();\n      const textTextAlign = textStyle.getTextAlign();\n      const textTextBaseline = textStyle.getTextBaseline();\n      this.textState_ = {\n        font: textFont !== undefined ? textFont : defaultFont,\n        textAlign:\n          textTextAlign !== undefined ? textTextAlign : defaultTextAlign,\n        textBaseline:\n          textTextBaseline !== undefined\n            ? textTextBaseline\n            : defaultTextBaseline,\n      };\n      this.text_ =\n        textText !== undefined\n          ? Array.isArray(textText)\n            ? textText.reduce((acc, t, i) => (acc += i % 2 ? ' ' : t), '')\n            : textText\n          : '';\n      this.textOffsetX_ =\n        textOffsetX !== undefined ? this.pixelRatio_ * textOffsetX : 0;\n      this.textOffsetY_ =\n        textOffsetY !== undefined ? this.pixelRatio_ * textOffsetY : 0;\n      this.textRotateWithView_ =\n        textRotateWithView !== undefined ? textRotateWithView : false;\n      this.textRotation_ = textRotation !== undefined ? textRotation : 0;\n      this.textScale_ = [\n        this.pixelRatio_ * textScale[0],\n        this.pixelRatio_ * textScale[1],\n      ];\n    }\n  }\n}\n\nexport default CanvasImmediateRenderer;\n","/**\n * @module ol/render/canvas/Instruction\n */\n\n/**\n * @enum {number}\n */\nconst Instruction = {\n  BEGIN_GEOMETRY: 0,\n  BEGIN_PATH: 1,\n  CIRCLE: 2,\n  CLOSE_PATH: 3,\n  CUSTOM: 4,\n  DRAW_CHARS: 5,\n  DRAW_IMAGE: 6,\n  END_GEOMETRY: 7,\n  FILL: 8,\n  MOVE_TO_LINE_TO: 9,\n  SET_FILL_STYLE: 10,\n  SET_STROKE_STYLE: 11,\n  STROKE: 12,\n};\n\n/**\n * @type {Array<Instruction>}\n */\nexport const fillInstruction = [Instruction.FILL];\n\n/**\n * @type {Array<Instruction>}\n */\nexport const strokeInstruction = [Instruction.STROKE];\n\n/**\n * @type {Array<Instruction>}\n */\nexport const beginPathInstruction = [Instruction.BEGIN_PATH];\n\n/**\n * @type {Array<Instruction>}\n */\nexport const closePathInstruction = [Instruction.CLOSE_PATH];\n\nexport default Instruction;\n","/**\n * @module ol/render/canvas/LineStringBuilder\n */\nimport CanvasBuilder from './Builder.js';\nimport CanvasInstruction, {\n  beginPathInstruction,\n  strokeInstruction,\n} from './Instruction.js';\nimport {defaultLineDash, defaultLineDashOffset} from '../canvas.js';\n\nclass CanvasLineStringBuilder extends CanvasBuilder {\n  /**\n   * @param {number} tolerance Tolerance.\n   * @param {import(\"../../extent.js\").Extent} maxExtent Maximum extent.\n   * @param {number} resolution Resolution.\n   * @param {number} pixelRatio Pixel ratio.\n   */\n  constructor(tolerance, maxExtent, resolution, pixelRatio) {\n    super(tolerance, maxExtent, resolution, pixelRatio);\n  }\n\n  /**\n   * @param {Array<number>} flatCoordinates Flat coordinates.\n   * @param {number} offset Offset.\n   * @param {number} end End.\n   * @param {number} stride Stride.\n   * @private\n   * @return {number} end.\n   */\n  drawFlatCoordinates_(flatCoordinates, offset, end, stride) {\n    const myBegin = this.coordinates.length;\n    const myEnd = this.appendFlatLineCoordinates(\n      flatCoordinates,\n      offset,\n      end,\n      stride,\n      false,\n      false\n    );\n    const moveToLineToInstruction = [\n      CanvasInstruction.MOVE_TO_LINE_TO,\n      myBegin,\n      myEnd,\n    ];\n    this.instructions.push(moveToLineToInstruction);\n    this.hitDetectionInstructions.push(moveToLineToInstruction);\n    return end;\n  }\n\n  /**\n   * @param {import(\"../../geom/LineString.js\").default|import(\"../Feature.js\").default} lineStringGeometry Line string geometry.\n   * @param {import(\"../../Feature.js\").FeatureLike} feature Feature.\n   */\n  drawLineString(lineStringGeometry, feature) {\n    const state = this.state;\n    const strokeStyle = state.strokeStyle;\n    const lineWidth = state.lineWidth;\n    if (strokeStyle === undefined || lineWidth === undefined) {\n      return;\n    }\n    this.updateStrokeStyle(state, this.applyStroke);\n    this.beginGeometry(lineStringGeometry, feature);\n    this.hitDetectionInstructions.push(\n      [\n        CanvasInstruction.SET_STROKE_STYLE,\n        state.strokeStyle,\n        state.lineWidth,\n        state.lineCap,\n        state.lineJoin,\n        state.miterLimit,\n        defaultLineDash,\n        defaultLineDashOffset,\n      ],\n      beginPathInstruction\n    );\n    const flatCoordinates = lineStringGeometry.getFlatCoordinates();\n    const stride = lineStringGeometry.getStride();\n    this.drawFlatCoordinates_(\n      flatCoordinates,\n      0,\n      flatCoordinates.length,\n      stride\n    );\n    this.hitDetectionInstructions.push(strokeInstruction);\n    this.endGeometry(feature);\n  }\n\n  /**\n   * @param {import(\"../../geom/MultiLineString.js\").default|import(\"../Feature.js\").default} multiLineStringGeometry MultiLineString geometry.\n   * @param {import(\"../../Feature.js\").FeatureLike} feature Feature.\n   */\n  drawMultiLineString(multiLineStringGeometry, feature) {\n    const state = this.state;\n    const strokeStyle = state.strokeStyle;\n    const lineWidth = state.lineWidth;\n    if (strokeStyle === undefined || lineWidth === undefined) {\n      return;\n    }\n    this.updateStrokeStyle(state, this.applyStroke);\n    this.beginGeometry(multiLineStringGeometry, feature);\n    this.hitDetectionInstructions.push(\n      [\n        CanvasInstruction.SET_STROKE_STYLE,\n        state.strokeStyle,\n        state.lineWidth,\n        state.lineCap,\n        state.lineJoin,\n        state.miterLimit,\n        defaultLineDash,\n        defaultLineDashOffset,\n      ],\n      beginPathInstruction\n    );\n    const ends = multiLineStringGeometry.getEnds();\n    const flatCoordinates = multiLineStringGeometry.getFlatCoordinates();\n    const stride = multiLineStringGeometry.getStride();\n    let offset = 0;\n    for (let i = 0, ii = ends.length; i < ii; ++i) {\n      offset = this.drawFlatCoordinates_(\n        flatCoordinates,\n        offset,\n        /** @type {number} */ (ends[i]),\n        stride\n      );\n    }\n    this.hitDetectionInstructions.push(strokeInstruction);\n    this.endGeometry(feature);\n  }\n\n  /**\n   * @return {import(\"../canvas.js\").SerializableInstructions} the serializable instructions.\n   */\n  finish() {\n    const state = this.state;\n    if (\n      state.lastStroke != undefined &&\n      state.lastStroke != this.coordinates.length\n    ) {\n      this.instructions.push(strokeInstruction);\n    }\n    this.reverseHitDetectionInstructions();\n    this.state = null;\n    return super.finish();\n  }\n\n  /**\n   * @param {import(\"../canvas.js\").FillStrokeState} state State.\n   */\n  applyStroke(state) {\n    if (\n      state.lastStroke != undefined &&\n      state.lastStroke != this.coordinates.length\n    ) {\n      this.instructions.push(strokeInstruction);\n      state.lastStroke = this.coordinates.length;\n    }\n    state.lastStroke = 0;\n    super.applyStroke(state);\n    this.instructions.push(beginPathInstruction);\n  }\n}\n\nexport default CanvasLineStringBuilder;\n","/**\n * @module ol/render/canvas/PolygonBuilder\n */\nimport CanvasBuilder from './Builder.js';\nimport CanvasInstruction, {\n  beginPathInstruction,\n  closePathInstruction,\n  fillInstruction,\n  strokeInstruction,\n} from './Instruction.js';\nimport {\n  defaultFillStyle,\n  defaultLineDash,\n  defaultLineDashOffset,\n} from '../canvas.js';\nimport {snap} from '../../geom/flat/simplify.js';\n\nclass CanvasPolygonBuilder extends CanvasBuilder {\n  /**\n   * @param {number} tolerance Tolerance.\n   * @param {import(\"../../extent.js\").Extent} maxExtent Maximum extent.\n   * @param {number} resolution Resolution.\n   * @param {number} pixelRatio Pixel ratio.\n   */\n  constructor(tolerance, maxExtent, resolution, pixelRatio) {\n    super(tolerance, maxExtent, resolution, pixelRatio);\n  }\n\n  /**\n   * @param {Array<number>} flatCoordinates Flat coordinates.\n   * @param {number} offset Offset.\n   * @param {Array<number>} ends Ends.\n   * @param {number} stride Stride.\n   * @private\n   * @return {number} End.\n   */\n  drawFlatCoordinatess_(flatCoordinates, offset, ends, stride) {\n    const state = this.state;\n    const fill = state.fillStyle !== undefined;\n    const stroke = state.strokeStyle !== undefined;\n    const numEnds = ends.length;\n    this.instructions.push(beginPathInstruction);\n    this.hitDetectionInstructions.push(beginPathInstruction);\n    for (let i = 0; i < numEnds; ++i) {\n      const end = ends[i];\n      const myBegin = this.coordinates.length;\n      const myEnd = this.appendFlatLineCoordinates(\n        flatCoordinates,\n        offset,\n        end,\n        stride,\n        true,\n        !stroke\n      );\n      const moveToLineToInstruction = [\n        CanvasInstruction.MOVE_TO_LINE_TO,\n        myBegin,\n        myEnd,\n      ];\n      this.instructions.push(moveToLineToInstruction);\n      this.hitDetectionInstructions.push(moveToLineToInstruction);\n      if (stroke) {\n        // Performance optimization: only call closePath() when we have a stroke.\n        // Otherwise the ring is closed already (see appendFlatLineCoordinates above).\n        this.instructions.push(closePathInstruction);\n        this.hitDetectionInstructions.push(closePathInstruction);\n      }\n      offset = end;\n    }\n    if (fill) {\n      this.instructions.push(fillInstruction);\n      this.hitDetectionInstructions.push(fillInstruction);\n    }\n    if (stroke) {\n      this.instructions.push(strokeInstruction);\n      this.hitDetectionInstructions.push(strokeInstruction);\n    }\n    return offset;\n  }\n\n  /**\n   * @param {import(\"../../geom/Circle.js\").default} circleGeometry Circle geometry.\n   * @param {import(\"../../Feature.js\").default} feature Feature.\n   */\n  drawCircle(circleGeometry, feature) {\n    const state = this.state;\n    const fillStyle = state.fillStyle;\n    const strokeStyle = state.strokeStyle;\n    if (fillStyle === undefined && strokeStyle === undefined) {\n      return;\n    }\n    this.setFillStrokeStyles_();\n    this.beginGeometry(circleGeometry, feature);\n    if (state.fillStyle !== undefined) {\n      this.hitDetectionInstructions.push([\n        CanvasInstruction.SET_FILL_STYLE,\n        defaultFillStyle,\n      ]);\n    }\n    if (state.strokeStyle !== undefined) {\n      this.hitDetectionInstructions.push([\n        CanvasInstruction.SET_STROKE_STYLE,\n        state.strokeStyle,\n        state.lineWidth,\n        state.lineCap,\n        state.lineJoin,\n        state.miterLimit,\n        defaultLineDash,\n        defaultLineDashOffset,\n      ]);\n    }\n    const flatCoordinates = circleGeometry.getFlatCoordinates();\n    const stride = circleGeometry.getStride();\n    const myBegin = this.coordinates.length;\n    this.appendFlatLineCoordinates(\n      flatCoordinates,\n      0,\n      flatCoordinates.length,\n      stride,\n      false,\n      false\n    );\n    const circleInstruction = [CanvasInstruction.CIRCLE, myBegin];\n    this.instructions.push(beginPathInstruction, circleInstruction);\n    this.hitDetectionInstructions.push(beginPathInstruction, circleInstruction);\n    if (state.fillStyle !== undefined) {\n      this.instructions.push(fillInstruction);\n      this.hitDetectionInstructions.push(fillInstruction);\n    }\n    if (state.strokeStyle !== undefined) {\n      this.instructions.push(strokeInstruction);\n      this.hitDetectionInstructions.push(strokeInstruction);\n    }\n    this.endGeometry(feature);\n  }\n\n  /**\n   * @param {import(\"../../geom/Polygon.js\").default|import(\"../Feature.js\").default} polygonGeometry Polygon geometry.\n   * @param {import(\"../../Feature.js\").FeatureLike} feature Feature.\n   */\n  drawPolygon(polygonGeometry, feature) {\n    const state = this.state;\n    const fillStyle = state.fillStyle;\n    const strokeStyle = state.strokeStyle;\n    if (fillStyle === undefined && strokeStyle === undefined) {\n      return;\n    }\n    this.setFillStrokeStyles_();\n    this.beginGeometry(polygonGeometry, feature);\n    if (state.fillStyle !== undefined) {\n      this.hitDetectionInstructions.push([\n        CanvasInstruction.SET_FILL_STYLE,\n        defaultFillStyle,\n      ]);\n    }\n    if (state.strokeStyle !== undefined) {\n      this.hitDetectionInstructions.push([\n        CanvasInstruction.SET_STROKE_STYLE,\n        state.strokeStyle,\n        state.lineWidth,\n        state.lineCap,\n        state.lineJoin,\n        state.miterLimit,\n        defaultLineDash,\n        defaultLineDashOffset,\n      ]);\n    }\n    const ends = polygonGeometry.getEnds();\n    const flatCoordinates = polygonGeometry.getOrientedFlatCoordinates();\n    const stride = polygonGeometry.getStride();\n    this.drawFlatCoordinatess_(\n      flatCoordinates,\n      0,\n      /** @type {Array<number>} */ (ends),\n      stride\n    );\n    this.endGeometry(feature);\n  }\n\n  /**\n   * @param {import(\"../../geom/MultiPolygon.js\").default} multiPolygonGeometry MultiPolygon geometry.\n   * @param {import(\"../../Feature.js\").FeatureLike} feature Feature.\n   */\n  drawMultiPolygon(multiPolygonGeometry, feature) {\n    const state = this.state;\n    const fillStyle = state.fillStyle;\n    const strokeStyle = state.strokeStyle;\n    if (fillStyle === undefined && strokeStyle === undefined) {\n      return;\n    }\n    this.setFillStrokeStyles_();\n    this.beginGeometry(multiPolygonGeometry, feature);\n    if (state.fillStyle !== undefined) {\n      this.hitDetectionInstructions.push([\n        CanvasInstruction.SET_FILL_STYLE,\n        defaultFillStyle,\n      ]);\n    }\n    if (state.strokeStyle !== undefined) {\n      this.hitDetectionInstructions.push([\n        CanvasInstruction.SET_STROKE_STYLE,\n        state.strokeStyle,\n        state.lineWidth,\n        state.lineCap,\n        state.lineJoin,\n        state.miterLimit,\n        defaultLineDash,\n        defaultLineDashOffset,\n      ]);\n    }\n    const endss = multiPolygonGeometry.getEndss();\n    const flatCoordinates = multiPolygonGeometry.getOrientedFlatCoordinates();\n    const stride = multiPolygonGeometry.getStride();\n    let offset = 0;\n    for (let i = 0, ii = endss.length; i < ii; ++i) {\n      offset = this.drawFlatCoordinatess_(\n        flatCoordinates,\n        offset,\n        endss[i],\n        stride\n      );\n    }\n    this.endGeometry(feature);\n  }\n\n  /**\n   * @return {import(\"../canvas.js\").SerializableInstructions} the serializable instructions.\n   */\n  finish() {\n    this.reverseHitDetectionInstructions();\n    this.state = null;\n    // We want to preserve topology when drawing polygons.  Polygons are\n    // simplified using quantization and point elimination. However, we might\n    // have received a mix of quantized and non-quantized geometries, so ensure\n    // that all are quantized by quantizing all coordinates in the batch.\n    const tolerance = this.tolerance;\n    if (tolerance !== 0) {\n      const coordinates = this.coordinates;\n      for (let i = 0, ii = coordinates.length; i < ii; ++i) {\n        coordinates[i] = snap(coordinates[i], tolerance);\n      }\n    }\n    return super.finish();\n  }\n\n  /**\n   * @private\n   */\n  setFillStrokeStyles_() {\n    const state = this.state;\n    const fillStyle = state.fillStyle;\n    if (fillStyle !== undefined) {\n      this.updateFillStyle(state, this.createFill);\n    }\n    if (state.strokeStyle !== undefined) {\n      this.updateStrokeStyle(state, this.applyStroke);\n    }\n  }\n}\n\nexport default CanvasPolygonBuilder;\n","/**\n * @module ol/render/canvas/TextBuilder\n */\nimport CanvasBuilder from './Builder.js';\nimport CanvasInstruction from './Instruction.js';\nimport {asColorLike} from '../../colorlike.js';\nimport {\n  defaultFillStyle,\n  defaultFont,\n  defaultLineCap,\n  defaultLineDash,\n  defaultLineDashOffset,\n  defaultLineJoin,\n  defaultLineWidth,\n  defaultMiterLimit,\n  defaultPadding,\n  defaultStrokeStyle,\n  defaultTextAlign,\n  defaultTextBaseline,\n  registerFont,\n} from '../canvas.js';\nimport {getUid} from '../../util.js';\nimport {intersects} from '../../extent.js';\nimport {lineChunk} from '../../geom/flat/linechunk.js';\nimport {matchingChunk} from '../../geom/flat/straightchunk.js';\n/**\n * @const\n * @type {{left: 0, center: 0.5, right: 1, top: 0, middle: 0.5, hanging: 0.2, alphabetic: 0.8, ideographic: 0.8, bottom: 1}}\n */\nexport const TEXT_ALIGN = {\n  'left': 0,\n  'center': 0.5,\n  'right': 1,\n  'top': 0,\n  'middle': 0.5,\n  'hanging': 0.2,\n  'alphabetic': 0.8,\n  'ideographic': 0.8,\n  'bottom': 1,\n};\n\nclass CanvasTextBuilder extends CanvasBuilder {\n  /**\n   * @param {number} tolerance Tolerance.\n   * @param {import(\"../../extent.js\").Extent} maxExtent Maximum extent.\n   * @param {number} resolution Resolution.\n   * @param {number} pixelRatio Pixel ratio.\n   */\n  constructor(tolerance, maxExtent, resolution, pixelRatio) {\n    super(tolerance, maxExtent, resolution, pixelRatio);\n\n    /**\n     * @private\n     * @type {Array<HTMLCanvasElement>}\n     */\n    this.labels_ = null;\n\n    /**\n     * @private\n     * @type {string|Array<string>}\n     */\n    this.text_ = '';\n\n    /**\n     * @private\n     * @type {number}\n     */\n    this.textOffsetX_ = 0;\n\n    /**\n     * @private\n     * @type {number}\n     */\n    this.textOffsetY_ = 0;\n\n    /**\n     * @private\n     * @type {boolean|undefined}\n     */\n    this.textRotateWithView_ = undefined;\n\n    /**\n     * @private\n     * @type {number}\n     */\n    this.textRotation_ = 0;\n\n    /**\n     * @private\n     * @type {?import(\"../canvas.js\").FillState}\n     */\n    this.textFillState_ = null;\n\n    /**\n     * @type {!Object<string, import(\"../canvas.js\").FillState>}\n     */\n    this.fillStates = {};\n    this.fillStates[defaultFillStyle] = {fillStyle: defaultFillStyle};\n\n    /**\n     * @private\n     * @type {?import(\"../canvas.js\").StrokeState}\n     */\n    this.textStrokeState_ = null;\n\n    /**\n     * @type {!Object<string, import(\"../canvas.js\").StrokeState>}\n     */\n    this.strokeStates = {};\n\n    /**\n     * @private\n     * @type {import(\"../canvas.js\").TextState}\n     */\n    this.textState_ = /** @type {import(\"../canvas.js\").TextState} */ ({});\n\n    /**\n     * @type {!Object<string, import(\"../canvas.js\").TextState>}\n     */\n    this.textStates = {};\n\n    /**\n     * @private\n     * @type {string}\n     */\n    this.textKey_ = '';\n\n    /**\n     * @private\n     * @type {string}\n     */\n    this.fillKey_ = '';\n\n    /**\n     * @private\n     * @type {string}\n     */\n    this.strokeKey_ = '';\n\n    /**\n     * Data shared with an image builder for combined decluttering.\n     * @private\n     * @type {import(\"../canvas.js\").DeclutterImageWithText}\n     */\n    this.declutterImageWithText_ = undefined;\n  }\n\n  /**\n   * @return {import(\"../canvas.js\").SerializableInstructions} the serializable instructions.\n   */\n  finish() {\n    const instructions = super.finish();\n    instructions.textStates = this.textStates;\n    instructions.fillStates = this.fillStates;\n    instructions.strokeStates = this.strokeStates;\n    return instructions;\n  }\n\n  /**\n   * @param {import(\"../../geom/SimpleGeometry.js\").default|import(\"../Feature.js\").default} geometry Geometry.\n   * @param {import(\"../../Feature.js\").FeatureLike} feature Feature.\n   */\n  drawText(geometry, feature) {\n    const fillState = this.textFillState_;\n    const strokeState = this.textStrokeState_;\n    const textState = this.textState_;\n    if (this.text_ === '' || !textState || (!fillState && !strokeState)) {\n      return;\n    }\n\n    const coordinates = this.coordinates;\n    let begin = coordinates.length;\n\n    const geometryType = geometry.getType();\n    let flatCoordinates = null;\n    let stride = geometry.getStride();\n\n    if (\n      textState.placement === 'line' &&\n      (geometryType == 'LineString' ||\n        geometryType == 'MultiLineString' ||\n        geometryType == 'Polygon' ||\n        geometryType == 'MultiPolygon')\n    ) {\n      if (!intersects(this.getBufferedMaxExtent(), geometry.getExtent())) {\n        return;\n      }\n      let ends;\n      flatCoordinates = geometry.getFlatCoordinates();\n      if (geometryType == 'LineString') {\n        ends = [flatCoordinates.length];\n      } else if (geometryType == 'MultiLineString') {\n        ends = /** @type {import(\"../../geom/MultiLineString.js\").default} */ (\n          geometry\n        ).getEnds();\n      } else if (geometryType == 'Polygon') {\n        ends = /** @type {import(\"../../geom/Polygon.js\").default} */ (geometry)\n          .getEnds()\n          .slice(0, 1);\n      } else if (geometryType == 'MultiPolygon') {\n        const endss =\n          /** @type {import(\"../../geom/MultiPolygon.js\").default} */ (\n            geometry\n          ).getEndss();\n        ends = [];\n        for (let i = 0, ii = endss.length; i < ii; ++i) {\n          ends.push(endss[i][0]);\n        }\n      }\n      this.beginGeometry(geometry, feature);\n      const repeat = textState.repeat;\n      const textAlign = repeat ? undefined : textState.textAlign;\n      // No `justify` support for line placement.\n      let flatOffset = 0;\n      for (let o = 0, oo = ends.length; o < oo; ++o) {\n        let chunks;\n        if (repeat) {\n          chunks = lineChunk(\n            repeat * this.resolution,\n            flatCoordinates,\n            flatOffset,\n            ends[o],\n            stride\n          );\n        } else {\n          chunks = [flatCoordinates.slice(flatOffset, ends[o])];\n        }\n        for (let c = 0, cc = chunks.length; c < cc; ++c) {\n          const chunk = chunks[c];\n          let chunkBegin = 0;\n          let chunkEnd = chunk.length;\n          if (textAlign == undefined) {\n            const range = matchingChunk(\n              textState.maxAngle,\n              chunk,\n              0,\n              chunk.length,\n              2\n            );\n            chunkBegin = range[0];\n            chunkEnd = range[1];\n          }\n          for (let i = chunkBegin; i < chunkEnd; i += stride) {\n            coordinates.push(chunk[i], chunk[i + 1]);\n          }\n          const end = coordinates.length;\n          flatOffset = ends[o];\n          this.drawChars_(begin, end);\n          begin = end;\n        }\n      }\n      this.endGeometry(feature);\n    } else {\n      let geometryWidths = textState.overflow ? null : [];\n      switch (geometryType) {\n        case 'Point':\n        case 'MultiPoint':\n          flatCoordinates =\n            /** @type {import(\"../../geom/MultiPoint.js\").default} */ (\n              geometry\n            ).getFlatCoordinates();\n          break;\n        case 'LineString':\n          flatCoordinates =\n            /** @type {import(\"../../geom/LineString.js\").default} */ (\n              geometry\n            ).getFlatMidpoint();\n          break;\n        case 'Circle':\n          flatCoordinates =\n            /** @type {import(\"../../geom/Circle.js\").default} */ (\n              geometry\n            ).getCenter();\n          break;\n        case 'MultiLineString':\n          flatCoordinates =\n            /** @type {import(\"../../geom/MultiLineString.js\").default} */ (\n              geometry\n            ).getFlatMidpoints();\n          stride = 2;\n          break;\n        case 'Polygon':\n          flatCoordinates =\n            /** @type {import(\"../../geom/Polygon.js\").default} */ (\n              geometry\n            ).getFlatInteriorPoint();\n          if (!textState.overflow) {\n            geometryWidths.push(flatCoordinates[2] / this.resolution);\n          }\n          stride = 3;\n          break;\n        case 'MultiPolygon':\n          const interiorPoints =\n            /** @type {import(\"../../geom/MultiPolygon.js\").default} */ (\n              geometry\n            ).getFlatInteriorPoints();\n          flatCoordinates = [];\n          for (let i = 0, ii = interiorPoints.length; i < ii; i += 3) {\n            if (!textState.overflow) {\n              geometryWidths.push(interiorPoints[i + 2] / this.resolution);\n            }\n            flatCoordinates.push(interiorPoints[i], interiorPoints[i + 1]);\n          }\n          if (flatCoordinates.length === 0) {\n            return;\n          }\n          stride = 2;\n          break;\n        default:\n      }\n      const end = this.appendFlatPointCoordinates(flatCoordinates, stride);\n      if (end === begin) {\n        return;\n      }\n      if (\n        geometryWidths &&\n        (end - begin) / 2 !== flatCoordinates.length / stride\n      ) {\n        let beg = begin / 2;\n        geometryWidths = geometryWidths.filter((w, i) => {\n          const keep =\n            coordinates[(beg + i) * 2] === flatCoordinates[i * stride] &&\n            coordinates[(beg + i) * 2 + 1] === flatCoordinates[i * stride + 1];\n          if (!keep) {\n            --beg;\n          }\n          return keep;\n        });\n      }\n\n      this.saveTextStates_();\n\n      if (textState.backgroundFill || textState.backgroundStroke) {\n        this.setFillStrokeStyle(\n          textState.backgroundFill,\n          textState.backgroundStroke\n        );\n        if (textState.backgroundFill) {\n          this.updateFillStyle(this.state, this.createFill);\n        }\n        if (textState.backgroundStroke) {\n          this.updateStrokeStyle(this.state, this.applyStroke);\n          this.hitDetectionInstructions.push(this.createStroke(this.state));\n        }\n      }\n\n      this.beginGeometry(geometry, feature);\n\n      // adjust padding for negative scale\n      let padding = textState.padding;\n      if (\n        padding != defaultPadding &&\n        (textState.scale[0] < 0 || textState.scale[1] < 0)\n      ) {\n        let p0 = textState.padding[0];\n        let p1 = textState.padding[1];\n        let p2 = textState.padding[2];\n        let p3 = textState.padding[3];\n        if (textState.scale[0] < 0) {\n          p1 = -p1;\n          p3 = -p3;\n        }\n        if (textState.scale[1] < 0) {\n          p0 = -p0;\n          p2 = -p2;\n        }\n        padding = [p0, p1, p2, p3];\n      }\n\n      // The image is unknown at this stage so we pass null; it will be computed at render time.\n      // For clarity, we pass NaN for offsetX, offsetY, width and height, which will be computed at\n      // render time.\n      const pixelRatio = this.pixelRatio;\n      this.instructions.push([\n        CanvasInstruction.DRAW_IMAGE,\n        begin,\n        end,\n        null,\n        NaN,\n        NaN,\n        NaN,\n        1,\n        0,\n        0,\n        this.textRotateWithView_,\n        this.textRotation_,\n        [1, 1],\n        NaN,\n        undefined,\n        this.declutterImageWithText_,\n        padding == defaultPadding\n          ? defaultPadding\n          : padding.map(function (p) {\n              return p * pixelRatio;\n            }),\n        !!textState.backgroundFill,\n        !!textState.backgroundStroke,\n        this.text_,\n        this.textKey_,\n        this.strokeKey_,\n        this.fillKey_,\n        this.textOffsetX_,\n        this.textOffsetY_,\n        geometryWidths,\n      ]);\n      const scale = 1 / pixelRatio;\n      // Set default fill for hit detection background\n      const currentFillStyle = this.state.fillStyle;\n      if (textState.backgroundFill) {\n        this.state.fillStyle = defaultFillStyle;\n        this.hitDetectionInstructions.push(this.createFill(this.state));\n      }\n      this.hitDetectionInstructions.push([\n        CanvasInstruction.DRAW_IMAGE,\n        begin,\n        end,\n        null,\n        NaN,\n        NaN,\n        NaN,\n        1,\n        0,\n        0,\n        this.textRotateWithView_,\n        this.textRotation_,\n        [scale, scale],\n        NaN,\n        undefined,\n        this.declutterImageWithText_,\n        padding,\n        !!textState.backgroundFill,\n        !!textState.backgroundStroke,\n        this.text_,\n        this.textKey_,\n        this.strokeKey_,\n        this.fillKey_ ? defaultFillStyle : this.fillKey_,\n        this.textOffsetX_,\n        this.textOffsetY_,\n        geometryWidths,\n      ]);\n      // Reset previous fill\n      if (textState.backgroundFill) {\n        this.state.fillStyle = currentFillStyle;\n        this.hitDetectionInstructions.push(this.createFill(this.state));\n      }\n\n      this.endGeometry(feature);\n    }\n  }\n\n  /**\n   * @private\n   */\n  saveTextStates_() {\n    const strokeState = this.textStrokeState_;\n    const textState = this.textState_;\n    const fillState = this.textFillState_;\n\n    const strokeKey = this.strokeKey_;\n    if (strokeState) {\n      if (!(strokeKey in this.strokeStates)) {\n        this.strokeStates[strokeKey] = {\n          strokeStyle: strokeState.strokeStyle,\n          lineCap: strokeState.lineCap,\n          lineDashOffset: strokeState.lineDashOffset,\n          lineWidth: strokeState.lineWidth,\n          lineJoin: strokeState.lineJoin,\n          miterLimit: strokeState.miterLimit,\n          lineDash: strokeState.lineDash,\n        };\n      }\n    }\n    const textKey = this.textKey_;\n    if (!(textKey in this.textStates)) {\n      this.textStates[textKey] = {\n        font: textState.font,\n        textAlign: textState.textAlign || defaultTextAlign,\n        justify: textState.justify,\n        textBaseline: textState.textBaseline || defaultTextBaseline,\n        scale: textState.scale,\n      };\n    }\n    const fillKey = this.fillKey_;\n    if (fillState) {\n      if (!(fillKey in this.fillStates)) {\n        this.fillStates[fillKey] = {\n          fillStyle: fillState.fillStyle,\n        };\n      }\n    }\n  }\n\n  /**\n   * @private\n   * @param {number} begin Begin.\n   * @param {number} end End.\n   */\n  drawChars_(begin, end) {\n    const strokeState = this.textStrokeState_;\n    const textState = this.textState_;\n\n    const strokeKey = this.strokeKey_;\n    const textKey = this.textKey_;\n    const fillKey = this.fillKey_;\n    this.saveTextStates_();\n\n    const pixelRatio = this.pixelRatio;\n    const baseline = TEXT_ALIGN[textState.textBaseline];\n\n    const offsetY = this.textOffsetY_ * pixelRatio;\n    const text = this.text_;\n    const strokeWidth = strokeState\n      ? (strokeState.lineWidth * Math.abs(textState.scale[0])) / 2\n      : 0;\n\n    this.instructions.push([\n      CanvasInstruction.DRAW_CHARS,\n      begin,\n      end,\n      baseline,\n      textState.overflow,\n      fillKey,\n      textState.maxAngle,\n      pixelRatio,\n      offsetY,\n      strokeKey,\n      strokeWidth * pixelRatio,\n      text,\n      textKey,\n      1,\n    ]);\n    this.hitDetectionInstructions.push([\n      CanvasInstruction.DRAW_CHARS,\n      begin,\n      end,\n      baseline,\n      textState.overflow,\n      fillKey ? defaultFillStyle : fillKey,\n      textState.maxAngle,\n      1,\n      offsetY,\n      strokeKey,\n      strokeWidth,\n      text,\n      textKey,\n      1 / pixelRatio,\n    ]);\n  }\n\n  /**\n   * @param {import(\"../../style/Text.js\").default} textStyle Text style.\n   * @param {Object} [sharedData] Shared data.\n   */\n  setTextStyle(textStyle, sharedData) {\n    let textState, fillState, strokeState;\n    if (!textStyle) {\n      this.text_ = '';\n    } else {\n      const textFillStyle = textStyle.getFill();\n      if (!textFillStyle) {\n        fillState = null;\n        this.textFillState_ = fillState;\n      } else {\n        fillState = this.textFillState_;\n        if (!fillState) {\n          fillState = /** @type {import(\"../canvas.js\").FillState} */ ({});\n          this.textFillState_ = fillState;\n        }\n        fillState.fillStyle = asColorLike(\n          textFillStyle.getColor() || defaultFillStyle\n        );\n      }\n\n      const textStrokeStyle = textStyle.getStroke();\n      if (!textStrokeStyle) {\n        strokeState = null;\n        this.textStrokeState_ = strokeState;\n      } else {\n        strokeState = this.textStrokeState_;\n        if (!strokeState) {\n          strokeState = /** @type {import(\"../canvas.js\").StrokeState} */ ({});\n          this.textStrokeState_ = strokeState;\n        }\n        const lineDash = textStrokeStyle.getLineDash();\n        const lineDashOffset = textStrokeStyle.getLineDashOffset();\n        const lineWidth = textStrokeStyle.getWidth();\n        const miterLimit = textStrokeStyle.getMiterLimit();\n        strokeState.lineCap = textStrokeStyle.getLineCap() || defaultLineCap;\n        strokeState.lineDash = lineDash ? lineDash.slice() : defaultLineDash;\n        strokeState.lineDashOffset =\n          lineDashOffset === undefined ? defaultLineDashOffset : lineDashOffset;\n        strokeState.lineJoin = textStrokeStyle.getLineJoin() || defaultLineJoin;\n        strokeState.lineWidth =\n          lineWidth === undefined ? defaultLineWidth : lineWidth;\n        strokeState.miterLimit =\n          miterLimit === undefined ? defaultMiterLimit : miterLimit;\n        strokeState.strokeStyle = asColorLike(\n          textStrokeStyle.getColor() || defaultStrokeStyle\n        );\n      }\n\n      textState = this.textState_;\n      const font = textStyle.getFont() || defaultFont;\n      registerFont(font);\n      const textScale = textStyle.getScaleArray();\n      textState.overflow = textStyle.getOverflow();\n      textState.font = font;\n      textState.maxAngle = textStyle.getMaxAngle();\n      textState.placement = textStyle.getPlacement();\n      textState.textAlign = textStyle.getTextAlign();\n      textState.repeat = textStyle.getRepeat();\n      textState.justify = textStyle.getJustify();\n      textState.textBaseline =\n        textStyle.getTextBaseline() || defaultTextBaseline;\n      textState.backgroundFill = textStyle.getBackgroundFill();\n      textState.backgroundStroke = textStyle.getBackgroundStroke();\n      textState.padding = textStyle.getPadding() || defaultPadding;\n      textState.scale = textScale === undefined ? [1, 1] : textScale;\n\n      const textOffsetX = textStyle.getOffsetX();\n      const textOffsetY = textStyle.getOffsetY();\n      const textRotateWithView = textStyle.getRotateWithView();\n      const textRotation = textStyle.getRotation();\n      this.text_ = textStyle.getText() || '';\n      this.textOffsetX_ = textOffsetX === undefined ? 0 : textOffsetX;\n      this.textOffsetY_ = textOffsetY === undefined ? 0 : textOffsetY;\n      this.textRotateWithView_ =\n        textRotateWithView === undefined ? false : textRotateWithView;\n      this.textRotation_ = textRotation === undefined ? 0 : textRotation;\n\n      this.strokeKey_ = strokeState\n        ? (typeof strokeState.strokeStyle == 'string'\n            ? strokeState.strokeStyle\n            : getUid(strokeState.strokeStyle)) +\n          strokeState.lineCap +\n          strokeState.lineDashOffset +\n          '|' +\n          strokeState.lineWidth +\n          strokeState.lineJoin +\n          strokeState.miterLimit +\n          '[' +\n          strokeState.lineDash.join() +\n          ']'\n        : '';\n      this.textKey_ =\n        textState.font +\n        textState.scale +\n        (textState.textAlign || '?') +\n        (textState.repeat || '?') +\n        (textState.justify || '?') +\n        (textState.textBaseline || '?');\n      this.fillKey_ = fillState\n        ? typeof fillState.fillStyle == 'string'\n          ? fillState.fillStyle\n          : '|' + getUid(fillState.fillStyle)\n        : '';\n    }\n    this.declutterImageWithText_ = sharedData;\n  }\n}\n\nexport default CanvasTextBuilder;\n","/**\n * @module ol/render/canvas/hitdetect\n */\n\nimport CanvasImmediateRenderer from './Immediate.js';\nimport {Icon} from '../../style.js';\nimport {ascending} from '../../array.js';\nimport {clamp} from '../../math.js';\nimport {createCanvasContext2D} from '../../dom.js';\nimport {intersects} from '../../extent.js';\n\nexport const HIT_DETECT_RESOLUTION = 0.5;\n\n/**\n * @param {import(\"../../size.js\").Size} size Canvas size in css pixels.\n * @param {Array<import(\"../../transform.js\").Transform>} transforms Transforms\n * for rendering features to all worlds of the viewport, from coordinates to css\n * pixels.\n * @param {Array<import(\"../../Feature.js\").FeatureLike>} features\n * Features to consider for hit detection.\n * @param {import(\"../../style/Style.js\").StyleFunction|undefined} styleFunction\n * Layer style function.\n * @param {import(\"../../extent.js\").Extent} extent Extent.\n * @param {number} resolution Resolution.\n * @param {number} rotation Rotation.\n * @return {ImageData} Hit detection image data.\n */\nexport function createHitDetectionImageData(\n  size,\n  transforms,\n  features,\n  styleFunction,\n  extent,\n  resolution,\n  rotation\n) {\n  const width = size[0] * HIT_DETECT_RESOLUTION;\n  const height = size[1] * HIT_DETECT_RESOLUTION;\n  const context = createCanvasContext2D(width, height);\n  context.imageSmoothingEnabled = false;\n  const canvas = context.canvas;\n  const renderer = new CanvasImmediateRenderer(\n    context,\n    HIT_DETECT_RESOLUTION,\n    extent,\n    null,\n    rotation\n  );\n  const featureCount = features.length;\n  // Stretch hit detection index to use the whole available color range\n  const indexFactor = Math.floor((256 * 256 * 256 - 1) / featureCount);\n  const featuresByZIndex = {};\n  for (let i = 1; i <= featureCount; ++i) {\n    const feature = features[i - 1];\n    const featureStyleFunction = feature.getStyleFunction() || styleFunction;\n    if (!featureStyleFunction) {\n      continue;\n    }\n    let styles = featureStyleFunction(feature, resolution);\n    if (!styles) {\n      continue;\n    }\n    if (!Array.isArray(styles)) {\n      styles = [styles];\n    }\n    const index = i * indexFactor;\n    const color = index.toString(16).padStart(7, '#00000');\n    for (let j = 0, jj = styles.length; j < jj; ++j) {\n      const originalStyle = styles[j];\n      const geometry = originalStyle.getGeometryFunction()(feature);\n      if (!geometry || !intersects(extent, geometry.getExtent())) {\n        continue;\n      }\n      const style = originalStyle.clone();\n      const fill = style.getFill();\n      if (fill) {\n        fill.setColor(color);\n      }\n      const stroke = style.getStroke();\n      if (stroke) {\n        stroke.setColor(color);\n        stroke.setLineDash(null);\n      }\n      style.setText(undefined);\n      const image = originalStyle.getImage();\n      if (image) {\n        const imgSize = image.getImageSize();\n        if (!imgSize) {\n          continue;\n        }\n\n        const imgContext = createCanvasContext2D(\n          imgSize[0],\n          imgSize[1],\n          undefined,\n          {alpha: false}\n        );\n        const img = imgContext.canvas;\n        imgContext.fillStyle = color;\n        imgContext.fillRect(0, 0, img.width, img.height);\n        style.setImage(\n          new Icon({\n            img: img,\n            imgSize: imgSize,\n            anchor: image.getAnchor(),\n            anchorXUnits: 'pixels',\n            anchorYUnits: 'pixels',\n            offset: image.getOrigin(),\n            opacity: 1,\n            size: image.getSize(),\n            scale: image.getScale(),\n            rotation: image.getRotation(),\n            rotateWithView: image.getRotateWithView(),\n          })\n        );\n      }\n      const zIndex = style.getZIndex() || 0;\n      let byGeometryType = featuresByZIndex[zIndex];\n      if (!byGeometryType) {\n        byGeometryType = {};\n        featuresByZIndex[zIndex] = byGeometryType;\n        byGeometryType['Polygon'] = [];\n        byGeometryType['Circle'] = [];\n        byGeometryType['LineString'] = [];\n        byGeometryType['Point'] = [];\n      }\n      const type = geometry.getType();\n      if (type === 'GeometryCollection') {\n        const geometries =\n          /** @type {import(\"../../geom/GeometryCollection.js\").default} */ (\n            geometry\n          ).getGeometriesArrayRecursive();\n        for (let i = 0, ii = geometries.length; i < ii; ++i) {\n          const geometry = geometries[i];\n          byGeometryType[geometry.getType().replace('Multi', '')].push(\n            geometry,\n            style\n          );\n        }\n      } else {\n        byGeometryType[type.replace('Multi', '')].push(geometry, style);\n      }\n    }\n  }\n\n  const zIndexKeys = Object.keys(featuresByZIndex).map(Number).sort(ascending);\n  for (let i = 0, ii = zIndexKeys.length; i < ii; ++i) {\n    const byGeometryType = featuresByZIndex[zIndexKeys[i]];\n    for (const type in byGeometryType) {\n      const geomAndStyle = byGeometryType[type];\n      for (let j = 0, jj = geomAndStyle.length; j < jj; j += 2) {\n        renderer.setStyle(geomAndStyle[j + 1]);\n        for (let k = 0, kk = transforms.length; k < kk; ++k) {\n          renderer.setTransform(transforms[k]);\n          renderer.drawGeometry(geomAndStyle[j]);\n        }\n      }\n    }\n  }\n  return context.getImageData(0, 0, canvas.width, canvas.height);\n}\n\n/**\n * @param {import(\"../../pixel\").Pixel} pixel Pixel coordinate on the hit\n * detection canvas in css pixels.\n * @param {Array<F>} features Features. Has to\n * match the `features` array that was passed to `createHitDetectionImageData()`.\n * @param {ImageData} imageData Hit detection image data generated by\n * `createHitDetectionImageData()`.\n * @return {Array<F>} Features.\n * @template {import(\"../../Feature.js\").FeatureLike} F\n */\nexport function hitDetect(pixel, features, imageData) {\n  const resultFeatures = [];\n  if (imageData) {\n    const x = Math.floor(Math.round(pixel[0]) * HIT_DETECT_RESOLUTION);\n    const y = Math.floor(Math.round(pixel[1]) * HIT_DETECT_RESOLUTION);\n    // The pixel coordinate is clamped down to the hit-detect canvas' size to account\n    // for browsers returning coordinates slightly larger than the actual canvas size\n    // due to a non-integer pixel ratio.\n    const index =\n      (clamp(x, 0, imageData.width - 1) +\n        clamp(y, 0, imageData.height - 1) * imageData.width) *\n      4;\n    const r = imageData.data[index];\n    const g = imageData.data[index + 1];\n    const b = imageData.data[index + 2];\n    const i = b + 256 * (g + 256 * r);\n    const indexFactor = Math.floor((256 * 256 * 256 - 1) / features.length);\n    if (i && i % indexFactor === 0) {\n      resultFeatures.push(features[i / indexFactor - 1]);\n    }\n  }\n  // @ts-ignore Features are copied from `features` to `resultFeatures` so the type should be the same\n  return resultFeatures;\n}\n","/**\n * @module ol/renderer/canvas/VectorLayer\n */\nimport CanvasBuilderGroup from '../../render/canvas/BuilderGroup.js';\nimport CanvasLayerRenderer, {canvasPool} from './Layer.js';\nimport ExecutorGroup from '../../render/canvas/ExecutorGroup.js';\nimport RenderEventType from '../../render/EventType.js';\nimport ViewHint from '../../ViewHint.js';\nimport {\n  HIT_DETECT_RESOLUTION,\n  createHitDetectionImageData,\n  hitDetect,\n} from '../../render/canvas/hitdetect.js';\nimport {\n  apply,\n  makeInverse,\n  makeScale,\n  toString as transformToString,\n} from '../../transform.js';\nimport {\n  buffer,\n  containsExtent,\n  createEmpty,\n  getWidth,\n  intersects as intersectsExtent,\n  wrapX as wrapExtentX,\n} from '../../extent.js';\nimport {createCanvasContext2D, releaseCanvas} from '../../dom.js';\nimport {\n  defaultOrder as defaultRenderOrder,\n  getTolerance as getRenderTolerance,\n  getSquaredTolerance as getSquaredRenderTolerance,\n  renderFeature,\n} from '../vector.js';\nimport {equals} from '../../array.js';\nimport {\n  fromUserExtent,\n  getTransformFromProjections,\n  getUserProjection,\n  toUserExtent,\n  toUserResolution,\n} from '../../proj.js';\nimport {getUid} from '../../util.js';\nimport {wrapX as wrapCoordinateX} from '../../coordinate.js';\n\n/**\n * @classdesc\n * Canvas renderer for vector layers.\n * @api\n */\nclass CanvasVectorLayerRenderer extends CanvasLayerRenderer {\n  /**\n   * @param {import(\"../../layer/BaseVector.js\").default} vectorLayer Vector layer.\n   */\n  constructor(vectorLayer) {\n    super(vectorLayer);\n\n    /** @private */\n    this.boundHandleStyleImageChange_ = this.handleStyleImageChange_.bind(this);\n\n    /**\n     * @type {boolean}\n     */\n    this.animatingOrInteracting_;\n\n    /**\n     * @type {ImageData|null}\n     */\n    this.hitDetectionImageData_ = null;\n\n    /**\n     * @type {Array<import(\"../../Feature.js\").default>}\n     */\n    this.renderedFeatures_ = null;\n\n    /**\n     * @private\n     * @type {number}\n     */\n    this.renderedRevision_ = -1;\n\n    /**\n     * @private\n     * @type {number}\n     */\n    this.renderedResolution_ = NaN;\n\n    /**\n     * @private\n     * @type {import(\"../../extent.js\").Extent}\n     */\n    this.renderedExtent_ = createEmpty();\n\n    /**\n     * @private\n     * @type {import(\"../../extent.js\").Extent}\n     */\n    this.wrappedRenderedExtent_ = createEmpty();\n\n    /**\n     * @private\n     * @type {number}\n     */\n    this.renderedRotation_;\n\n    /**\n     * @private\n     * @type {import(\"../../coordinate\").Coordinate}\n     */\n    this.renderedCenter_ = null;\n\n    /**\n     * @private\n     * @type {import(\"../../proj/Projection\").default}\n     */\n    this.renderedProjection_ = null;\n\n    /**\n     * @private\n     * @type {function(import(\"../../Feature.js\").default, import(\"../../Feature.js\").default): number|null}\n     */\n    this.renderedRenderOrder_ = null;\n\n    /**\n     * @private\n     * @type {import(\"../../render/canvas/ExecutorGroup\").default}\n     */\n    this.replayGroup_ = null;\n\n    /**\n     * A new replay group had to be created by `prepareFrame()`\n     * @type {boolean}\n     */\n    this.replayGroupChanged = true;\n\n    /**\n     * @type {import(\"../../render/canvas/ExecutorGroup\").default}\n     */\n    this.declutterExecutorGroup = null;\n\n    /**\n     * Clipping to be performed by `renderFrame()`\n     * @type {boolean}\n     */\n    this.clipping = true;\n\n    /**\n     * @private\n     * @type {CanvasRenderingContext2D}\n     */\n    this.compositionContext_ = null;\n\n    /**\n     * @private\n     * @type {number}\n     */\n    this.opacity_ = 1;\n  }\n\n  /**\n   * @param {ExecutorGroup} executorGroup Executor group.\n   * @param {import(\"../../Map.js\").FrameState} frameState Frame state.\n   * @param {import(\"rbush\").default} [declutterTree] Declutter tree.\n   */\n  renderWorlds(executorGroup, frameState, declutterTree) {\n    const extent = frameState.extent;\n    const viewState = frameState.viewState;\n    const center = viewState.center;\n    const resolution = viewState.resolution;\n    const projection = viewState.projection;\n    const rotation = viewState.rotation;\n    const projectionExtent = projection.getExtent();\n    const vectorSource = this.getLayer().getSource();\n    const pixelRatio = frameState.pixelRatio;\n    const viewHints = frameState.viewHints;\n    const snapToPixel = !(\n      viewHints[ViewHint.ANIMATING] || viewHints[ViewHint.INTERACTING]\n    );\n    const context = this.compositionContext_;\n    const width = Math.round(frameState.size[0] * pixelRatio);\n    const height = Math.round(frameState.size[1] * pixelRatio);\n\n    const multiWorld = vectorSource.getWrapX() && projection.canWrapX();\n    const worldWidth = multiWorld ? getWidth(projectionExtent) : null;\n    const endWorld = multiWorld\n      ? Math.ceil((extent[2] - projectionExtent[2]) / worldWidth) + 1\n      : 1;\n    let world = multiWorld\n      ? Math.floor((extent[0] - projectionExtent[0]) / worldWidth)\n      : 0;\n    do {\n      const transform = this.getRenderTransform(\n        center,\n        resolution,\n        rotation,\n        pixelRatio,\n        width,\n        height,\n        world * worldWidth\n      );\n      executorGroup.execute(\n        context,\n        1,\n        transform,\n        rotation,\n        snapToPixel,\n        undefined,\n        declutterTree\n      );\n    } while (++world < endWorld);\n  }\n\n  setupCompositionContext_() {\n    if (this.opacity_ !== 1) {\n      const compositionContext = createCanvasContext2D(\n        this.context.canvas.width,\n        this.context.canvas.height,\n        canvasPool\n      );\n      this.compositionContext_ = compositionContext;\n    } else {\n      this.compositionContext_ = this.context;\n    }\n  }\n\n  releaseCompositionContext_() {\n    if (this.opacity_ !== 1) {\n      const alpha = this.context.globalAlpha;\n      this.context.globalAlpha = this.opacity_;\n      this.context.drawImage(this.compositionContext_.canvas, 0, 0);\n      this.context.globalAlpha = alpha;\n      releaseCanvas(this.compositionContext_);\n      canvasPool.push(this.compositionContext_.canvas);\n      this.compositionContext_ = null;\n    }\n  }\n\n  /**\n   * Render declutter items for this layer\n   * @param {import(\"../../Map.js\").FrameState} frameState Frame state.\n   */\n  renderDeclutter(frameState) {\n    if (this.declutterExecutorGroup) {\n      this.setupCompositionContext_();\n      this.renderWorlds(\n        this.declutterExecutorGroup,\n        frameState,\n        frameState.declutterTree\n      );\n      this.releaseCompositionContext_();\n    }\n  }\n\n  /**\n   * Render the layer.\n   * @param {import(\"../../Map.js\").FrameState} frameState Frame state.\n   * @param {HTMLElement|null} target Target that may be used to render content to.\n   * @return {HTMLElement|null} The rendered element.\n   */\n  renderFrame(frameState, target) {\n    const pixelRatio = frameState.pixelRatio;\n    const layerState = frameState.layerStatesArray[frameState.layerIndex];\n\n    // set forward and inverse pixel transforms\n    makeScale(this.pixelTransform, 1 / pixelRatio, 1 / pixelRatio);\n    makeInverse(this.inversePixelTransform, this.pixelTransform);\n\n    const canvasTransform = transformToString(this.pixelTransform);\n\n    this.useContainer(target, canvasTransform, this.getBackground(frameState));\n    const context = this.context;\n    const canvas = context.canvas;\n\n    const replayGroup = this.replayGroup_;\n    const declutterExecutorGroup = this.declutterExecutorGroup;\n    let render =\n      (replayGroup && !replayGroup.isEmpty()) ||\n      (declutterExecutorGroup && !declutterExecutorGroup.isEmpty());\n    if (!render) {\n      const hasRenderListeners =\n        this.getLayer().hasListener(RenderEventType.PRERENDER) ||\n        this.getLayer().hasListener(RenderEventType.POSTRENDER);\n      if (!hasRenderListeners) {\n        return null;\n      }\n    }\n\n    // resize and clear\n    const width = Math.round(frameState.size[0] * pixelRatio);\n    const height = Math.round(frameState.size[1] * pixelRatio);\n    if (canvas.width != width || canvas.height != height) {\n      canvas.width = width;\n      canvas.height = height;\n      if (canvas.style.transform !== canvasTransform) {\n        canvas.style.transform = canvasTransform;\n      }\n    } else if (!this.containerReused) {\n      context.clearRect(0, 0, width, height);\n    }\n\n    this.preRender(context, frameState);\n\n    const viewState = frameState.viewState;\n    const projection = viewState.projection;\n\n    this.opacity_ = layerState.opacity;\n    this.setupCompositionContext_();\n\n    // clipped rendering if layer extent is set\n    let clipped = false;\n    if (render && layerState.extent && this.clipping) {\n      const layerExtent = fromUserExtent(layerState.extent, projection);\n      render = intersectsExtent(layerExtent, frameState.extent);\n      clipped = render && !containsExtent(layerExtent, frameState.extent);\n      if (clipped) {\n        this.clipUnrotated(this.compositionContext_, frameState, layerExtent);\n      }\n    }\n\n    if (render) {\n      this.renderWorlds(replayGroup, frameState);\n    }\n\n    if (clipped) {\n      this.compositionContext_.restore();\n    }\n\n    this.releaseCompositionContext_();\n\n    this.postRender(context, frameState);\n\n    if (this.renderedRotation_ !== viewState.rotation) {\n      this.renderedRotation_ = viewState.rotation;\n      this.hitDetectionImageData_ = null;\n    }\n    return this.container;\n  }\n\n  /**\n   * Asynchronous layer level hit detection.\n   * @param {import(\"../../pixel.js\").Pixel} pixel Pixel.\n   * @return {Promise<Array<import(\"../../Feature\").default>>} Promise\n   * that resolves with an array of features.\n   */\n  getFeatures(pixel) {\n    return new Promise((resolve) => {\n      if (!this.hitDetectionImageData_ && !this.animatingOrInteracting_) {\n        const size = [this.context.canvas.width, this.context.canvas.height];\n        apply(this.pixelTransform, size);\n        const center = this.renderedCenter_;\n        const resolution = this.renderedResolution_;\n        const rotation = this.renderedRotation_;\n        const projection = this.renderedProjection_;\n        const extent = this.wrappedRenderedExtent_;\n        const layer = this.getLayer();\n        const transforms = [];\n        const width = size[0] * HIT_DETECT_RESOLUTION;\n        const height = size[1] * HIT_DETECT_RESOLUTION;\n        transforms.push(\n          this.getRenderTransform(\n            center,\n            resolution,\n            rotation,\n            HIT_DETECT_RESOLUTION,\n            width,\n            height,\n            0\n          ).slice()\n        );\n        const source = layer.getSource();\n        const projectionExtent = projection.getExtent();\n        if (\n          source.getWrapX() &&\n          projection.canWrapX() &&\n          !containsExtent(projectionExtent, extent)\n        ) {\n          let startX = extent[0];\n          const worldWidth = getWidth(projectionExtent);\n          let world = 0;\n          let offsetX;\n          while (startX < projectionExtent[0]) {\n            --world;\n            offsetX = worldWidth * world;\n            transforms.push(\n              this.getRenderTransform(\n                center,\n                resolution,\n                rotation,\n                HIT_DETECT_RESOLUTION,\n                width,\n                height,\n                offsetX\n              ).slice()\n            );\n            startX += worldWidth;\n          }\n          world = 0;\n          startX = extent[2];\n          while (startX > projectionExtent[2]) {\n            ++world;\n            offsetX = worldWidth * world;\n            transforms.push(\n              this.getRenderTransform(\n                center,\n                resolution,\n                rotation,\n                HIT_DETECT_RESOLUTION,\n                width,\n                height,\n                offsetX\n              ).slice()\n            );\n            startX -= worldWidth;\n          }\n        }\n\n        this.hitDetectionImageData_ = createHitDetectionImageData(\n          size,\n          transforms,\n          this.renderedFeatures_,\n          layer.getStyleFunction(),\n          extent,\n          resolution,\n          rotation\n        );\n      }\n      resolve(\n        hitDetect(pixel, this.renderedFeatures_, this.hitDetectionImageData_)\n      );\n    });\n  }\n\n  /**\n   * @param {import(\"../../coordinate.js\").Coordinate} coordinate Coordinate.\n   * @param {import(\"../../Map.js\").FrameState} frameState Frame state.\n   * @param {number} hitTolerance Hit tolerance in pixels.\n   * @param {import(\"../vector.js\").FeatureCallback<T>} callback Feature callback.\n   * @param {Array<import(\"../Map.js\").HitMatch<T>>} matches The hit detected matches with tolerance.\n   * @return {T|undefined} Callback result.\n   * @template T\n   */\n  forEachFeatureAtCoordinate(\n    coordinate,\n    frameState,\n    hitTolerance,\n    callback,\n    matches\n  ) {\n    if (!this.replayGroup_) {\n      return undefined;\n    }\n    const resolution = frameState.viewState.resolution;\n    const rotation = frameState.viewState.rotation;\n    const layer = this.getLayer();\n\n    /** @type {!Object<string, import(\"../Map.js\").HitMatch<T>|true>} */\n    const features = {};\n\n    /**\n     * @param {import(\"../../Feature.js\").FeatureLike} feature Feature.\n     * @param {import(\"../../geom/SimpleGeometry.js\").default} geometry Geometry.\n     * @param {number} distanceSq The squared distance to the click position\n     * @return {T|undefined} Callback result.\n     */\n    const featureCallback = function (feature, geometry, distanceSq) {\n      const key = getUid(feature);\n      const match = features[key];\n      if (!match) {\n        if (distanceSq === 0) {\n          features[key] = true;\n          return callback(feature, layer, geometry);\n        }\n        matches.push(\n          (features[key] = {\n            feature: feature,\n            layer: layer,\n            geometry: geometry,\n            distanceSq: distanceSq,\n            callback: callback,\n          })\n        );\n      } else if (match !== true && distanceSq < match.distanceSq) {\n        if (distanceSq === 0) {\n          features[key] = true;\n          matches.splice(matches.lastIndexOf(match), 1);\n          return callback(feature, layer, geometry);\n        }\n        match.geometry = geometry;\n        match.distanceSq = distanceSq;\n      }\n      return undefined;\n    };\n\n    let result;\n    const executorGroups = [this.replayGroup_];\n    if (this.declutterExecutorGroup) {\n      executorGroups.push(this.declutterExecutorGroup);\n    }\n    executorGroups.some((executorGroup) => {\n      return (result = executorGroup.forEachFeatureAtCoordinate(\n        coordinate,\n        resolution,\n        rotation,\n        hitTolerance,\n        featureCallback,\n        executorGroup === this.declutterExecutorGroup &&\n          frameState.declutterTree\n          ? frameState.declutterTree.all().map((item) => item.value)\n          : null\n      ));\n    });\n\n    return result;\n  }\n\n  /**\n   * Perform action necessary to get the layer rendered after new fonts have loaded\n   */\n  handleFontsChanged() {\n    const layer = this.getLayer();\n    if (layer.getVisible() && this.replayGroup_) {\n      layer.changed();\n    }\n  }\n\n  /**\n   * Handle changes in image style state.\n   * @param {import(\"../../events/Event.js\").default} event Image style change event.\n   * @private\n   */\n  handleStyleImageChange_(event) {\n    this.renderIfReadyAndVisible();\n  }\n\n  /**\n   * Determine whether render should be called.\n   * @param {import(\"../../Map.js\").FrameState} frameState Frame state.\n   * @return {boolean} Layer is ready to be rendered.\n   */\n  prepareFrame(frameState) {\n    const vectorLayer = this.getLayer();\n    const vectorSource = vectorLayer.getSource();\n    if (!vectorSource) {\n      return false;\n    }\n\n    const animating = frameState.viewHints[ViewHint.ANIMATING];\n    const interacting = frameState.viewHints[ViewHint.INTERACTING];\n    const updateWhileAnimating = vectorLayer.getUpdateWhileAnimating();\n    const updateWhileInteracting = vectorLayer.getUpdateWhileInteracting();\n\n    if (\n      (this.ready && !updateWhileAnimating && animating) ||\n      (!updateWhileInteracting && interacting)\n    ) {\n      this.animatingOrInteracting_ = true;\n      return true;\n    }\n    this.animatingOrInteracting_ = false;\n\n    const frameStateExtent = frameState.extent;\n    const viewState = frameState.viewState;\n    const projection = viewState.projection;\n    const resolution = viewState.resolution;\n    const pixelRatio = frameState.pixelRatio;\n    const vectorLayerRevision = vectorLayer.getRevision();\n    const vectorLayerRenderBuffer = vectorLayer.getRenderBuffer();\n    let vectorLayerRenderOrder = vectorLayer.getRenderOrder();\n\n    if (vectorLayerRenderOrder === undefined) {\n      vectorLayerRenderOrder = defaultRenderOrder;\n    }\n\n    const center = viewState.center.slice();\n    const extent = buffer(\n      frameStateExtent,\n      vectorLayerRenderBuffer * resolution\n    );\n    const renderedExtent = extent.slice();\n    const loadExtents = [extent.slice()];\n    const projectionExtent = projection.getExtent();\n\n    if (\n      vectorSource.getWrapX() &&\n      projection.canWrapX() &&\n      !containsExtent(projectionExtent, frameState.extent)\n    ) {\n      // For the replay group, we need an extent that intersects the real world\n      // (-180° to +180°). To support geometries in a coordinate range from -540°\n      // to +540°, we add at least 1 world width on each side of the projection\n      // extent. If the viewport is wider than the world, we need to add half of\n      // the viewport width to make sure we cover the whole viewport.\n      const worldWidth = getWidth(projectionExtent);\n      const gutter = Math.max(getWidth(extent) / 2, worldWidth);\n      extent[0] = projectionExtent[0] - gutter;\n      extent[2] = projectionExtent[2] + gutter;\n      wrapCoordinateX(center, projection);\n      const loadExtent = wrapExtentX(loadExtents[0], projection);\n      // If the extent crosses the date line, we load data for both edges of the worlds\n      if (\n        loadExtent[0] < projectionExtent[0] &&\n        loadExtent[2] < projectionExtent[2]\n      ) {\n        loadExtents.push([\n          loadExtent[0] + worldWidth,\n          loadExtent[1],\n          loadExtent[2] + worldWidth,\n          loadExtent[3],\n        ]);\n      } else if (\n        loadExtent[0] > projectionExtent[0] &&\n        loadExtent[2] > projectionExtent[2]\n      ) {\n        loadExtents.push([\n          loadExtent[0] - worldWidth,\n          loadExtent[1],\n          loadExtent[2] - worldWidth,\n          loadExtent[3],\n        ]);\n      }\n    }\n\n    if (\n      this.ready &&\n      this.renderedResolution_ == resolution &&\n      this.renderedRevision_ == vectorLayerRevision &&\n      this.renderedRenderOrder_ == vectorLayerRenderOrder &&\n      containsExtent(this.wrappedRenderedExtent_, extent)\n    ) {\n      if (!equals(this.renderedExtent_, renderedExtent)) {\n        this.hitDetectionImageData_ = null;\n        this.renderedExtent_ = renderedExtent;\n      }\n      this.renderedCenter_ = center;\n      this.replayGroupChanged = false;\n      return true;\n    }\n\n    this.replayGroup_ = null;\n\n    const replayGroup = new CanvasBuilderGroup(\n      getRenderTolerance(resolution, pixelRatio),\n      extent,\n      resolution,\n      pixelRatio\n    );\n\n    let declutterBuilderGroup;\n    if (this.getLayer().getDeclutter()) {\n      declutterBuilderGroup = new CanvasBuilderGroup(\n        getRenderTolerance(resolution, pixelRatio),\n        extent,\n        resolution,\n        pixelRatio\n      );\n    }\n\n    const userProjection = getUserProjection();\n    let userTransform;\n    if (userProjection) {\n      for (let i = 0, ii = loadExtents.length; i < ii; ++i) {\n        const extent = loadExtents[i];\n        const userExtent = toUserExtent(extent, projection);\n        vectorSource.loadFeatures(\n          userExtent,\n          toUserResolution(resolution, projection),\n          userProjection\n        );\n      }\n      userTransform = getTransformFromProjections(userProjection, projection);\n    } else {\n      for (let i = 0, ii = loadExtents.length; i < ii; ++i) {\n        vectorSource.loadFeatures(loadExtents[i], resolution, projection);\n      }\n    }\n\n    const squaredTolerance = getSquaredRenderTolerance(resolution, pixelRatio);\n    let ready = true;\n    const render =\n      /**\n       * @param {import(\"../../Feature.js\").default} feature Feature.\n       */\n      (feature) => {\n        let styles;\n        const styleFunction =\n          feature.getStyleFunction() || vectorLayer.getStyleFunction();\n        if (styleFunction) {\n          styles = styleFunction(feature, resolution);\n        }\n        if (styles) {\n          const dirty = this.renderFeature(\n            feature,\n            squaredTolerance,\n            styles,\n            replayGroup,\n            userTransform,\n            declutterBuilderGroup\n          );\n          ready = ready && !dirty;\n        }\n      };\n\n    const userExtent = toUserExtent(extent, projection);\n    /** @type {Array<import(\"../../Feature.js\").default>} */\n    const features = vectorSource.getFeaturesInExtent(userExtent);\n    if (vectorLayerRenderOrder) {\n      features.sort(vectorLayerRenderOrder);\n    }\n    for (let i = 0, ii = features.length; i < ii; ++i) {\n      render(features[i]);\n    }\n    this.renderedFeatures_ = features;\n    this.ready = ready;\n\n    const replayGroupInstructions = replayGroup.finish();\n    const executorGroup = new ExecutorGroup(\n      extent,\n      resolution,\n      pixelRatio,\n      vectorSource.getOverlaps(),\n      replayGroupInstructions,\n      vectorLayer.getRenderBuffer()\n    );\n\n    if (declutterBuilderGroup) {\n      this.declutterExecutorGroup = new ExecutorGroup(\n        extent,\n        resolution,\n        pixelRatio,\n        vectorSource.getOverlaps(),\n        declutterBuilderGroup.finish(),\n        vectorLayer.getRenderBuffer()\n      );\n    }\n\n    this.renderedResolution_ = resolution;\n    this.renderedRevision_ = vectorLayerRevision;\n    this.renderedRenderOrder_ = vectorLayerRenderOrder;\n    this.renderedExtent_ = renderedExtent;\n    this.wrappedRenderedExtent_ = extent;\n    this.renderedCenter_ = center;\n    this.renderedProjection_ = projection;\n    this.replayGroup_ = executorGroup;\n    this.hitDetectionImageData_ = null;\n\n    this.replayGroupChanged = true;\n    return true;\n  }\n\n  /**\n   * @param {import(\"../../Feature.js\").default} feature Feature.\n   * @param {number} squaredTolerance Squared render tolerance.\n   * @param {import(\"../../style/Style.js\").default|Array<import(\"../../style/Style.js\").default>} styles The style or array of styles.\n   * @param {import(\"../../render/canvas/BuilderGroup.js\").default} builderGroup Builder group.\n   * @param {import(\"../../proj.js\").TransformFunction} [transform] Transform from user to view projection.\n   * @param {import(\"../../render/canvas/BuilderGroup.js\").default} [declutterBuilderGroup] Builder for decluttering.\n   * @return {boolean} `true` if an image is loading.\n   */\n  renderFeature(\n    feature,\n    squaredTolerance,\n    styles,\n    builderGroup,\n    transform,\n    declutterBuilderGroup\n  ) {\n    if (!styles) {\n      return false;\n    }\n    let loading = false;\n    if (Array.isArray(styles)) {\n      for (let i = 0, ii = styles.length; i < ii; ++i) {\n        loading =\n          renderFeature(\n            builderGroup,\n            feature,\n            styles[i],\n            squaredTolerance,\n            this.boundHandleStyleImageChange_,\n            transform,\n            declutterBuilderGroup\n          ) || loading;\n      }\n    } else {\n      loading = renderFeature(\n        builderGroup,\n        feature,\n        styles,\n        squaredTolerance,\n        this.boundHandleStyleImageChange_,\n        transform,\n        declutterBuilderGroup\n      );\n    }\n    return loading;\n  }\n}\n\nexport default CanvasVectorLayerRenderer;\n","/**\n * @module ol/renderer/vector\n */\nimport ImageState from '../ImageState.js';\nimport {getUid} from '../util.js';\n\n/**\n * Feature callback. The callback will be called with three arguments. The first\n * argument is one {@link module:ol/Feature~Feature feature} or {@link module:ol/render/Feature~RenderFeature render feature}\n * at the pixel, the second is the {@link module:ol/layer/Layer~Layer layer} of the feature and will be null for\n * unmanaged layers. The third is the {@link module:ol/geom/SimpleGeometry~SimpleGeometry} of the feature. For features\n * with a GeometryCollection geometry, it will be the first detected geometry from the collection.\n * @template T\n * @typedef {function(import(\"../Feature.js\").FeatureLike, import(\"../layer/Layer.js\").default<import(\"../source/Source\").default>, import(\"../geom/SimpleGeometry.js\").default): T} FeatureCallback\n */\n\n/**\n * Tolerance for geometry simplification in device pixels.\n * @type {number}\n */\nconst SIMPLIFY_TOLERANCE = 0.5;\n\n/**\n * @const\n * @type {Object<import(\"../geom/Geometry.js\").Type,\n *                function(import(\"../render/canvas/BuilderGroup.js\").default, import(\"../geom/Geometry.js\").default,\n *                         import(\"../style/Style.js\").default, Object): void>}\n */\nconst GEOMETRY_RENDERERS = {\n  'Point': renderPointGeometry,\n  'LineString': renderLineStringGeometry,\n  'Polygon': renderPolygonGeometry,\n  'MultiPoint': renderMultiPointGeometry,\n  'MultiLineString': renderMultiLineStringGeometry,\n  'MultiPolygon': renderMultiPolygonGeometry,\n  'GeometryCollection': renderGeometryCollectionGeometry,\n  'Circle': renderCircleGeometry,\n};\n\n/**\n * @param {import(\"../Feature.js\").FeatureLike} feature1 Feature 1.\n * @param {import(\"../Feature.js\").FeatureLike} feature2 Feature 2.\n * @return {number} Order.\n */\nexport function defaultOrder(feature1, feature2) {\n  return parseInt(getUid(feature1), 10) - parseInt(getUid(feature2), 10);\n}\n\n/**\n * @param {number} resolution Resolution.\n * @param {number} pixelRatio Pixel ratio.\n * @return {number} Squared pixel tolerance.\n */\nexport function getSquaredTolerance(resolution, pixelRatio) {\n  const tolerance = getTolerance(resolution, pixelRatio);\n  return tolerance * tolerance;\n}\n\n/**\n * @param {number} resolution Resolution.\n * @param {number} pixelRatio Pixel ratio.\n * @return {number} Pixel tolerance.\n */\nexport function getTolerance(resolution, pixelRatio) {\n  return (SIMPLIFY_TOLERANCE * resolution) / pixelRatio;\n}\n\n/**\n * @param {import(\"../render/canvas/BuilderGroup.js\").default} builderGroup Builder group.\n * @param {import(\"../geom/Circle.js\").default} geometry Geometry.\n * @param {import(\"../style/Style.js\").default} style Style.\n * @param {import(\"../Feature.js\").default} feature Feature.\n * @param {import(\"../render/canvas/BuilderGroup.js\").default} [declutterBuilderGroup] Builder for decluttering.\n */\nfunction renderCircleGeometry(\n  builderGroup,\n  geometry,\n  style,\n  feature,\n  declutterBuilderGroup\n) {\n  const fillStyle = style.getFill();\n  const strokeStyle = style.getStroke();\n  if (fillStyle || strokeStyle) {\n    const circleReplay = builderGroup.getBuilder(style.getZIndex(), 'Circle');\n    circleReplay.setFillStrokeStyle(fillStyle, strokeStyle);\n    circleReplay.drawCircle(geometry, feature);\n  }\n  const textStyle = style.getText();\n  if (textStyle && textStyle.getText()) {\n    const textReplay = (declutterBuilderGroup || builderGroup).getBuilder(\n      style.getZIndex(),\n      'Text'\n    );\n    textReplay.setTextStyle(textStyle);\n    textReplay.drawText(geometry, feature);\n  }\n}\n\n/**\n * @param {import(\"../render/canvas/BuilderGroup.js\").default} replayGroup Replay group.\n * @param {import(\"../Feature.js\").FeatureLike} feature Feature.\n * @param {import(\"../style/Style.js\").default} style Style.\n * @param {number} squaredTolerance Squared tolerance.\n * @param {function(import(\"../events/Event.js\").default): void} listener Listener function.\n * @param {import(\"../proj.js\").TransformFunction} [transform] Transform from user to view projection.\n * @param {import(\"../render/canvas/BuilderGroup.js\").default} [declutterBuilderGroup] Builder for decluttering.\n * @return {boolean} `true` if style is loading.\n */\nexport function renderFeature(\n  replayGroup,\n  feature,\n  style,\n  squaredTolerance,\n  listener,\n  transform,\n  declutterBuilderGroup\n) {\n  let loading = false;\n  const imageStyle = style.getImage();\n  if (imageStyle) {\n    const imageState = imageStyle.getImageState();\n    if (imageState == ImageState.LOADED || imageState == ImageState.ERROR) {\n      imageStyle.unlistenImageChange(listener);\n    } else {\n      if (imageState == ImageState.IDLE) {\n        imageStyle.load();\n      }\n      imageStyle.listenImageChange(listener);\n      loading = true;\n    }\n  }\n  renderFeatureInternal(\n    replayGroup,\n    feature,\n    style,\n    squaredTolerance,\n    transform,\n    declutterBuilderGroup\n  );\n\n  return loading;\n}\n\n/**\n * @param {import(\"../render/canvas/BuilderGroup.js\").default} replayGroup Replay group.\n * @param {import(\"../Feature.js\").FeatureLike} feature Feature.\n * @param {import(\"../style/Style.js\").default} style Style.\n * @param {number} squaredTolerance Squared tolerance.\n * @param {import(\"../proj.js\").TransformFunction} [transform] Optional transform function.\n * @param {import(\"../render/canvas/BuilderGroup.js\").default} [declutterBuilderGroup] Builder for decluttering.\n */\nfunction renderFeatureInternal(\n  replayGroup,\n  feature,\n  style,\n  squaredTolerance,\n  transform,\n  declutterBuilderGroup\n) {\n  const geometry = style.getGeometryFunction()(feature);\n  if (!geometry) {\n    return;\n  }\n  const simplifiedGeometry = geometry.simplifyTransformed(\n    squaredTolerance,\n    transform\n  );\n  const renderer = style.getRenderer();\n  if (renderer) {\n    renderGeometry(replayGroup, simplifiedGeometry, style, feature);\n  } else {\n    const geometryRenderer = GEOMETRY_RENDERERS[simplifiedGeometry.getType()];\n    geometryRenderer(\n      replayGroup,\n      simplifiedGeometry,\n      style,\n      feature,\n      declutterBuilderGroup\n    );\n  }\n}\n\n/**\n * @param {import(\"../render/canvas/BuilderGroup.js\").default} replayGroup Replay group.\n * @param {import(\"../geom/Geometry.js\").default|import(\"../render/Feature.js\").default} geometry Geometry.\n * @param {import(\"../style/Style.js\").default} style Style.\n * @param {import(\"../Feature.js\").FeatureLike} feature Feature.\n */\nfunction renderGeometry(replayGroup, geometry, style, feature) {\n  if (geometry.getType() == 'GeometryCollection') {\n    const geometries =\n      /** @type {import(\"../geom/GeometryCollection.js\").default} */ (\n        geometry\n      ).getGeometries();\n    for (let i = 0, ii = geometries.length; i < ii; ++i) {\n      renderGeometry(replayGroup, geometries[i], style, feature);\n    }\n    return;\n  }\n  const replay = replayGroup.getBuilder(style.getZIndex(), 'Default');\n  replay.drawCustom(\n    /** @type {import(\"../geom/SimpleGeometry.js\").default} */ (geometry),\n    feature,\n    style.getRenderer(),\n    style.getHitDetectionRenderer()\n  );\n}\n\n/**\n * @param {import(\"../render/canvas/BuilderGroup.js\").default} replayGroup Replay group.\n * @param {import(\"../geom/GeometryCollection.js\").default} geometry Geometry.\n * @param {import(\"../style/Style.js\").default} style Style.\n * @param {import(\"../Feature.js\").default} feature Feature.\n * @param {import(\"../render/canvas/BuilderGroup.js\").default} [declutterBuilderGroup] Builder for decluttering.\n */\nfunction renderGeometryCollectionGeometry(\n  replayGroup,\n  geometry,\n  style,\n  feature,\n  declutterBuilderGroup\n) {\n  const geometries = geometry.getGeometriesArray();\n  let i, ii;\n  for (i = 0, ii = geometries.length; i < ii; ++i) {\n    const geometryRenderer = GEOMETRY_RENDERERS[geometries[i].getType()];\n    geometryRenderer(\n      replayGroup,\n      geometries[i],\n      style,\n      feature,\n      declutterBuilderGroup\n    );\n  }\n}\n\n/**\n * @param {import(\"../render/canvas/BuilderGroup.js\").default} builderGroup Replay group.\n * @param {import(\"../geom/LineString.js\").default|import(\"../render/Feature.js\").default} geometry Geometry.\n * @param {import(\"../style/Style.js\").default} style Style.\n * @param {import(\"../Feature.js\").FeatureLike} feature Feature.\n * @param {import(\"../render/canvas/BuilderGroup.js\").default} [declutterBuilderGroup] Builder for decluttering.\n */\nfunction renderLineStringGeometry(\n  builderGroup,\n  geometry,\n  style,\n  feature,\n  declutterBuilderGroup\n) {\n  const strokeStyle = style.getStroke();\n  if (strokeStyle) {\n    const lineStringReplay = builderGroup.getBuilder(\n      style.getZIndex(),\n      'LineString'\n    );\n    lineStringReplay.setFillStrokeStyle(null, strokeStyle);\n    lineStringReplay.drawLineString(geometry, feature);\n  }\n  const textStyle = style.getText();\n  if (textStyle && textStyle.getText()) {\n    const textReplay = (declutterBuilderGroup || builderGroup).getBuilder(\n      style.getZIndex(),\n      'Text'\n    );\n    textReplay.setTextStyle(textStyle);\n    textReplay.drawText(geometry, feature);\n  }\n}\n\n/**\n * @param {import(\"../render/canvas/BuilderGroup.js\").default} builderGroup Replay group.\n * @param {import(\"../geom/MultiLineString.js\").default|import(\"../render/Feature.js\").default} geometry Geometry.\n * @param {import(\"../style/Style.js\").default} style Style.\n * @param {import(\"../Feature.js\").FeatureLike} feature Feature.\n * @param {import(\"../render/canvas/BuilderGroup.js\").default} [declutterBuilderGroup] Builder for decluttering.\n */\nfunction renderMultiLineStringGeometry(\n  builderGroup,\n  geometry,\n  style,\n  feature,\n  declutterBuilderGroup\n) {\n  const strokeStyle = style.getStroke();\n  if (strokeStyle) {\n    const lineStringReplay = builderGroup.getBuilder(\n      style.getZIndex(),\n      'LineString'\n    );\n    lineStringReplay.setFillStrokeStyle(null, strokeStyle);\n    lineStringReplay.drawMultiLineString(geometry, feature);\n  }\n  const textStyle = style.getText();\n  if (textStyle && textStyle.getText()) {\n    const textReplay = (declutterBuilderGroup || builderGroup).getBuilder(\n      style.getZIndex(),\n      'Text'\n    );\n    textReplay.setTextStyle(textStyle);\n    textReplay.drawText(geometry, feature);\n  }\n}\n\n/**\n * @param {import(\"../render/canvas/BuilderGroup.js\").default} builderGroup Replay group.\n * @param {import(\"../geom/MultiPolygon.js\").default} geometry Geometry.\n * @param {import(\"../style/Style.js\").default} style Style.\n * @param {import(\"../Feature.js\").default} feature Feature.\n * @param {import(\"../render/canvas/BuilderGroup.js\").default} [declutterBuilderGroup] Builder for decluttering.\n */\nfunction renderMultiPolygonGeometry(\n  builderGroup,\n  geometry,\n  style,\n  feature,\n  declutterBuilderGroup\n) {\n  const fillStyle = style.getFill();\n  const strokeStyle = style.getStroke();\n  if (strokeStyle || fillStyle) {\n    const polygonReplay = builderGroup.getBuilder(style.getZIndex(), 'Polygon');\n    polygonReplay.setFillStrokeStyle(fillStyle, strokeStyle);\n    polygonReplay.drawMultiPolygon(geometry, feature);\n  }\n  const textStyle = style.getText();\n  if (textStyle && textStyle.getText()) {\n    const textReplay = (declutterBuilderGroup || builderGroup).getBuilder(\n      style.getZIndex(),\n      'Text'\n    );\n    textReplay.setTextStyle(textStyle);\n    textReplay.drawText(geometry, feature);\n  }\n}\n\n/**\n * @param {import(\"../render/canvas/BuilderGroup.js\").default} builderGroup Replay group.\n * @param {import(\"../geom/Point.js\").default|import(\"../render/Feature.js\").default} geometry Geometry.\n * @param {import(\"../style/Style.js\").default} style Style.\n * @param {import(\"../Feature.js\").FeatureLike} feature Feature.\n * @param {import(\"../render/canvas/BuilderGroup.js\").default} [declutterBuilderGroup] Builder for decluttering.\n */\nfunction renderPointGeometry(\n  builderGroup,\n  geometry,\n  style,\n  feature,\n  declutterBuilderGroup\n) {\n  const imageStyle = style.getImage();\n  const textStyle = style.getText();\n  /** @type {import(\"../render/canvas.js\").DeclutterImageWithText} */\n  let declutterImageWithText;\n  if (imageStyle) {\n    if (imageStyle.getImageState() != ImageState.LOADED) {\n      return;\n    }\n    let imageBuilderGroup = builderGroup;\n    if (declutterBuilderGroup) {\n      const declutterMode = imageStyle.getDeclutterMode();\n      if (declutterMode !== 'none') {\n        imageBuilderGroup = declutterBuilderGroup;\n        if (declutterMode === 'obstacle') {\n          // draw in non-declutter group:\n          const imageReplay = builderGroup.getBuilder(\n            style.getZIndex(),\n            'Image'\n          );\n          imageReplay.setImageStyle(imageStyle, declutterImageWithText);\n          imageReplay.drawPoint(geometry, feature);\n        } else if (textStyle && textStyle.getText()) {\n          declutterImageWithText = {};\n        }\n      }\n    }\n    const imageReplay = imageBuilderGroup.getBuilder(\n      style.getZIndex(),\n      'Image'\n    );\n    imageReplay.setImageStyle(imageStyle, declutterImageWithText);\n    imageReplay.drawPoint(geometry, feature);\n  }\n  if (textStyle && textStyle.getText()) {\n    let textBuilderGroup = builderGroup;\n    if (declutterBuilderGroup) {\n      textBuilderGroup = declutterBuilderGroup;\n    }\n    const textReplay = textBuilderGroup.getBuilder(style.getZIndex(), 'Text');\n    textReplay.setTextStyle(textStyle, declutterImageWithText);\n    textReplay.drawText(geometry, feature);\n  }\n}\n\n/**\n * @param {import(\"../render/canvas/BuilderGroup.js\").default} builderGroup Replay group.\n * @param {import(\"../geom/MultiPoint.js\").default|import(\"../render/Feature.js\").default} geometry Geometry.\n * @param {import(\"../style/Style.js\").default} style Style.\n * @param {import(\"../Feature.js\").FeatureLike} feature Feature.\n * @param {import(\"../render/canvas/BuilderGroup.js\").default} [declutterBuilderGroup] Builder for decluttering.\n */\nfunction renderMultiPointGeometry(\n  builderGroup,\n  geometry,\n  style,\n  feature,\n  declutterBuilderGroup\n) {\n  const imageStyle = style.getImage();\n  const textStyle = style.getText();\n  /** @type {import(\"../render/canvas.js\").DeclutterImageWithText} */\n  let declutterImageWithText;\n  if (imageStyle) {\n    if (imageStyle.getImageState() != ImageState.LOADED) {\n      return;\n    }\n    let imageBuilderGroup = builderGroup;\n    if (declutterBuilderGroup) {\n      const declutterMode = imageStyle.getDeclutterMode();\n      if (declutterMode !== 'none') {\n        imageBuilderGroup = declutterBuilderGroup;\n        if (declutterMode === 'obstacle') {\n          // draw in non-declutter group:\n          const imageReplay = builderGroup.getBuilder(\n            style.getZIndex(),\n            'Image'\n          );\n          imageReplay.setImageStyle(imageStyle, declutterImageWithText);\n          imageReplay.drawMultiPoint(geometry, feature);\n        } else if (textStyle && textStyle.getText()) {\n          declutterImageWithText = {};\n        }\n      }\n    }\n    const imageReplay = imageBuilderGroup.getBuilder(\n      style.getZIndex(),\n      'Image'\n    );\n    imageReplay.setImageStyle(imageStyle, declutterImageWithText);\n    imageReplay.drawMultiPoint(geometry, feature);\n  }\n  if (textStyle && textStyle.getText()) {\n    let textBuilderGroup = builderGroup;\n    if (declutterBuilderGroup) {\n      textBuilderGroup = declutterBuilderGroup;\n    }\n    const textReplay = textBuilderGroup.getBuilder(style.getZIndex(), 'Text');\n    textReplay.setTextStyle(textStyle, declutterImageWithText);\n    textReplay.drawText(geometry, feature);\n  }\n}\n\n/**\n * @param {import(\"../render/canvas/BuilderGroup.js\").default} builderGroup Replay group.\n * @param {import(\"../geom/Polygon.js\").default|import(\"../render/Feature.js\").default} geometry Geometry.\n * @param {import(\"../style/Style.js\").default} style Style.\n * @param {import(\"../Feature.js\").FeatureLike} feature Feature.\n * @param {import(\"../render/canvas/BuilderGroup.js\").default} [declutterBuilderGroup] Builder for decluttering.\n */\nfunction renderPolygonGeometry(\n  builderGroup,\n  geometry,\n  style,\n  feature,\n  declutterBuilderGroup\n) {\n  const fillStyle = style.getFill();\n  const strokeStyle = style.getStroke();\n  if (fillStyle || strokeStyle) {\n    const polygonReplay = builderGroup.getBuilder(style.getZIndex(), 'Polygon');\n    polygonReplay.setFillStrokeStyle(fillStyle, strokeStyle);\n    polygonReplay.drawPolygon(geometry, feature);\n  }\n  const textStyle = style.getText();\n  if (textStyle && textStyle.getText()) {\n    const textReplay = (declutterBuilderGroup || builderGroup).getBuilder(\n      style.getZIndex(),\n      'Text'\n    );\n    textReplay.setTextStyle(textStyle);\n    textReplay.drawText(geometry, feature);\n  }\n}\n","/**\n * @module ol/source/Vector\n */\n\nimport Collection from '../Collection.js';\nimport CollectionEventType from '../CollectionEventType.js';\nimport Event from '../events/Event.js';\nimport EventType from '../events/EventType.js';\nimport ObjectEventType from '../ObjectEventType.js';\nimport RBush from '../structs/RBush.js';\nimport Source from './Source.js';\nimport VectorEventType from './VectorEventType.js';\nimport {TRUE, VOID} from '../functions.js';\nimport {all as allStrategy} from '../loadingstrategy.js';\nimport {assert} from '../asserts.js';\nimport {containsExtent, equals, wrapAndSliceX} from '../extent.js';\nimport {extend} from '../array.js';\nimport {getUid} from '../util.js';\nimport {isEmpty} from '../obj.js';\nimport {listen, unlistenByKey} from '../events.js';\nimport {xhr} from '../featureloader.js';\n\n/**\n * A function that takes an {@link module:ol/extent~Extent} and a resolution as arguments, and\n * returns an array of {@link module:ol/extent~Extent} with the extents to load. Usually this\n * is one of the standard {@link module:ol/loadingstrategy} strategies.\n *\n * @typedef {function(import(\"../extent.js\").Extent, number, import(\"../proj/Projection.js\").default): Array<import(\"../extent.js\").Extent>} LoadingStrategy\n * @api\n */\n\n/**\n * @classdesc\n * Events emitted by {@link module:ol/source/Vector~VectorSource} instances are instances of this\n * type.\n * @template {import(\"../geom/Geometry.js\").default} [Geometry=import(\"../geom/Geometry.js\").default]\n */\nexport class VectorSourceEvent extends Event {\n  /**\n   * @param {string} type Type.\n   * @param {import(\"../Feature.js\").default<Geometry>} [feature] Feature.\n   * @param {Array<import(\"../Feature.js\").default<Geometry>>} [features] Features.\n   */\n  constructor(type, feature, features) {\n    super(type);\n\n    /**\n     * The added or removed feature for the `ADDFEATURE` and `REMOVEFEATURE` events, `undefined` otherwise.\n     * @type {import(\"../Feature.js\").default<Geometry>|undefined}\n     * @api\n     */\n    this.feature = feature;\n\n    /**\n     * The loaded features for the `FEATURESLOADED` event, `undefined` otherwise.\n     * @type {Array<import(\"../Feature.js\").default<Geometry>>|undefined}\n     * @api\n     */\n    this.features = features;\n  }\n}\n\n/***\n * @template Return\n * @typedef {import(\"../Observable\").OnSignature<import(\"../Observable\").EventTypes, import(\"../events/Event.js\").default, Return> &\n *   import(\"../Observable\").OnSignature<import(\"../ObjectEventType\").Types, import(\"../Object\").ObjectEvent, Return> &\n *   import(\"../Observable\").OnSignature<import(\"./VectorEventType\").VectorSourceEventTypes, VectorSourceEvent, Return> &\n *   import(\"../Observable\").CombinedOnSignature<import(\"../Observable\").EventTypes|import(\"../ObjectEventType\").Types|\n *     import(\"./VectorEventType\").VectorSourceEventTypes, Return>} VectorSourceOnSignature\n */\n\n/**\n * @template {import(\"../geom/Geometry.js\").default} [Geometry=import(\"../geom/Geometry.js\").default]\n * @typedef {Object} Options\n * @property {import(\"./Source.js\").AttributionLike} [attributions] Attributions.\n * @property {Array<import(\"../Feature.js\").default<Geometry>>|Collection<import(\"../Feature.js\").default<Geometry>>} [features]\n * Features. If provided as {@link module:ol/Collection~Collection}, the features in the source\n * and the collection will stay in sync.\n * @property {import(\"../format/Feature.js\").default} [format] The feature format used by the XHR\n * feature loader when `url` is set. Required if `url` is set, otherwise ignored.\n * @property {import(\"../featureloader.js\").FeatureLoader} [loader]\n * The loader function used to load features, from a remote source for example.\n * If this is not set and `url` is set, the source will create and use an XHR\n * feature loader. The `'featuresloadend'` and `'featuresloaderror'` events\n * will only fire if the `success` and `failure` callbacks are used.\n *\n * Example:\n *\n * ```js\n * import Vector from 'ol/source/Vector.js';\n * import GeoJSON from 'ol/format/GeoJSON.js';\n * import {bbox} from 'ol/loadingstrategy.js';\n *\n * const vectorSource = new Vector({\n *   format: new GeoJSON(),\n *   loader: function(extent, resolution, projection, success, failure) {\n *      const proj = projection.getCode();\n *      const url = 'https://ahocevar.com/geoserver/wfs?service=WFS&' +\n *          'version=1.1.0&request=GetFeature&typename=osm:water_areas&' +\n *          'outputFormat=application/json&srsname=' + proj + '&' +\n *          'bbox=' + extent.join(',') + ',' + proj;\n *      const xhr = new XMLHttpRequest();\n *      xhr.open('GET', url);\n *      const onError = function() {\n *        vectorSource.removeLoadedExtent(extent);\n *        failure();\n *      }\n *      xhr.onerror = onError;\n *      xhr.onload = function() {\n *        if (xhr.status == 200) {\n *          const features = vectorSource.getFormat().readFeatures(xhr.responseText);\n *          vectorSource.addFeatures(features);\n *          success(features);\n *        } else {\n *          onError();\n *        }\n *      }\n *      xhr.send();\n *    },\n *    strategy: bbox,\n *  });\n * ```\n * @property {boolean} [overlaps=true] This source may have overlapping geometries.\n * Setting this to `false` (e.g. for sources with polygons that represent administrative\n * boundaries or TopoJSON sources) allows the renderer to optimise fill and\n * stroke operations.\n * @property {LoadingStrategy} [strategy] The loading strategy to use.\n * By default an {@link module:ol/loadingstrategy.all}\n * strategy is used, a one-off strategy which loads all features at once.\n * @property {string|import(\"../featureloader.js\").FeatureUrlFunction} [url]\n * Setting this option instructs the source to load features using an XHR loader\n * (see {@link module:ol/featureloader.xhr}). Use a `string` and an\n * {@link module:ol/loadingstrategy.all} for a one-off download of all features from\n * the given URL. Use a {@link module:ol/featureloader~FeatureUrlFunction} to generate the url with\n * other loading strategies.\n * Requires `format` to be set as well.\n * When default XHR feature loader is provided, the features will\n * be transformed from the data projection to the view projection\n * during parsing. If your remote data source does not advertise its projection\n * properly, this transformation will be incorrect. For some formats, the\n * default projection (usually EPSG:4326) can be overridden by setting the\n * dataProjection constructor option on the format.\n * Note that if a source contains non-feature data, such as a GeoJSON geometry\n * or a KML NetworkLink, these will be ignored. Use a custom loader to load these.\n * @property {boolean} [useSpatialIndex=true]\n * By default, an RTree is used as spatial index. When features are removed and\n * added frequently, and the total number of features is low, setting this to\n * `false` may improve performance.\n *\n * Note that\n * {@link module:ol/source/Vector~VectorSource#getFeaturesInExtent},\n * {@link module:ol/source/Vector~VectorSource#getClosestFeatureToCoordinate} and\n * {@link module:ol/source/Vector~VectorSource#getExtent} cannot be used when `useSpatialIndex` is\n * set to `false`, and {@link module:ol/source/Vector~VectorSource#forEachFeatureInExtent} will loop\n * through all features.\n *\n * When set to `false`, the features will be maintained in an\n * {@link module:ol/Collection~Collection}, which can be retrieved through\n * {@link module:ol/source/Vector~VectorSource#getFeaturesCollection}.\n * @property {boolean} [wrapX=true] Wrap the world horizontally. For vector editing across the\n * -180° and 180° meridians to work properly, this should be set to `false`. The\n * resulting geometry coordinates will then exceed the world bounds.\n */\n\n/**\n * @classdesc\n * Provides a source of features for vector layers. Vector features provided\n * by this source are suitable for editing. See {@link module:ol/source/VectorTile~VectorTile} for\n * vector data that is optimized for rendering.\n *\n * @fires VectorSourceEvent\n * @api\n * @template {import(\"../geom/Geometry.js\").default} [Geometry=import(\"../geom/Geometry.js\").default]\n */\nclass VectorSource extends Source {\n  /**\n   * @param {Options<Geometry>} [options] Vector source options.\n   */\n  constructor(options) {\n    options = options || {};\n\n    super({\n      attributions: options.attributions,\n      interpolate: true,\n      projection: undefined,\n      state: 'ready',\n      wrapX: options.wrapX !== undefined ? options.wrapX : true,\n    });\n\n    /***\n     * @type {VectorSourceOnSignature<import(\"../events\").EventsKey>}\n     */\n    this.on;\n\n    /***\n     * @type {VectorSourceOnSignature<import(\"../events\").EventsKey>}\n     */\n    this.once;\n\n    /***\n     * @type {VectorSourceOnSignature<void>}\n     */\n    this.un;\n\n    /**\n     * @private\n     * @type {import(\"../featureloader.js\").FeatureLoader}\n     */\n    this.loader_ = VOID;\n\n    /**\n     * @private\n     * @type {import(\"../format/Feature.js\").default|undefined}\n     */\n    this.format_ = options.format;\n\n    /**\n     * @private\n     * @type {boolean}\n     */\n    this.overlaps_ = options.overlaps === undefined ? true : options.overlaps;\n\n    /**\n     * @private\n     * @type {string|import(\"../featureloader.js\").FeatureUrlFunction|undefined}\n     */\n    this.url_ = options.url;\n\n    if (options.loader !== undefined) {\n      this.loader_ = options.loader;\n    } else if (this.url_ !== undefined) {\n      assert(this.format_, 7); // `format` must be set when `url` is set\n      // create a XHR feature loader for \"url\" and \"format\"\n      this.loader_ = xhr(\n        this.url_,\n        /** @type {import(\"../format/Feature.js\").default} */ (this.format_)\n      );\n    }\n\n    /**\n     * @private\n     * @type {LoadingStrategy}\n     */\n    this.strategy_ =\n      options.strategy !== undefined ? options.strategy : allStrategy;\n\n    const useSpatialIndex =\n      options.useSpatialIndex !== undefined ? options.useSpatialIndex : true;\n\n    /**\n     * @private\n     * @type {RBush<import(\"../Feature.js\").default<Geometry>>}\n     */\n    this.featuresRtree_ = useSpatialIndex ? new RBush() : null;\n\n    /**\n     * @private\n     * @type {RBush<{extent: import(\"../extent.js\").Extent}>}\n     */\n    this.loadedExtentsRtree_ = new RBush();\n\n    /**\n     * @type {number}\n     * @private\n     */\n    this.loadingExtentsCount_ = 0;\n\n    /**\n     * @private\n     * @type {!Object<string, import(\"../Feature.js\").default<Geometry>>}\n     */\n    this.nullGeometryFeatures_ = {};\n\n    /**\n     * A lookup of features by id (the return from feature.getId()).\n     * @private\n     * @type {!Object<string, import(\"../Feature.js\").default<Geometry>>}\n     */\n    this.idIndex_ = {};\n\n    /**\n     * A lookup of features by uid (using getUid(feature)).\n     * @private\n     * @type {!Object<string, import(\"../Feature.js\").default<Geometry>>}\n     */\n    this.uidIndex_ = {};\n\n    /**\n     * @private\n     * @type {Object<string, Array<import(\"../events.js\").EventsKey>>}\n     */\n    this.featureChangeKeys_ = {};\n\n    /**\n     * @private\n     * @type {Collection<import(\"../Feature.js\").default<Geometry>>|null}\n     */\n    this.featuresCollection_ = null;\n\n    /** @type {Collection<import(\"../Feature.js\").default<Geometry>>} */\n    let collection;\n    /** @type {Array<import(\"../Feature.js\").default<Geometry>>} */\n    let features;\n    if (Array.isArray(options.features)) {\n      features = options.features;\n    } else if (options.features) {\n      collection = options.features;\n      features = collection.getArray();\n    }\n    if (!useSpatialIndex && collection === undefined) {\n      collection = new Collection(features);\n    }\n    if (features !== undefined) {\n      this.addFeaturesInternal(features);\n    }\n    if (collection !== undefined) {\n      this.bindFeaturesCollection_(collection);\n    }\n  }\n\n  /**\n   * Add a single feature to the source.  If you want to add a batch of features\n   * at once, call {@link module:ol/source/Vector~VectorSource#addFeatures #addFeatures()}\n   * instead. A feature will not be added to the source if feature with\n   * the same id is already there. The reason for this behavior is to avoid\n   * feature duplication when using bbox or tile loading strategies.\n   * Note: this also applies if an {@link module:ol/Collection~Collection} is used for features,\n   * meaning that if a feature with a duplicate id is added in the collection, it will\n   * be removed from it right away.\n   * @param {import(\"../Feature.js\").default<Geometry>} feature Feature to add.\n   * @api\n   */\n  addFeature(feature) {\n    this.addFeatureInternal(feature);\n    this.changed();\n  }\n\n  /**\n   * Add a feature without firing a `change` event.\n   * @param {import(\"../Feature.js\").default<Geometry>} feature Feature.\n   * @protected\n   */\n  addFeatureInternal(feature) {\n    const featureKey = getUid(feature);\n\n    if (!this.addToIndex_(featureKey, feature)) {\n      if (this.featuresCollection_) {\n        this.featuresCollection_.remove(feature);\n      }\n      return;\n    }\n\n    this.setupChangeEvents_(featureKey, feature);\n\n    const geometry = feature.getGeometry();\n    if (geometry) {\n      const extent = geometry.getExtent();\n      if (this.featuresRtree_) {\n        this.featuresRtree_.insert(extent, feature);\n      }\n    } else {\n      this.nullGeometryFeatures_[featureKey] = feature;\n    }\n\n    this.dispatchEvent(\n      new VectorSourceEvent(VectorEventType.ADDFEATURE, feature)\n    );\n  }\n\n  /**\n   * @param {string} featureKey Unique identifier for the feature.\n   * @param {import(\"../Feature.js\").default<Geometry>} feature The feature.\n   * @private\n   */\n  setupChangeEvents_(featureKey, feature) {\n    this.featureChangeKeys_[featureKey] = [\n      listen(feature, EventType.CHANGE, this.handleFeatureChange_, this),\n      listen(\n        feature,\n        ObjectEventType.PROPERTYCHANGE,\n        this.handleFeatureChange_,\n        this\n      ),\n    ];\n  }\n\n  /**\n   * @param {string} featureKey Unique identifier for the feature.\n   * @param {import(\"../Feature.js\").default<Geometry>} feature The feature.\n   * @return {boolean} The feature is \"valid\", in the sense that it is also a\n   *     candidate for insertion into the Rtree.\n   * @private\n   */\n  addToIndex_(featureKey, feature) {\n    let valid = true;\n    const id = feature.getId();\n    if (id !== undefined) {\n      if (!(id.toString() in this.idIndex_)) {\n        this.idIndex_[id.toString()] = feature;\n      } else {\n        valid = false;\n      }\n    }\n    if (valid) {\n      assert(!(featureKey in this.uidIndex_), 30); // The passed `feature` was already added to the source\n      this.uidIndex_[featureKey] = feature;\n    }\n    return valid;\n  }\n\n  /**\n   * Add a batch of features to the source.\n   * @param {Array<import(\"../Feature.js\").default<Geometry>>} features Features to add.\n   * @api\n   */\n  addFeatures(features) {\n    this.addFeaturesInternal(features);\n    this.changed();\n  }\n\n  /**\n   * Add features without firing a `change` event.\n   * @param {Array<import(\"../Feature.js\").default<Geometry>>} features Features.\n   * @protected\n   */\n  addFeaturesInternal(features) {\n    const extents = [];\n    const newFeatures = [];\n    const geometryFeatures = [];\n\n    for (let i = 0, length = features.length; i < length; i++) {\n      const feature = features[i];\n      const featureKey = getUid(feature);\n      if (this.addToIndex_(featureKey, feature)) {\n        newFeatures.push(feature);\n      }\n    }\n\n    for (let i = 0, length = newFeatures.length; i < length; i++) {\n      const feature = newFeatures[i];\n      const featureKey = getUid(feature);\n      this.setupChangeEvents_(featureKey, feature);\n\n      const geometry = feature.getGeometry();\n      if (geometry) {\n        const extent = geometry.getExtent();\n        extents.push(extent);\n        geometryFeatures.push(feature);\n      } else {\n        this.nullGeometryFeatures_[featureKey] = feature;\n      }\n    }\n    if (this.featuresRtree_) {\n      this.featuresRtree_.load(extents, geometryFeatures);\n    }\n\n    if (this.hasListener(VectorEventType.ADDFEATURE)) {\n      for (let i = 0, length = newFeatures.length; i < length; i++) {\n        this.dispatchEvent(\n          new VectorSourceEvent(VectorEventType.ADDFEATURE, newFeatures[i])\n        );\n      }\n    }\n  }\n\n  /**\n   * @param {!Collection<import(\"../Feature.js\").default<Geometry>>} collection Collection.\n   * @private\n   */\n  bindFeaturesCollection_(collection) {\n    let modifyingCollection = false;\n    this.addEventListener(\n      VectorEventType.ADDFEATURE,\n      /**\n       * @param {VectorSourceEvent<Geometry>} evt The vector source event\n       */\n      function (evt) {\n        if (!modifyingCollection) {\n          modifyingCollection = true;\n          collection.push(evt.feature);\n          modifyingCollection = false;\n        }\n      }\n    );\n    this.addEventListener(\n      VectorEventType.REMOVEFEATURE,\n      /**\n       * @param {VectorSourceEvent<Geometry>} evt The vector source event\n       */\n      function (evt) {\n        if (!modifyingCollection) {\n          modifyingCollection = true;\n          collection.remove(evt.feature);\n          modifyingCollection = false;\n        }\n      }\n    );\n    collection.addEventListener(\n      CollectionEventType.ADD,\n      /**\n       * @param {import(\"../Collection.js\").CollectionEvent<import(\"../Feature.js\").default<Geometry>>} evt The collection event\n       */\n      (evt) => {\n        if (!modifyingCollection) {\n          modifyingCollection = true;\n          this.addFeature(evt.element);\n          modifyingCollection = false;\n        }\n      }\n    );\n    collection.addEventListener(\n      CollectionEventType.REMOVE,\n      /**\n       * @param {import(\"../Collection.js\").CollectionEvent<import(\"../Feature.js\").default<Geometry>>} evt The collection event\n       */\n      (evt) => {\n        if (!modifyingCollection) {\n          modifyingCollection = true;\n          this.removeFeature(evt.element);\n          modifyingCollection = false;\n        }\n      }\n    );\n    this.featuresCollection_ = collection;\n  }\n\n  /**\n   * Remove all features from the source.\n   * @param {boolean} [fast] Skip dispatching of {@link module:ol/source/Vector.VectorSourceEvent#event:removefeature} events.\n   * @api\n   */\n  clear(fast) {\n    if (fast) {\n      for (const featureId in this.featureChangeKeys_) {\n        const keys = this.featureChangeKeys_[featureId];\n        keys.forEach(unlistenByKey);\n      }\n      if (!this.featuresCollection_) {\n        this.featureChangeKeys_ = {};\n        this.idIndex_ = {};\n        this.uidIndex_ = {};\n      }\n    } else {\n      if (this.featuresRtree_) {\n        const removeAndIgnoreReturn = (feature) => {\n          this.removeFeatureInternal(feature);\n        };\n        this.featuresRtree_.forEach(removeAndIgnoreReturn);\n        for (const id in this.nullGeometryFeatures_) {\n          this.removeFeatureInternal(this.nullGeometryFeatures_[id]);\n        }\n      }\n    }\n    if (this.featuresCollection_) {\n      this.featuresCollection_.clear();\n    }\n\n    if (this.featuresRtree_) {\n      this.featuresRtree_.clear();\n    }\n    this.nullGeometryFeatures_ = {};\n\n    const clearEvent = new VectorSourceEvent(VectorEventType.CLEAR);\n    this.dispatchEvent(clearEvent);\n    this.changed();\n  }\n\n  /**\n   * Iterate through all features on the source, calling the provided callback\n   * with each one.  If the callback returns any \"truthy\" value, iteration will\n   * stop and the function will return the same value.\n   * Note: this function only iterate through the feature that have a defined geometry.\n   *\n   * @param {function(import(\"../Feature.js\").default<Geometry>): T} callback Called with each feature\n   *     on the source.  Return a truthy value to stop iteration.\n   * @return {T|undefined} The return value from the last call to the callback.\n   * @template T\n   * @api\n   */\n  forEachFeature(callback) {\n    if (this.featuresRtree_) {\n      return this.featuresRtree_.forEach(callback);\n    }\n    if (this.featuresCollection_) {\n      this.featuresCollection_.forEach(callback);\n    }\n  }\n\n  /**\n   * Iterate through all features whose geometries contain the provided\n   * coordinate, calling the callback with each feature.  If the callback returns\n   * a \"truthy\" value, iteration will stop and the function will return the same\n   * value.\n   *\n   * @param {import(\"../coordinate.js\").Coordinate} coordinate Coordinate.\n   * @param {function(import(\"../Feature.js\").default<Geometry>): T} callback Called with each feature\n   *     whose goemetry contains the provided coordinate.\n   * @return {T|undefined} The return value from the last call to the callback.\n   * @template T\n   */\n  forEachFeatureAtCoordinateDirect(coordinate, callback) {\n    const extent = [coordinate[0], coordinate[1], coordinate[0], coordinate[1]];\n    return this.forEachFeatureInExtent(extent, function (feature) {\n      const geometry = feature.getGeometry();\n      if (geometry.intersectsCoordinate(coordinate)) {\n        return callback(feature);\n      }\n      return undefined;\n    });\n  }\n\n  /**\n   * Iterate through all features whose bounding box intersects the provided\n   * extent (note that the feature's geometry may not intersect the extent),\n   * calling the callback with each feature.  If the callback returns a \"truthy\"\n   * value, iteration will stop and the function will return the same value.\n   *\n   * If you are interested in features whose geometry intersects an extent, call\n   * the {@link module:ol/source/Vector~VectorSource#forEachFeatureIntersectingExtent #forEachFeatureIntersectingExtent()} method instead.\n   *\n   * When `useSpatialIndex` is set to false, this method will loop through all\n   * features, equivalent to {@link module:ol/source/Vector~VectorSource#forEachFeature #forEachFeature()}.\n   *\n   * @param {import(\"../extent.js\").Extent} extent Extent.\n   * @param {function(import(\"../Feature.js\").default<Geometry>): T} callback Called with each feature\n   *     whose bounding box intersects the provided extent.\n   * @return {T|undefined} The return value from the last call to the callback.\n   * @template T\n   * @api\n   */\n  forEachFeatureInExtent(extent, callback) {\n    if (this.featuresRtree_) {\n      return this.featuresRtree_.forEachInExtent(extent, callback);\n    }\n    if (this.featuresCollection_) {\n      this.featuresCollection_.forEach(callback);\n    }\n  }\n\n  /**\n   * Iterate through all features whose geometry intersects the provided extent,\n   * calling the callback with each feature.  If the callback returns a \"truthy\"\n   * value, iteration will stop and the function will return the same value.\n   *\n   * If you only want to test for bounding box intersection, call the\n   * {@link module:ol/source/Vector~VectorSource#forEachFeatureInExtent #forEachFeatureInExtent()} method instead.\n   *\n   * @param {import(\"../extent.js\").Extent} extent Extent.\n   * @param {function(import(\"../Feature.js\").default<Geometry>): T} callback Called with each feature\n   *     whose geometry intersects the provided extent.\n   * @return {T|undefined} The return value from the last call to the callback.\n   * @template T\n   * @api\n   */\n  forEachFeatureIntersectingExtent(extent, callback) {\n    return this.forEachFeatureInExtent(\n      extent,\n      /**\n       * @param {import(\"../Feature.js\").default<Geometry>} feature Feature.\n       * @return {T|undefined} The return value from the last call to the callback.\n       */\n      function (feature) {\n        const geometry = feature.getGeometry();\n        if (geometry.intersectsExtent(extent)) {\n          const result = callback(feature);\n          if (result) {\n            return result;\n          }\n        }\n      }\n    );\n  }\n\n  /**\n   * Get the features collection associated with this source. Will be `null`\n   * unless the source was configured with `useSpatialIndex` set to `false`, or\n   * with an {@link module:ol/Collection~Collection} as `features`.\n   * @return {Collection<import(\"../Feature.js\").default<Geometry>>|null} The collection of features.\n   * @api\n   */\n  getFeaturesCollection() {\n    return this.featuresCollection_;\n  }\n\n  /**\n   * Get a snapshot of the features currently on the source in random order. The returned array\n   * is a copy, the features are references to the features in the source.\n   * @return {Array<import(\"../Feature.js\").default<Geometry>>} Features.\n   * @api\n   */\n  getFeatures() {\n    let features;\n    if (this.featuresCollection_) {\n      features = this.featuresCollection_.getArray().slice(0);\n    } else if (this.featuresRtree_) {\n      features = this.featuresRtree_.getAll();\n      if (!isEmpty(this.nullGeometryFeatures_)) {\n        extend(features, Object.values(this.nullGeometryFeatures_));\n      }\n    }\n    return /** @type {Array<import(\"../Feature.js\").default<Geometry>>} */ (\n      features\n    );\n  }\n\n  /**\n   * Get all features whose geometry intersects the provided coordinate.\n   * @param {import(\"../coordinate.js\").Coordinate} coordinate Coordinate.\n   * @return {Array<import(\"../Feature.js\").default<Geometry>>} Features.\n   * @api\n   */\n  getFeaturesAtCoordinate(coordinate) {\n    const features = [];\n    this.forEachFeatureAtCoordinateDirect(coordinate, function (feature) {\n      features.push(feature);\n    });\n    return features;\n  }\n\n  /**\n   * Get all features whose bounding box intersects the provided extent.  Note that this returns an array of\n   * all features intersecting the given extent in random order (so it may include\n   * features whose geometries do not intersect the extent).\n   *\n   * When `useSpatialIndex` is set to false, this method will return all\n   * features.\n   *\n   * @param {import(\"../extent.js\").Extent} extent Extent.\n   * @param {import(\"../proj/Projection.js\").default} [projection] Include features\n   * where `extent` exceeds the x-axis bounds of `projection` and wraps around the world.\n   * @return {Array<import(\"../Feature.js\").default<Geometry>>} Features.\n   * @api\n   */\n  getFeaturesInExtent(extent, projection) {\n    if (this.featuresRtree_) {\n      const multiWorld = projection && projection.canWrapX() && this.getWrapX();\n\n      if (!multiWorld) {\n        return this.featuresRtree_.getInExtent(extent);\n      }\n\n      const extents = wrapAndSliceX(extent, projection);\n\n      return [].concat(\n        ...extents.map((anExtent) => this.featuresRtree_.getInExtent(anExtent))\n      );\n    }\n    if (this.featuresCollection_) {\n      return this.featuresCollection_.getArray().slice(0);\n    }\n    return [];\n  }\n\n  /**\n   * Get the closest feature to the provided coordinate.\n   *\n   * This method is not available when the source is configured with\n   * `useSpatialIndex` set to `false`.\n   * @param {import(\"../coordinate.js\").Coordinate} coordinate Coordinate.\n   * @param {function(import(\"../Feature.js\").default<Geometry>):boolean} [filter] Feature filter function.\n   *     The filter function will receive one argument, the {@link module:ol/Feature~Feature feature}\n   *     and it should return a boolean value. By default, no filtering is made.\n   * @return {import(\"../Feature.js\").default<Geometry>} Closest feature.\n   * @api\n   */\n  getClosestFeatureToCoordinate(coordinate, filter) {\n    // Find the closest feature using branch and bound.  We start searching an\n    // infinite extent, and find the distance from the first feature found.  This\n    // becomes the closest feature.  We then compute a smaller extent which any\n    // closer feature must intersect.  We continue searching with this smaller\n    // extent, trying to find a closer feature.  Every time we find a closer\n    // feature, we update the extent being searched so that any even closer\n    // feature must intersect it.  We continue until we run out of features.\n    const x = coordinate[0];\n    const y = coordinate[1];\n    let closestFeature = null;\n    const closestPoint = [NaN, NaN];\n    let minSquaredDistance = Infinity;\n    const extent = [-Infinity, -Infinity, Infinity, Infinity];\n    filter = filter ? filter : TRUE;\n    this.featuresRtree_.forEachInExtent(\n      extent,\n      /**\n       * @param {import(\"../Feature.js\").default<Geometry>} feature Feature.\n       */\n      function (feature) {\n        if (filter(feature)) {\n          const geometry = feature.getGeometry();\n          const previousMinSquaredDistance = minSquaredDistance;\n          minSquaredDistance = geometry.closestPointXY(\n            x,\n            y,\n            closestPoint,\n            minSquaredDistance\n          );\n          if (minSquaredDistance < previousMinSquaredDistance) {\n            closestFeature = feature;\n            // This is sneaky.  Reduce the extent that it is currently being\n            // searched while the R-Tree traversal using this same extent object\n            // is still in progress.  This is safe because the new extent is\n            // strictly contained by the old extent.\n            const minDistance = Math.sqrt(minSquaredDistance);\n            extent[0] = x - minDistance;\n            extent[1] = y - minDistance;\n            extent[2] = x + minDistance;\n            extent[3] = y + minDistance;\n          }\n        }\n      }\n    );\n    return closestFeature;\n  }\n\n  /**\n   * Get the extent of the features currently in the source.\n   *\n   * This method is not available when the source is configured with\n   * `useSpatialIndex` set to `false`.\n   * @param {import(\"../extent.js\").Extent} [extent] Destination extent. If provided, no new extent\n   *     will be created. Instead, that extent's coordinates will be overwritten.\n   * @return {import(\"../extent.js\").Extent} Extent.\n   * @api\n   */\n  getExtent(extent) {\n    return this.featuresRtree_.getExtent(extent);\n  }\n\n  /**\n   * Get a feature by its identifier (the value returned by feature.getId()).\n   * Note that the index treats string and numeric identifiers as the same.  So\n   * `source.getFeatureById(2)` will return a feature with id `'2'` or `2`.\n   *\n   * @param {string|number} id Feature identifier.\n   * @return {import(\"../Feature.js\").default<Geometry>|null} The feature (or `null` if not found).\n   * @api\n   */\n  getFeatureById(id) {\n    const feature = this.idIndex_[id.toString()];\n    return feature !== undefined ? feature : null;\n  }\n\n  /**\n   * Get a feature by its internal unique identifier (using `getUid`).\n   *\n   * @param {string} uid Feature identifier.\n   * @return {import(\"../Feature.js\").default<Geometry>|null} The feature (or `null` if not found).\n   */\n  getFeatureByUid(uid) {\n    const feature = this.uidIndex_[uid];\n    return feature !== undefined ? feature : null;\n  }\n\n  /**\n   * Get the format associated with this source.\n   *\n   * @return {import(\"../format/Feature.js\").default|undefined} The feature format.\n   * @api\n   */\n  getFormat() {\n    return this.format_;\n  }\n\n  /**\n   * @return {boolean} The source can have overlapping geometries.\n   */\n  getOverlaps() {\n    return this.overlaps_;\n  }\n\n  /**\n   * Get the url associated with this source.\n   *\n   * @return {string|import(\"../featureloader.js\").FeatureUrlFunction|undefined} The url.\n   * @api\n   */\n  getUrl() {\n    return this.url_;\n  }\n\n  /**\n   * @param {Event} event Event.\n   * @private\n   */\n  handleFeatureChange_(event) {\n    const feature = /** @type {import(\"../Feature.js\").default<Geometry>} */ (\n      event.target\n    );\n    const featureKey = getUid(feature);\n    const geometry = feature.getGeometry();\n    if (!geometry) {\n      if (!(featureKey in this.nullGeometryFeatures_)) {\n        if (this.featuresRtree_) {\n          this.featuresRtree_.remove(feature);\n        }\n        this.nullGeometryFeatures_[featureKey] = feature;\n      }\n    } else {\n      const extent = geometry.getExtent();\n      if (featureKey in this.nullGeometryFeatures_) {\n        delete this.nullGeometryFeatures_[featureKey];\n        if (this.featuresRtree_) {\n          this.featuresRtree_.insert(extent, feature);\n        }\n      } else {\n        if (this.featuresRtree_) {\n          this.featuresRtree_.update(extent, feature);\n        }\n      }\n    }\n    const id = feature.getId();\n    if (id !== undefined) {\n      const sid = id.toString();\n      if (this.idIndex_[sid] !== feature) {\n        this.removeFromIdIndex_(feature);\n        this.idIndex_[sid] = feature;\n      }\n    } else {\n      this.removeFromIdIndex_(feature);\n      this.uidIndex_[featureKey] = feature;\n    }\n    this.changed();\n    this.dispatchEvent(\n      new VectorSourceEvent(VectorEventType.CHANGEFEATURE, feature)\n    );\n  }\n\n  /**\n   * Returns true if the feature is contained within the source.\n   * @param {import(\"../Feature.js\").default<Geometry>} feature Feature.\n   * @return {boolean} Has feature.\n   * @api\n   */\n  hasFeature(feature) {\n    const id = feature.getId();\n    if (id !== undefined) {\n      return id in this.idIndex_;\n    }\n    return getUid(feature) in this.uidIndex_;\n  }\n\n  /**\n   * @return {boolean} Is empty.\n   */\n  isEmpty() {\n    if (this.featuresRtree_) {\n      return (\n        this.featuresRtree_.isEmpty() && isEmpty(this.nullGeometryFeatures_)\n      );\n    }\n    if (this.featuresCollection_) {\n      return this.featuresCollection_.getLength() === 0;\n    }\n    return true;\n  }\n\n  /**\n   * @param {import(\"../extent.js\").Extent} extent Extent.\n   * @param {number} resolution Resolution.\n   * @param {import(\"../proj/Projection.js\").default} projection Projection.\n   */\n  loadFeatures(extent, resolution, projection) {\n    const loadedExtentsRtree = this.loadedExtentsRtree_;\n    const extentsToLoad = this.strategy_(extent, resolution, projection);\n    for (let i = 0, ii = extentsToLoad.length; i < ii; ++i) {\n      const extentToLoad = extentsToLoad[i];\n      const alreadyLoaded = loadedExtentsRtree.forEachInExtent(\n        extentToLoad,\n        /**\n         * @param {{extent: import(\"../extent.js\").Extent}} object Object.\n         * @return {boolean} Contains.\n         */\n        function (object) {\n          return containsExtent(object.extent, extentToLoad);\n        }\n      );\n      if (!alreadyLoaded) {\n        ++this.loadingExtentsCount_;\n        this.dispatchEvent(\n          new VectorSourceEvent(VectorEventType.FEATURESLOADSTART)\n        );\n        this.loader_.call(\n          this,\n          extentToLoad,\n          resolution,\n          projection,\n          (features) => {\n            --this.loadingExtentsCount_;\n            this.dispatchEvent(\n              new VectorSourceEvent(\n                VectorEventType.FEATURESLOADEND,\n                undefined,\n                features\n              )\n            );\n          },\n          () => {\n            --this.loadingExtentsCount_;\n            this.dispatchEvent(\n              new VectorSourceEvent(VectorEventType.FEATURESLOADERROR)\n            );\n          }\n        );\n        loadedExtentsRtree.insert(extentToLoad, {extent: extentToLoad.slice()});\n      }\n    }\n    this.loading =\n      this.loader_.length < 4 ? false : this.loadingExtentsCount_ > 0;\n  }\n\n  refresh() {\n    this.clear(true);\n    this.loadedExtentsRtree_.clear();\n    super.refresh();\n  }\n\n  /**\n   * Remove an extent from the list of loaded extents.\n   * @param {import(\"../extent.js\").Extent} extent Extent.\n   * @api\n   */\n  removeLoadedExtent(extent) {\n    const loadedExtentsRtree = this.loadedExtentsRtree_;\n    let obj;\n    loadedExtentsRtree.forEachInExtent(extent, function (object) {\n      if (equals(object.extent, extent)) {\n        obj = object;\n        return true;\n      }\n    });\n    if (obj) {\n      loadedExtentsRtree.remove(obj);\n    }\n  }\n\n  /**\n   * Remove a single feature from the source.  If you want to remove all features\n   * at once, use the {@link module:ol/source/Vector~VectorSource#clear #clear()} method\n   * instead.\n   * @param {import(\"../Feature.js\").default<Geometry>} feature Feature to remove.\n   * @api\n   */\n  removeFeature(feature) {\n    if (!feature) {\n      return;\n    }\n    const featureKey = getUid(feature);\n    if (featureKey in this.nullGeometryFeatures_) {\n      delete this.nullGeometryFeatures_[featureKey];\n    } else {\n      if (this.featuresRtree_) {\n        this.featuresRtree_.remove(feature);\n      }\n    }\n    const result = this.removeFeatureInternal(feature);\n    if (result) {\n      this.changed();\n    }\n  }\n\n  /**\n   * Remove feature without firing a `change` event.\n   * @param {import(\"../Feature.js\").default<Geometry>} feature Feature.\n   * @return {import(\"../Feature.js\").default<Geometry>|undefined} The removed feature\n   *     (or undefined if the feature was not found).\n   * @protected\n   */\n  removeFeatureInternal(feature) {\n    const featureKey = getUid(feature);\n    const featureChangeKeys = this.featureChangeKeys_[featureKey];\n    if (!featureChangeKeys) {\n      return;\n    }\n    featureChangeKeys.forEach(unlistenByKey);\n    delete this.featureChangeKeys_[featureKey];\n    const id = feature.getId();\n    if (id !== undefined) {\n      delete this.idIndex_[id.toString()];\n    }\n    delete this.uidIndex_[featureKey];\n    this.dispatchEvent(\n      new VectorSourceEvent(VectorEventType.REMOVEFEATURE, feature)\n    );\n    return feature;\n  }\n\n  /**\n   * Remove a feature from the id index.  Called internally when the feature id\n   * may have changed.\n   * @param {import(\"../Feature.js\").default<Geometry>} feature The feature.\n   * @return {boolean} Removed the feature from the index.\n   * @private\n   */\n  removeFromIdIndex_(feature) {\n    let removed = false;\n    for (const id in this.idIndex_) {\n      if (this.idIndex_[id] === feature) {\n        delete this.idIndex_[id];\n        removed = true;\n        break;\n      }\n    }\n    return removed;\n  }\n\n  /**\n   * Set the new loader of the source. The next render cycle will use the\n   * new loader.\n   * @param {import(\"../featureloader.js\").FeatureLoader} loader The loader to set.\n   * @api\n   */\n  setLoader(loader) {\n    this.loader_ = loader;\n  }\n\n  /**\n   * Points the source to a new url. The next render cycle will use the new url.\n   * @param {string|import(\"../featureloader.js\").FeatureUrlFunction} url Url.\n   * @api\n   */\n  setUrl(url) {\n    assert(this.format_, 7); // `format` must be set when `url` is set\n    this.url_ = url;\n    this.setLoader(xhr(url, this.format_));\n  }\n}\n\nexport default VectorSource;\n","/**\n * @module ol/source/VectorEventType\n */\n\n/**\n * @enum {string}\n */\nexport default {\n  /**\n   * Triggered when a feature is added to the source.\n   * @event module:ol/source/Vector.VectorSourceEvent#addfeature\n   * @api\n   */\n  ADDFEATURE: 'addfeature',\n\n  /**\n   * Triggered when a feature is updated.\n   * @event module:ol/source/Vector.VectorSourceEvent#changefeature\n   * @api\n   */\n  CHANGEFEATURE: 'changefeature',\n\n  /**\n   * Triggered when the clear method is called on the source.\n   * @event module:ol/source/Vector.VectorSourceEvent#clear\n   * @api\n   */\n  CLEAR: 'clear',\n\n  /**\n   * Triggered when a feature is removed from the source.\n   * See {@link module:ol/source/Vector~VectorSource#clear source.clear()} for exceptions.\n   * @event module:ol/source/Vector.VectorSourceEvent#removefeature\n   * @api\n   */\n  REMOVEFEATURE: 'removefeature',\n\n  /**\n   * Triggered when features starts loading.\n   * @event module:ol/source/Vector.VectorSourceEvent#featuresloadstart\n   * @api\n   */\n  FEATURESLOADSTART: 'featuresloadstart',\n\n  /**\n   * Triggered when features finishes loading.\n   * @event module:ol/source/Vector.VectorSourceEvent#featuresloadend\n   * @api\n   */\n  FEATURESLOADEND: 'featuresloadend',\n\n  /**\n   * Triggered if feature loading results in an error.\n   * @event module:ol/source/Vector.VectorSourceEvent#featuresloaderror\n   * @api\n   */\n  FEATURESLOADERROR: 'featuresloaderror',\n};\n\n/**\n * @typedef {'addfeature'|'changefeature'|'clear'|'removefeature'|'featuresloadstart'|'featuresloadend'|'featuresloaderror'} VectorSourceEventTypes\n */\n","/**\n * @module ol/structs/RBush\n */\nimport RBush_ from 'rbush';\nimport {createOrUpdate, equals} from '../extent.js';\nimport {getUid} from '../util.js';\nimport {isEmpty} from '../obj.js';\n\n/**\n * @typedef {Object} Entry\n * @property {number} minX MinX.\n * @property {number} minY MinY.\n * @property {number} maxX MaxX.\n * @property {number} maxY MaxY.\n * @property {Object} [value] Value.\n */\n\n/**\n * @classdesc\n * Wrapper around the RBush by Vladimir Agafonkin.\n * See https://github.com/mourner/rbush.\n *\n * @template T\n */\nclass RBush {\n  /**\n   * @param {number} [maxEntries] Max entries.\n   */\n  constructor(maxEntries) {\n    /**\n     * @private\n     */\n    this.rbush_ = new RBush_(maxEntries);\n\n    /**\n     * A mapping between the objects added to this rbush wrapper\n     * and the objects that are actually added to the internal rbush.\n     * @private\n     * @type {Object<string, Entry>}\n     */\n    this.items_ = {};\n  }\n\n  /**\n   * Insert a value into the RBush.\n   * @param {import(\"../extent.js\").Extent} extent Extent.\n   * @param {T} value Value.\n   */\n  insert(extent, value) {\n    /** @type {Entry} */\n    const item = {\n      minX: extent[0],\n      minY: extent[1],\n      maxX: extent[2],\n      maxY: extent[3],\n      value: value,\n    };\n\n    this.rbush_.insert(item);\n    this.items_[getUid(value)] = item;\n  }\n\n  /**\n   * Bulk-insert values into the RBush.\n   * @param {Array<import(\"../extent.js\").Extent>} extents Extents.\n   * @param {Array<T>} values Values.\n   */\n  load(extents, values) {\n    const items = new Array(values.length);\n    for (let i = 0, l = values.length; i < l; i++) {\n      const extent = extents[i];\n      const value = values[i];\n\n      /** @type {Entry} */\n      const item = {\n        minX: extent[0],\n        minY: extent[1],\n        maxX: extent[2],\n        maxY: extent[3],\n        value: value,\n      };\n      items[i] = item;\n      this.items_[getUid(value)] = item;\n    }\n    this.rbush_.load(items);\n  }\n\n  /**\n   * Remove a value from the RBush.\n   * @param {T} value Value.\n   * @return {boolean} Removed.\n   */\n  remove(value) {\n    const uid = getUid(value);\n\n    // get the object in which the value was wrapped when adding to the\n    // internal rbush. then use that object to do the removal.\n    const item = this.items_[uid];\n    delete this.items_[uid];\n    return this.rbush_.remove(item) !== null;\n  }\n\n  /**\n   * Update the extent of a value in the RBush.\n   * @param {import(\"../extent.js\").Extent} extent Extent.\n   * @param {T} value Value.\n   */\n  update(extent, value) {\n    const item = this.items_[getUid(value)];\n    const bbox = [item.minX, item.minY, item.maxX, item.maxY];\n    if (!equals(bbox, extent)) {\n      this.remove(value);\n      this.insert(extent, value);\n    }\n  }\n\n  /**\n   * Return all values in the RBush.\n   * @return {Array<T>} All.\n   */\n  getAll() {\n    const items = this.rbush_.all();\n    return items.map(function (item) {\n      return item.value;\n    });\n  }\n\n  /**\n   * Return all values in the given extent.\n   * @param {import(\"../extent.js\").Extent} extent Extent.\n   * @return {Array<T>} All in extent.\n   */\n  getInExtent(extent) {\n    /** @type {Entry} */\n    const bbox = {\n      minX: extent[0],\n      minY: extent[1],\n      maxX: extent[2],\n      maxY: extent[3],\n    };\n    const items = this.rbush_.search(bbox);\n    return items.map(function (item) {\n      return item.value;\n    });\n  }\n\n  /**\n   * Calls a callback function with each value in the tree.\n   * If the callback returns a truthy value, this value is returned without\n   * checking the rest of the tree.\n   * @param {function(T): *} callback Callback.\n   * @return {*} Callback return value.\n   */\n  forEach(callback) {\n    return this.forEach_(this.getAll(), callback);\n  }\n\n  /**\n   * Calls a callback function with each value in the provided extent.\n   * @param {import(\"../extent.js\").Extent} extent Extent.\n   * @param {function(T): *} callback Callback.\n   * @return {*} Callback return value.\n   */\n  forEachInExtent(extent, callback) {\n    return this.forEach_(this.getInExtent(extent), callback);\n  }\n\n  /**\n   * @param {Array<T>} values Values.\n   * @param {function(T): *} callback Callback.\n   * @private\n   * @return {*} Callback return value.\n   */\n  forEach_(values, callback) {\n    let result;\n    for (let i = 0, l = values.length; i < l; i++) {\n      result = callback(values[i]);\n      if (result) {\n        return result;\n      }\n    }\n    return result;\n  }\n\n  /**\n   * @return {boolean} Is empty.\n   */\n  isEmpty() {\n    return isEmpty(this.items_);\n  }\n\n  /**\n   * Remove all values from the RBush.\n   */\n  clear() {\n    this.rbush_.clear();\n    this.items_ = {};\n  }\n\n  /**\n   * @param {import(\"../extent.js\").Extent} [extent] Extent.\n   * @return {import(\"../extent.js\").Extent} Extent.\n   */\n  getExtent(extent) {\n    const data = this.rbush_.toJSON();\n    return createOrUpdate(data.minX, data.minY, data.maxX, data.maxY, extent);\n  }\n\n  /**\n   * @param {RBush} rbush R-Tree.\n   */\n  concat(rbush) {\n    this.rbush_.load(rbush.rbush_.all());\n    for (const i in rbush.items_) {\n      this.items_[i] = rbush.items_[i];\n    }\n  }\n}\n\nexport default RBush;\n","/**\n * @module ol/style/Circle\n */\n\nimport RegularShape from './RegularShape.js';\n\n/**\n * @typedef {Object} Options\n * @property {import(\"./Fill.js\").default} [fill] Fill style.\n * @property {number} radius Circle radius.\n * @property {import(\"./Stroke.js\").default} [stroke] Stroke style.\n * @property {Array<number>} [displacement=[0,0]] displacement\n * @property {number|import(\"../size.js\").Size} [scale=1] Scale. A two dimensional scale will produce an ellipse.\n * Unless two dimensional scaling is required a better result may be obtained with an appropriate setting for `radius`.\n * @property {number} [rotation=0] Rotation in radians\n * (positive rotation clockwise, meaningful only when used in conjunction with a two dimensional scale).\n * @property {boolean} [rotateWithView=false] Whether to rotate the shape with the view\n * (meaningful only when used in conjunction with a two dimensional scale).\n * @property {\"declutter\"|\"obstacle\"|\"none\"|undefined} [declutterMode] Declutter mode\n */\n\n/**\n * @classdesc\n * Set circle style for vector features.\n * @api\n */\nclass CircleStyle extends RegularShape {\n  /**\n   * @param {Options} [options] Options.\n   */\n  constructor(options) {\n    options = options ? options : {radius: 5};\n\n    super({\n      points: Infinity,\n      fill: options.fill,\n      radius: options.radius,\n      stroke: options.stroke,\n      scale: options.scale !== undefined ? options.scale : 1,\n      rotation: options.rotation !== undefined ? options.rotation : 0,\n      rotateWithView:\n        options.rotateWithView !== undefined ? options.rotateWithView : false,\n      displacement:\n        options.displacement !== undefined ? options.displacement : [0, 0],\n      declutterMode: options.declutterMode,\n    });\n  }\n\n  /**\n   * Clones the style.\n   * @return {CircleStyle} The cloned style.\n   * @api\n   */\n  clone() {\n    const scale = this.getScale();\n    const style = new CircleStyle({\n      fill: this.getFill() ? this.getFill().clone() : undefined,\n      stroke: this.getStroke() ? this.getStroke().clone() : undefined,\n      radius: this.getRadius(),\n      scale: Array.isArray(scale) ? scale.slice() : scale,\n      rotation: this.getRotation(),\n      rotateWithView: this.getRotateWithView(),\n      displacement: this.getDisplacement().slice(),\n      declutterMode: this.getDeclutterMode(),\n    });\n    style.setOpacity(this.getOpacity());\n    return style;\n  }\n\n  /**\n   * Set the circle radius.\n   *\n   * @param {number} radius Circle radius.\n   * @api\n   */\n  setRadius(radius) {\n    this.radius_ = radius;\n    this.render();\n  }\n}\n\nexport default CircleStyle;\n","/**\n * @module ol/style/Fill\n */\n\n/**\n * @typedef {Object} Options\n * @property {import(\"../color.js\").Color|import(\"../colorlike.js\").ColorLike|null} [color=null] A color, gradient or pattern.\n * See {@link module:ol/color~Color} and {@link module:ol/colorlike~ColorLike} for possible formats.\n * Default null; if null, the Canvas/renderer default black will be used.\n */\n\n/**\n * @classdesc\n * Set fill style for vector features.\n * @api\n */\nclass Fill {\n  /**\n   * @param {Options} [options] Options.\n   */\n  constructor(options) {\n    options = options || {};\n\n    /**\n     * @private\n     * @type {import(\"../color.js\").Color|import(\"../colorlike.js\").ColorLike|null}\n     */\n    this.color_ = options.color !== undefined ? options.color : null;\n  }\n\n  /**\n   * Clones the style. The color is not cloned if it is an {@link module:ol/colorlike~ColorLike}.\n   * @return {Fill} The cloned style.\n   * @api\n   */\n  clone() {\n    const color = this.getColor();\n    return new Fill({\n      color: Array.isArray(color) ? color.slice() : color || undefined,\n    });\n  }\n\n  /**\n   * Get the fill color.\n   * @return {import(\"../color.js\").Color|import(\"../colorlike.js\").ColorLike|null} Color.\n   * @api\n   */\n  getColor() {\n    return this.color_;\n  }\n\n  /**\n   * Set the color.\n   *\n   * @param {import(\"../color.js\").Color|import(\"../colorlike.js\").ColorLike|null} color Color.\n   * @api\n   */\n  setColor(color) {\n    this.color_ = color;\n  }\n}\n\nexport default Fill;\n","/**\n * @module ol/style/Icon\n */\nimport EventType from '../events/EventType.js';\nimport ImageState from '../ImageState.js';\nimport ImageStyle from './Image.js';\nimport {asArray} from '../color.js';\nimport {assert} from '../asserts.js';\nimport {get as getIconImage} from './IconImage.js';\nimport {getUid} from '../util.js';\n\n/**\n * @typedef {'fraction' | 'pixels'} IconAnchorUnits\n * Anchor unit can be either a fraction of the icon size or in pixels.\n */\n\n/**\n * @typedef {'bottom-left' | 'bottom-right' | 'top-left' | 'top-right'} IconOrigin\n * Icon origin. One of 'bottom-left', 'bottom-right', 'top-left', 'top-right'.\n */\n\n/**\n * @typedef {Object} Options\n * @property {Array<number>} [anchor=[0.5, 0.5]] Anchor. Default value is the icon center.\n * @property {IconOrigin} [anchorOrigin='top-left'] Origin of the anchor: `bottom-left`, `bottom-right`,\n * `top-left` or `top-right`.\n * @property {IconAnchorUnits} [anchorXUnits='fraction'] Units in which the anchor x value is\n * specified. A value of `'fraction'` indicates the x value is a fraction of the icon. A value of `'pixels'` indicates\n * the x value in pixels.\n * @property {IconAnchorUnits} [anchorYUnits='fraction'] Units in which the anchor y value is\n * specified. A value of `'fraction'` indicates the y value is a fraction of the icon. A value of `'pixels'` indicates\n * the y value in pixels.\n * @property {import(\"../color.js\").Color|string} [color] Color to tint the icon. If not specified,\n * the icon will be left as is.\n * @property {null|string} [crossOrigin] The `crossOrigin` attribute for loaded images. Note that you must provide a\n * `crossOrigin` value if you want to access pixel data with the Canvas renderer.\n * See https://developer.mozilla.org/en-US/docs/Web/HTML/CORS_enabled_image for more detail.\n * @property {HTMLImageElement|HTMLCanvasElement} [img] Image object for the icon. If the `src` option is not provided then the\n * provided image must already be loaded. And in that case, it is required\n * to provide the size of the image, with the `imgSize` option.\n * @property {import(\"../size.js\").Size} [imgSize] Image size in pixels. Only required if `img` is set and `src` is not.\n * The provided `imgSize` needs to match the actual size of the image.\n * @property {Array<number>} [displacement=[0, 0]] Displacement of the icon in pixels.\n * Positive values will shift the icon right and up.\n * @property {number} [opacity=1] Opacity of the icon.\n * @property {number} [width] The width of the icon in pixels. This can't be used together with `scale`.\n * @property {number} [height] The height of the icon in pixels. This can't be used together with `scale`.\n * @property {number|import(\"../size.js\").Size} [scale=1] Scale.\n * @property {boolean} [rotateWithView=false] Whether to rotate the icon with the view.\n * @property {number} [rotation=0] Rotation in radians (positive rotation clockwise).\n * @property {Array<number>} [offset=[0, 0]] Offset which, together with `size` and `offsetOrigin`, defines the\n * sub-rectangle to use from the original (sprite) image.\n * @property {IconOrigin} [offsetOrigin='top-left'] Origin of the offset: `bottom-left`, `bottom-right`,\n * `top-left` or `top-right`.\n * @property {import(\"../size.js\").Size} [size] Icon size in pixels. Used together with `offset` to define the\n * sub-rectangle to use from the original (sprite) image.\n * @property {string} [src] Image source URI.\n * @property {\"declutter\"|\"obstacle\"|\"none\"|undefined} [declutterMode] Declutter mode.\n */\n\n/**\n * @param {number} width The width.\n * @param {number} height The height.\n * @param {number|undefined} wantedWidth The wanted width.\n * @param {number|undefined} wantedHeight The wanted height.\n * @return {number|Array<number>} The scale.\n */\nfunction calculateScale(width, height, wantedWidth, wantedHeight) {\n  if (wantedWidth !== undefined && wantedHeight !== undefined) {\n    return [wantedWidth / width, wantedHeight / height];\n  }\n  if (wantedWidth !== undefined) {\n    return wantedWidth / width;\n  }\n  if (wantedHeight !== undefined) {\n    return wantedHeight / height;\n  }\n  return 1;\n}\n\n/**\n * @classdesc\n * Set icon style for vector features.\n * @api\n */\nclass Icon extends ImageStyle {\n  /**\n   * @param {Options} [options] Options.\n   */\n  constructor(options) {\n    options = options || {};\n\n    /**\n     * @type {number}\n     */\n    const opacity = options.opacity !== undefined ? options.opacity : 1;\n\n    /**\n     * @type {number}\n     */\n    const rotation = options.rotation !== undefined ? options.rotation : 0;\n\n    /**\n     * @type {number|import(\"../size.js\").Size}\n     */\n    const scale = options.scale !== undefined ? options.scale : 1;\n\n    /**\n     * @type {boolean}\n     */\n    const rotateWithView =\n      options.rotateWithView !== undefined ? options.rotateWithView : false;\n\n    super({\n      opacity: opacity,\n      rotation: rotation,\n      scale: scale,\n      displacement:\n        options.displacement !== undefined ? options.displacement : [0, 0],\n      rotateWithView: rotateWithView,\n      declutterMode: options.declutterMode,\n    });\n\n    /**\n     * @private\n     * @type {Array<number>}\n     */\n    this.anchor_ = options.anchor !== undefined ? options.anchor : [0.5, 0.5];\n\n    /**\n     * @private\n     * @type {Array<number>}\n     */\n    this.normalizedAnchor_ = null;\n\n    /**\n     * @private\n     * @type {IconOrigin}\n     */\n    this.anchorOrigin_ =\n      options.anchorOrigin !== undefined ? options.anchorOrigin : 'top-left';\n\n    /**\n     * @private\n     * @type {IconAnchorUnits}\n     */\n    this.anchorXUnits_ =\n      options.anchorXUnits !== undefined ? options.anchorXUnits : 'fraction';\n\n    /**\n     * @private\n     * @type {IconAnchorUnits}\n     */\n    this.anchorYUnits_ =\n      options.anchorYUnits !== undefined ? options.anchorYUnits : 'fraction';\n\n    /**\n     * @private\n     * @type {?string}\n     */\n    this.crossOrigin_ =\n      options.crossOrigin !== undefined ? options.crossOrigin : null;\n\n    /**\n     * @type {HTMLImageElement|HTMLCanvasElement}\n     */\n    const image = options.img !== undefined ? options.img : null;\n\n    /**\n     * @private\n     * @type {import(\"../size.js\").Size|undefined}\n     */\n    this.imgSize_ = options.imgSize;\n\n    /**\n     * @type {string|undefined}\n     */\n    let src = options.src;\n\n    assert(!(src !== undefined && image), 4); // `image` and `src` cannot be provided at the same time\n    assert(!image || (image && this.imgSize_), 5); // `imgSize` must be set when `image` is provided\n\n    if ((src === undefined || src.length === 0) && image) {\n      src = /** @type {HTMLImageElement} */ (image).src || getUid(image);\n    }\n    assert(src !== undefined && src.length > 0, 6); // A defined and non-empty `src` or `image` must be provided\n\n    // `width` or `height` cannot be provided together with `scale`\n    assert(\n      !(\n        (options.width !== undefined || options.height !== undefined) &&\n        options.scale !== undefined\n      ),\n      69\n    );\n\n    /**\n     * @type {import(\"../ImageState.js\").default}\n     */\n    const imageState =\n      options.src !== undefined ? ImageState.IDLE : ImageState.LOADED;\n\n    /**\n     * @private\n     * @type {import(\"../color.js\").Color}\n     */\n    this.color_ = options.color !== undefined ? asArray(options.color) : null;\n\n    /**\n     * @private\n     * @type {import(\"./IconImage.js\").default}\n     */\n    this.iconImage_ = getIconImage(\n      image,\n      /** @type {string} */ (src),\n      this.imgSize_ !== undefined ? this.imgSize_ : null,\n      this.crossOrigin_,\n      imageState,\n      this.color_\n    );\n\n    /**\n     * @private\n     * @type {Array<number>}\n     */\n    this.offset_ = options.offset !== undefined ? options.offset : [0, 0];\n    /**\n     * @private\n     * @type {IconOrigin}\n     */\n    this.offsetOrigin_ =\n      options.offsetOrigin !== undefined ? options.offsetOrigin : 'top-left';\n\n    /**\n     * @private\n     * @type {Array<number>}\n     */\n    this.origin_ = null;\n\n    /**\n     * @private\n     * @type {import(\"../size.js\").Size}\n     */\n    this.size_ = options.size !== undefined ? options.size : null;\n\n    /**\n     * Calculate the scale if width or height were given.\n     */\n    if (options.width !== undefined || options.height !== undefined) {\n      let width, height;\n      if (options.size) {\n        [width, height] = options.size;\n      } else {\n        const image = this.getImage(1);\n        if (\n          image instanceof HTMLCanvasElement ||\n          (image.src && image.complete)\n        ) {\n          width = image.width;\n          height = image.height;\n        } else {\n          this.initialOptions_ = options;\n          const onload = () => {\n            this.unlistenImageChange(onload);\n            if (!this.initialOptions_) {\n              return;\n            }\n            const imageSize = this.iconImage_.getSize();\n            this.setScale(\n              calculateScale(\n                imageSize[0],\n                imageSize[1],\n                options.width,\n                options.height\n              )\n            );\n          };\n          this.listenImageChange(onload);\n          return;\n        }\n      }\n      if (width !== undefined) {\n        this.setScale(\n          calculateScale(width, height, options.width, options.height)\n        );\n      }\n    }\n  }\n\n  /**\n   * Clones the style. The underlying Image/HTMLCanvasElement is not cloned.\n   * @return {Icon} The cloned style.\n   * @api\n   */\n  clone() {\n    let scale, width, height;\n    if (this.initialOptions_) {\n      width = this.initialOptions_.width;\n      height = this.initialOptions_.height;\n    } else {\n      scale = this.getScale();\n      scale = Array.isArray(scale) ? scale.slice() : scale;\n    }\n    const clone = new Icon({\n      anchor: this.anchor_.slice(),\n      anchorOrigin: this.anchorOrigin_,\n      anchorXUnits: this.anchorXUnits_,\n      anchorYUnits: this.anchorYUnits_,\n      color:\n        this.color_ && this.color_.slice\n          ? this.color_.slice()\n          : this.color_ || undefined,\n      crossOrigin: this.crossOrigin_,\n      imgSize: this.imgSize_,\n      offset: this.offset_.slice(),\n      offsetOrigin: this.offsetOrigin_,\n      opacity: this.getOpacity(),\n      rotateWithView: this.getRotateWithView(),\n      rotation: this.getRotation(),\n      scale,\n      width,\n      height,\n      size: this.size_ !== null ? this.size_.slice() : undefined,\n      src: this.getSrc(),\n      displacement: this.getDisplacement().slice(),\n      declutterMode: this.getDeclutterMode(),\n    });\n    return clone;\n  }\n\n  /**\n   * Get the anchor point in pixels. The anchor determines the center point for the\n   * symbolizer.\n   * @return {Array<number>} Anchor.\n   * @api\n   */\n  getAnchor() {\n    let anchor = this.normalizedAnchor_;\n    if (!anchor) {\n      anchor = this.anchor_;\n      const size = this.getSize();\n      if (\n        this.anchorXUnits_ == 'fraction' ||\n        this.anchorYUnits_ == 'fraction'\n      ) {\n        if (!size) {\n          return null;\n        }\n        anchor = this.anchor_.slice();\n        if (this.anchorXUnits_ == 'fraction') {\n          anchor[0] *= size[0];\n        }\n        if (this.anchorYUnits_ == 'fraction') {\n          anchor[1] *= size[1];\n        }\n      }\n\n      if (this.anchorOrigin_ != 'top-left') {\n        if (!size) {\n          return null;\n        }\n        if (anchor === this.anchor_) {\n          anchor = this.anchor_.slice();\n        }\n        if (\n          this.anchorOrigin_ == 'top-right' ||\n          this.anchorOrigin_ == 'bottom-right'\n        ) {\n          anchor[0] = -anchor[0] + size[0];\n        }\n        if (\n          this.anchorOrigin_ == 'bottom-left' ||\n          this.anchorOrigin_ == 'bottom-right'\n        ) {\n          anchor[1] = -anchor[1] + size[1];\n        }\n      }\n      this.normalizedAnchor_ = anchor;\n    }\n    const displacement = this.getDisplacement();\n    const scale = this.getScaleArray();\n    // anchor is scaled by renderer but displacement should not be scaled\n    // so divide by scale here\n    return [\n      anchor[0] - displacement[0] / scale[0],\n      anchor[1] + displacement[1] / scale[1],\n    ];\n  }\n\n  /**\n   * Set the anchor point. The anchor determines the center point for the\n   * symbolizer.\n   *\n   * @param {Array<number>} anchor Anchor.\n   * @api\n   */\n  setAnchor(anchor) {\n    this.anchor_ = anchor;\n    this.normalizedAnchor_ = null;\n  }\n\n  /**\n   * Get the icon color.\n   * @return {import(\"../color.js\").Color} Color.\n   * @api\n   */\n  getColor() {\n    return this.color_;\n  }\n\n  /**\n   * Get the image icon.\n   * @param {number} pixelRatio Pixel ratio.\n   * @return {HTMLImageElement|HTMLCanvasElement} Image or Canvas element.\n   * @api\n   */\n  getImage(pixelRatio) {\n    return this.iconImage_.getImage(pixelRatio);\n  }\n\n  /**\n   * Get the pixel ratio.\n   * @param {number} pixelRatio Pixel ratio.\n   * @return {number} The pixel ratio of the image.\n   * @api\n   */\n  getPixelRatio(pixelRatio) {\n    return this.iconImage_.getPixelRatio(pixelRatio);\n  }\n\n  /**\n   * @return {import(\"../size.js\").Size} Image size.\n   */\n  getImageSize() {\n    return this.iconImage_.getSize();\n  }\n\n  /**\n   * @return {import(\"../ImageState.js\").default} Image state.\n   */\n  getImageState() {\n    return this.iconImage_.getImageState();\n  }\n\n  /**\n   * @return {HTMLImageElement|HTMLCanvasElement} Image element.\n   */\n  getHitDetectionImage() {\n    return this.iconImage_.getHitDetectionImage();\n  }\n\n  /**\n   * Get the origin of the symbolizer.\n   * @return {Array<number>} Origin.\n   * @api\n   */\n  getOrigin() {\n    if (this.origin_) {\n      return this.origin_;\n    }\n    let offset = this.offset_;\n\n    if (this.offsetOrigin_ != 'top-left') {\n      const size = this.getSize();\n      const iconImageSize = this.iconImage_.getSize();\n      if (!size || !iconImageSize) {\n        return null;\n      }\n      offset = offset.slice();\n      if (\n        this.offsetOrigin_ == 'top-right' ||\n        this.offsetOrigin_ == 'bottom-right'\n      ) {\n        offset[0] = iconImageSize[0] - size[0] - offset[0];\n      }\n      if (\n        this.offsetOrigin_ == 'bottom-left' ||\n        this.offsetOrigin_ == 'bottom-right'\n      ) {\n        offset[1] = iconImageSize[1] - size[1] - offset[1];\n      }\n    }\n    this.origin_ = offset;\n    return this.origin_;\n  }\n\n  /**\n   * Get the image URL.\n   * @return {string|undefined} Image src.\n   * @api\n   */\n  getSrc() {\n    return this.iconImage_.getSrc();\n  }\n\n  /**\n   * Get the size of the icon (in pixels).\n   * @return {import(\"../size.js\").Size} Image size.\n   * @api\n   */\n  getSize() {\n    return !this.size_ ? this.iconImage_.getSize() : this.size_;\n  }\n\n  /**\n   * Get the width of the icon (in pixels). Will return undefined when the icon image is not yet loaded.\n   * @return {number} Icon width (in pixels).\n   * @api\n   */\n  getWidth() {\n    const scale = this.getScaleArray();\n    if (this.size_) {\n      return this.size_[0] * scale[0];\n    }\n    if (this.iconImage_.getImageState() == ImageState.LOADED) {\n      return this.iconImage_.getSize()[0] * scale[0];\n    }\n    return undefined;\n  }\n\n  /**\n   * Get the height of the icon (in pixels). Will return undefined when the icon image is not yet loaded.\n   * @return {number} Icon height (in pixels).\n   * @api\n   */\n  getHeight() {\n    const scale = this.getScaleArray();\n    if (this.size_) {\n      return this.size_[1] * scale[1];\n    }\n    if (this.iconImage_.getImageState() == ImageState.LOADED) {\n      return this.iconImage_.getSize()[1] * scale[1];\n    }\n    return undefined;\n  }\n\n  /**\n   * Set the scale.\n   *\n   * @param {number|import(\"../size.js\").Size} scale Scale.\n   * @api\n   */\n  setScale(scale) {\n    delete this.initialOptions_;\n    super.setScale(scale);\n  }\n\n  /**\n   * @param {function(import(\"../events/Event.js\").default): void} listener Listener function.\n   */\n  listenImageChange(listener) {\n    this.iconImage_.addEventListener(EventType.CHANGE, listener);\n  }\n\n  /**\n   * Load not yet loaded URI.\n   * When rendering a feature with an icon style, the vector renderer will\n   * automatically call this method. However, you might want to call this\n   * method yourself for preloading or other purposes.\n   * @api\n   */\n  load() {\n    this.iconImage_.load();\n  }\n\n  /**\n   * @param {function(import(\"../events/Event.js\").default): void} listener Listener function.\n   */\n  unlistenImageChange(listener) {\n    this.iconImage_.removeEventListener(EventType.CHANGE, listener);\n  }\n}\n\nexport default Icon;\n","/**\n * @module ol/style/IconImage\n */\n\nimport EventTarget from '../events/Target.js';\nimport EventType from '../events/EventType.js';\nimport ImageState from '../ImageState.js';\nimport {asString} from '../color.js';\nimport {createCanvasContext2D} from '../dom.js';\nimport {shared as iconImageCache} from './IconImageCache.js';\nimport {listenImage} from '../Image.js';\n\n/**\n * @type {CanvasRenderingContext2D}\n */\nlet taintedTestContext = null;\n\nclass IconImage extends EventTarget {\n  /**\n   * @param {HTMLImageElement|HTMLCanvasElement} image Image.\n   * @param {string|undefined} src Src.\n   * @param {import(\"../size.js\").Size} size Size.\n   * @param {?string} crossOrigin Cross origin.\n   * @param {import(\"../ImageState.js\").default} imageState Image state.\n   * @param {import(\"../color.js\").Color} color Color.\n   */\n  constructor(image, src, size, crossOrigin, imageState, color) {\n    super();\n\n    /**\n     * @private\n     * @type {HTMLImageElement|HTMLCanvasElement}\n     */\n    this.hitDetectionImage_ = null;\n\n    /**\n     * @private\n     * @type {HTMLImageElement|HTMLCanvasElement}\n     */\n    this.image_ = image;\n\n    /**\n     * @private\n     * @type {string|null}\n     */\n    this.crossOrigin_ = crossOrigin;\n\n    /**\n     * @private\n     * @type {Object<number, HTMLCanvasElement>}\n     */\n    this.canvas_ = {};\n\n    /**\n     * @private\n     * @type {import(\"../color.js\").Color}\n     */\n    this.color_ = color;\n\n    /**\n     * @private\n     * @type {?function():void}\n     */\n    this.unlisten_ = null;\n\n    /**\n     * @private\n     * @type {import(\"../ImageState.js\").default}\n     */\n    this.imageState_ = imageState;\n\n    /**\n     * @private\n     * @type {import(\"../size.js\").Size}\n     */\n    this.size_ = size;\n\n    /**\n     * @private\n     * @type {string|undefined}\n     */\n    this.src_ = src;\n\n    /**\n     * @private\n     */\n    this.tainted_;\n  }\n\n  /**\n   * @private\n   */\n  initializeImage_() {\n    this.image_ = new Image();\n    if (this.crossOrigin_ !== null) {\n      this.image_.crossOrigin = this.crossOrigin_;\n    }\n  }\n\n  /**\n   * @private\n   * @return {boolean} The image canvas is tainted.\n   */\n  isTainted_() {\n    if (this.tainted_ === undefined && this.imageState_ === ImageState.LOADED) {\n      if (!taintedTestContext) {\n        taintedTestContext = createCanvasContext2D(1, 1, undefined, {\n          willReadFrequently: true,\n        });\n      }\n      taintedTestContext.drawImage(this.image_, 0, 0);\n      try {\n        taintedTestContext.getImageData(0, 0, 1, 1);\n        this.tainted_ = false;\n      } catch (e) {\n        taintedTestContext = null;\n        this.tainted_ = true;\n      }\n    }\n    return this.tainted_ === true;\n  }\n\n  /**\n   * @private\n   */\n  dispatchChangeEvent_() {\n    this.dispatchEvent(EventType.CHANGE);\n  }\n\n  /**\n   * @private\n   */\n  handleImageError_() {\n    this.imageState_ = ImageState.ERROR;\n    this.unlistenImage_();\n    this.dispatchChangeEvent_();\n  }\n\n  /**\n   * @private\n   */\n  handleImageLoad_() {\n    this.imageState_ = ImageState.LOADED;\n    if (this.size_) {\n      this.image_.width = this.size_[0];\n      this.image_.height = this.size_[1];\n    } else {\n      this.size_ = [this.image_.width, this.image_.height];\n    }\n    this.unlistenImage_();\n    this.dispatchChangeEvent_();\n  }\n\n  /**\n   * @param {number} pixelRatio Pixel ratio.\n   * @return {HTMLImageElement|HTMLCanvasElement} Image or Canvas element.\n   */\n  getImage(pixelRatio) {\n    if (!this.image_) {\n      this.initializeImage_();\n    }\n    this.replaceColor_(pixelRatio);\n    return this.canvas_[pixelRatio] ? this.canvas_[pixelRatio] : this.image_;\n  }\n\n  /**\n   * @param {number} pixelRatio Pixel ratio.\n   * @return {number} Image or Canvas element.\n   */\n  getPixelRatio(pixelRatio) {\n    this.replaceColor_(pixelRatio);\n    return this.canvas_[pixelRatio] ? pixelRatio : 1;\n  }\n\n  /**\n   * @return {import(\"../ImageState.js\").default} Image state.\n   */\n  getImageState() {\n    return this.imageState_;\n  }\n\n  /**\n   * @return {HTMLImageElement|HTMLCanvasElement} Image element.\n   */\n  getHitDetectionImage() {\n    if (!this.image_) {\n      this.initializeImage_();\n    }\n    if (!this.hitDetectionImage_) {\n      if (this.isTainted_()) {\n        const width = this.size_[0];\n        const height = this.size_[1];\n        const context = createCanvasContext2D(width, height);\n        context.fillRect(0, 0, width, height);\n        this.hitDetectionImage_ = context.canvas;\n      } else {\n        this.hitDetectionImage_ = this.image_;\n      }\n    }\n    return this.hitDetectionImage_;\n  }\n\n  /**\n   * Get the size of the icon (in pixels).\n   * @return {import(\"../size.js\").Size} Image size.\n   */\n  getSize() {\n    return this.size_;\n  }\n\n  /**\n   * @return {string|undefined} Image src.\n   */\n  getSrc() {\n    return this.src_;\n  }\n\n  /**\n   * Load not yet loaded URI.\n   */\n  load() {\n    if (this.imageState_ !== ImageState.IDLE) {\n      return;\n    }\n    if (!this.image_) {\n      this.initializeImage_();\n    }\n\n    this.imageState_ = ImageState.LOADING;\n    try {\n      /** @type {HTMLImageElement} */ (this.image_).src = this.src_;\n    } catch (e) {\n      this.handleImageError_();\n    }\n    this.unlisten_ = listenImage(\n      this.image_,\n      this.handleImageLoad_.bind(this),\n      this.handleImageError_.bind(this)\n    );\n  }\n\n  /**\n   * @param {number} pixelRatio Pixel ratio.\n   * @private\n   */\n  replaceColor_(pixelRatio) {\n    if (\n      !this.color_ ||\n      this.canvas_[pixelRatio] ||\n      this.imageState_ !== ImageState.LOADED\n    ) {\n      return;\n    }\n\n    const image = this.image_;\n    const canvas = document.createElement('canvas');\n    canvas.width = Math.ceil(image.width * pixelRatio);\n    canvas.height = Math.ceil(image.height * pixelRatio);\n\n    const ctx = canvas.getContext('2d');\n    ctx.scale(pixelRatio, pixelRatio);\n    ctx.drawImage(image, 0, 0);\n\n    ctx.globalCompositeOperation = 'multiply';\n    ctx.fillStyle = asString(this.color_);\n    ctx.fillRect(0, 0, canvas.width / pixelRatio, canvas.height / pixelRatio);\n\n    ctx.globalCompositeOperation = 'destination-in';\n    ctx.drawImage(image, 0, 0);\n\n    this.canvas_[pixelRatio] = canvas;\n  }\n\n  /**\n   * Discards event handlers which listen for load completion or errors.\n   *\n   * @private\n   */\n  unlistenImage_() {\n    if (this.unlisten_) {\n      this.unlisten_();\n      this.unlisten_ = null;\n    }\n  }\n}\n\n/**\n * @param {HTMLImageElement|HTMLCanvasElement} image Image.\n * @param {string} src Src.\n * @param {import(\"../size.js\").Size} size Size.\n * @param {?string} crossOrigin Cross origin.\n * @param {import(\"../ImageState.js\").default} imageState Image state.\n * @param {import(\"../color.js\").Color} color Color.\n * @return {IconImage} Icon image.\n */\nexport function get(image, src, size, crossOrigin, imageState, color) {\n  let iconImage = iconImageCache.get(src, crossOrigin, color);\n  if (!iconImage) {\n    iconImage = new IconImage(image, src, size, crossOrigin, imageState, color);\n    iconImageCache.set(src, crossOrigin, color, iconImage);\n  }\n  return iconImage;\n}\n\nexport default IconImage;\n","/**\n * @module ol/style/Image\n */\nimport {abstract} from '../util.js';\nimport {toSize} from '../size.js';\n\n/**\n * @typedef {Object} Options\n * @property {number} opacity Opacity.\n * @property {boolean} rotateWithView If the image should get rotated with the view.\n * @property {number} rotation Rotation.\n * @property {number|import(\"../size.js\").Size} scale Scale.\n * @property {Array<number>} displacement Displacement.\n * @property {\"declutter\"|\"obstacle\"|\"none\"|undefined} declutterMode Declutter mode: `declutter`, `obstacle`, 'none */\n\n/**\n * @classdesc\n * A base class used for creating subclasses and not instantiated in\n * apps. Base class for {@link module:ol/style/Icon~Icon}, {@link module:ol/style/Circle~CircleStyle} and\n * {@link module:ol/style/RegularShape~RegularShape}.\n * @abstract\n * @api\n */\nclass ImageStyle {\n  /**\n   * @param {Options} options Options.\n   */\n  constructor(options) {\n    /**\n     * @private\n     * @type {number}\n     */\n    this.opacity_ = options.opacity;\n\n    /**\n     * @private\n     * @type {boolean}\n     */\n    this.rotateWithView_ = options.rotateWithView;\n\n    /**\n     * @private\n     * @type {number}\n     */\n    this.rotation_ = options.rotation;\n\n    /**\n     * @private\n     * @type {number|import(\"../size.js\").Size}\n     */\n    this.scale_ = options.scale;\n\n    /**\n     * @private\n     * @type {import(\"../size.js\").Size}\n     */\n    this.scaleArray_ = toSize(options.scale);\n\n    /**\n     * @private\n     * @type {Array<number>}\n     */\n    this.displacement_ = options.displacement;\n\n    /**\n     * @private\n     * @type {\"declutter\"|\"obstacle\"|\"none\"|undefined}\n     */\n    this.declutterMode_ = options.declutterMode;\n  }\n\n  /**\n   * Clones the style.\n   * @return {ImageStyle} The cloned style.\n   * @api\n   */\n  clone() {\n    const scale = this.getScale();\n    return new ImageStyle({\n      opacity: this.getOpacity(),\n      scale: Array.isArray(scale) ? scale.slice() : scale,\n      rotation: this.getRotation(),\n      rotateWithView: this.getRotateWithView(),\n      displacement: this.getDisplacement().slice(),\n      declutterMode: this.getDeclutterMode(),\n    });\n  }\n\n  /**\n   * Get the symbolizer opacity.\n   * @return {number} Opacity.\n   * @api\n   */\n  getOpacity() {\n    return this.opacity_;\n  }\n\n  /**\n   * Determine whether the symbolizer rotates with the map.\n   * @return {boolean} Rotate with map.\n   * @api\n   */\n  getRotateWithView() {\n    return this.rotateWithView_;\n  }\n\n  /**\n   * Get the symoblizer rotation.\n   * @return {number} Rotation.\n   * @api\n   */\n  getRotation() {\n    return this.rotation_;\n  }\n\n  /**\n   * Get the symbolizer scale.\n   * @return {number|import(\"../size.js\").Size} Scale.\n   * @api\n   */\n  getScale() {\n    return this.scale_;\n  }\n\n  /**\n   * Get the symbolizer scale array.\n   * @return {import(\"../size.js\").Size} Scale array.\n   */\n  getScaleArray() {\n    return this.scaleArray_;\n  }\n\n  /**\n   * Get the displacement of the shape\n   * @return {Array<number>} Shape's center displacement\n   * @api\n   */\n  getDisplacement() {\n    return this.displacement_;\n  }\n\n  /**\n   * Get the declutter mode of the shape\n   * @return {\"declutter\"|\"obstacle\"|\"none\"|undefined} Shape's declutter mode\n   * @api\n   */\n  getDeclutterMode() {\n    return this.declutterMode_;\n  }\n\n  /**\n   * Get the anchor point in pixels. The anchor determines the center point for the\n   * symbolizer.\n   * @abstract\n   * @return {Array<number>} Anchor.\n   */\n  getAnchor() {\n    return abstract();\n  }\n\n  /**\n   * Get the image element for the symbolizer.\n   * @abstract\n   * @param {number} pixelRatio Pixel ratio.\n   * @return {HTMLCanvasElement|HTMLVideoElement|HTMLImageElement} Image element.\n   */\n  getImage(pixelRatio) {\n    return abstract();\n  }\n\n  /**\n   * @abstract\n   * @return {HTMLCanvasElement|HTMLVideoElement|HTMLImageElement} Image element.\n   */\n  getHitDetectionImage() {\n    return abstract();\n  }\n\n  /**\n   * Get the image pixel ratio.\n   * @param {number} pixelRatio Pixel ratio.\n   * @return {number} Pixel ratio.\n   */\n  getPixelRatio(pixelRatio) {\n    return 1;\n  }\n\n  /**\n   * @abstract\n   * @return {import(\"../ImageState.js\").default} Image state.\n   */\n  getImageState() {\n    return abstract();\n  }\n\n  /**\n   * @abstract\n   * @return {import(\"../size.js\").Size} Image size.\n   */\n  getImageSize() {\n    return abstract();\n  }\n\n  /**\n   * Get the origin of the symbolizer.\n   * @abstract\n   * @return {Array<number>} Origin.\n   */\n  getOrigin() {\n    return abstract();\n  }\n\n  /**\n   * Get the size of the symbolizer (in pixels).\n   * @abstract\n   * @return {import(\"../size.js\").Size} Size.\n   */\n  getSize() {\n    return abstract();\n  }\n\n  /**\n   * Set the displacement.\n   *\n   * @param {Array<number>} displacement Displacement.\n   * @api\n   */\n  setDisplacement(displacement) {\n    this.displacement_ = displacement;\n  }\n\n  /**\n   * Set the opacity.\n   *\n   * @param {number} opacity Opacity.\n   * @api\n   */\n  setOpacity(opacity) {\n    this.opacity_ = opacity;\n  }\n\n  /**\n   * Set whether to rotate the style with the view.\n   *\n   * @param {boolean} rotateWithView Rotate with map.\n   * @api\n   */\n  setRotateWithView(rotateWithView) {\n    this.rotateWithView_ = rotateWithView;\n  }\n\n  /**\n   * Set the rotation.\n   *\n   * @param {number} rotation Rotation.\n   * @api\n   */\n  setRotation(rotation) {\n    this.rotation_ = rotation;\n  }\n\n  /**\n   * Set the scale.\n   *\n   * @param {number|import(\"../size.js\").Size} scale Scale.\n   * @api\n   */\n  setScale(scale) {\n    this.scale_ = scale;\n    this.scaleArray_ = toSize(scale);\n  }\n\n  /**\n   * @abstract\n   * @param {function(import(\"../events/Event.js\").default): void} listener Listener function.\n   */\n  listenImageChange(listener) {\n    abstract();\n  }\n\n  /**\n   * Load not yet loaded URI.\n   * @abstract\n   */\n  load() {\n    abstract();\n  }\n\n  /**\n   * @abstract\n   * @param {function(import(\"../events/Event.js\").default): void} listener Listener function.\n   */\n  unlistenImageChange(listener) {\n    abstract();\n  }\n}\n\nexport default ImageStyle;\n","/**\n * @module ol/style/RegularShape\n */\n\nimport ImageState from '../ImageState.js';\nimport ImageStyle from './Image.js';\nimport {asArray} from '../color.js';\nimport {asColorLike} from '../colorlike.js';\nimport {createCanvasContext2D} from '../dom.js';\nimport {\n  defaultFillStyle,\n  defaultLineJoin,\n  defaultLineWidth,\n  defaultMiterLimit,\n  defaultStrokeStyle,\n} from '../render/canvas.js';\n\n/**\n * Specify radius for regular polygons, or radius1 and radius2 for stars.\n * @typedef {Object} Options\n * @property {import(\"./Fill.js\").default} [fill] Fill style.\n * @property {number} points Number of points for stars and regular polygons. In case of a polygon, the number of points\n * is the number of sides.\n * @property {number} [radius] Radius of a regular polygon.\n * @property {number} [radius1] First radius of a star. Ignored if radius is set.\n * @property {number} [radius2] Second radius of a star.\n * @property {number} [angle=0] Shape's angle in radians. A value of 0 will have one of the shape's points facing up.\n * @property {Array<number>} [displacement=[0, 0]] Displacement of the shape in pixels.\n * Positive values will shift the shape right and up.\n * @property {import(\"./Stroke.js\").default} [stroke] Stroke style.\n * @property {number} [rotation=0] Rotation in radians (positive rotation clockwise).\n * @property {boolean} [rotateWithView=false] Whether to rotate the shape with the view.\n * @property {number|import(\"../size.js\").Size} [scale=1] Scale. Unless two dimensional scaling is required a better\n * result may be obtained with appropriate settings for `radius`, `radius1` and `radius2`.\n * @property {\"declutter\"|\"obstacle\"|\"none\"|undefined} [declutterMode] Declutter mode.\n */\n\n/**\n * @typedef {Object} RenderOptions\n * @property {import(\"../colorlike.js\").ColorLike} [strokeStyle] StrokeStyle.\n * @property {number} strokeWidth StrokeWidth.\n * @property {number} size Size.\n * @property {Array<number>|null} lineDash LineDash.\n * @property {number} lineDashOffset LineDashOffset.\n * @property {CanvasLineJoin} lineJoin LineJoin.\n * @property {number} miterLimit MiterLimit.\n */\n\n/**\n * @classdesc\n * Set regular shape style for vector features. The resulting shape will be\n * a regular polygon when `radius` is provided, or a star when `radius1` and\n * `radius2` are provided.\n * @api\n */\nclass RegularShape extends ImageStyle {\n  /**\n   * @param {Options} options Options.\n   */\n  constructor(options) {\n    /**\n     * @type {boolean}\n     */\n    const rotateWithView =\n      options.rotateWithView !== undefined ? options.rotateWithView : false;\n\n    super({\n      opacity: 1,\n      rotateWithView: rotateWithView,\n      rotation: options.rotation !== undefined ? options.rotation : 0,\n      scale: options.scale !== undefined ? options.scale : 1,\n      displacement:\n        options.displacement !== undefined ? options.displacement : [0, 0],\n      declutterMode: options.declutterMode,\n    });\n\n    /**\n     * @private\n     * @type {Object<number, HTMLCanvasElement>}\n     */\n    this.canvas_ = undefined;\n\n    /**\n     * @private\n     * @type {HTMLCanvasElement}\n     */\n    this.hitDetectionCanvas_ = null;\n\n    /**\n     * @private\n     * @type {import(\"./Fill.js\").default}\n     */\n    this.fill_ = options.fill !== undefined ? options.fill : null;\n\n    /**\n     * @private\n     * @type {Array<number>}\n     */\n    this.origin_ = [0, 0];\n\n    /**\n     * @private\n     * @type {number}\n     */\n    this.points_ = options.points;\n\n    /**\n     * @protected\n     * @type {number}\n     */\n    this.radius_ =\n      options.radius !== undefined ? options.radius : options.radius1;\n\n    /**\n     * @private\n     * @type {number|undefined}\n     */\n    this.radius2_ = options.radius2;\n\n    /**\n     * @private\n     * @type {number}\n     */\n    this.angle_ = options.angle !== undefined ? options.angle : 0;\n\n    /**\n     * @private\n     * @type {import(\"./Stroke.js\").default}\n     */\n    this.stroke_ = options.stroke !== undefined ? options.stroke : null;\n\n    /**\n     * @private\n     * @type {import(\"../size.js\").Size}\n     */\n    this.size_ = null;\n\n    /**\n     * @private\n     * @type {RenderOptions}\n     */\n    this.renderOptions_ = null;\n\n    this.render();\n  }\n\n  /**\n   * Clones the style.\n   * @return {RegularShape} The cloned style.\n   * @api\n   */\n  clone() {\n    const scale = this.getScale();\n    const style = new RegularShape({\n      fill: this.getFill() ? this.getFill().clone() : undefined,\n      points: this.getPoints(),\n      radius: this.getRadius(),\n      radius2: this.getRadius2(),\n      angle: this.getAngle(),\n      stroke: this.getStroke() ? this.getStroke().clone() : undefined,\n      rotation: this.getRotation(),\n      rotateWithView: this.getRotateWithView(),\n      scale: Array.isArray(scale) ? scale.slice() : scale,\n      displacement: this.getDisplacement().slice(),\n      declutterMode: this.getDeclutterMode(),\n    });\n    style.setOpacity(this.getOpacity());\n    return style;\n  }\n\n  /**\n   * Get the anchor point in pixels. The anchor determines the center point for the\n   * symbolizer.\n   * @return {Array<number>} Anchor.\n   * @api\n   */\n  getAnchor() {\n    const size = this.size_;\n    if (!size) {\n      return null;\n    }\n    const displacement = this.getDisplacement();\n    const scale = this.getScaleArray();\n    // anchor is scaled by renderer but displacement should not be scaled\n    // so divide by scale here\n    return [\n      size[0] / 2 - displacement[0] / scale[0],\n      size[1] / 2 + displacement[1] / scale[1],\n    ];\n  }\n\n  /**\n   * Get the angle used in generating the shape.\n   * @return {number} Shape's rotation in radians.\n   * @api\n   */\n  getAngle() {\n    return this.angle_;\n  }\n\n  /**\n   * Get the fill style for the shape.\n   * @return {import(\"./Fill.js\").default} Fill style.\n   * @api\n   */\n  getFill() {\n    return this.fill_;\n  }\n\n  /**\n   * Set the fill style.\n   * @param {import(\"./Fill.js\").default} fill Fill style.\n   * @api\n   */\n  setFill(fill) {\n    this.fill_ = fill;\n    this.render();\n  }\n\n  /**\n   * @return {HTMLCanvasElement} Image element.\n   */\n  getHitDetectionImage() {\n    if (!this.hitDetectionCanvas_) {\n      this.createHitDetectionCanvas_(this.renderOptions_);\n    }\n    return this.hitDetectionCanvas_;\n  }\n\n  /**\n   * Get the image icon.\n   * @param {number} pixelRatio Pixel ratio.\n   * @return {HTMLCanvasElement} Image or Canvas element.\n   * @api\n   */\n  getImage(pixelRatio) {\n    let image = this.canvas_[pixelRatio];\n    if (!image) {\n      const renderOptions = this.renderOptions_;\n      const context = createCanvasContext2D(\n        renderOptions.size * pixelRatio,\n        renderOptions.size * pixelRatio\n      );\n      this.draw_(renderOptions, context, pixelRatio);\n\n      image = context.canvas;\n      this.canvas_[pixelRatio] = image;\n    }\n    return image;\n  }\n\n  /**\n   * Get the image pixel ratio.\n   * @param {number} pixelRatio Pixel ratio.\n   * @return {number} Pixel ratio.\n   */\n  getPixelRatio(pixelRatio) {\n    return pixelRatio;\n  }\n\n  /**\n   * @return {import(\"../size.js\").Size} Image size.\n   */\n  getImageSize() {\n    return this.size_;\n  }\n\n  /**\n   * @return {import(\"../ImageState.js\").default} Image state.\n   */\n  getImageState() {\n    return ImageState.LOADED;\n  }\n\n  /**\n   * Get the origin of the symbolizer.\n   * @return {Array<number>} Origin.\n   * @api\n   */\n  getOrigin() {\n    return this.origin_;\n  }\n\n  /**\n   * Get the number of points for generating the shape.\n   * @return {number} Number of points for stars and regular polygons.\n   * @api\n   */\n  getPoints() {\n    return this.points_;\n  }\n\n  /**\n   * Get the (primary) radius for the shape.\n   * @return {number} Radius.\n   * @api\n   */\n  getRadius() {\n    return this.radius_;\n  }\n\n  /**\n   * Get the secondary radius for the shape.\n   * @return {number|undefined} Radius2.\n   * @api\n   */\n  getRadius2() {\n    return this.radius2_;\n  }\n\n  /**\n   * Get the size of the symbolizer (in pixels).\n   * @return {import(\"../size.js\").Size} Size.\n   * @api\n   */\n  getSize() {\n    return this.size_;\n  }\n\n  /**\n   * Get the stroke style for the shape.\n   * @return {import(\"./Stroke.js\").default} Stroke style.\n   * @api\n   */\n  getStroke() {\n    return this.stroke_;\n  }\n\n  /**\n   * Set the stroke style.\n   * @param {import(\"./Stroke.js\").default} stroke Stroke style.\n   * @api\n   */\n  setStroke(stroke) {\n    this.stroke_ = stroke;\n    this.render();\n  }\n\n  /**\n   * @param {function(import(\"../events/Event.js\").default): void} listener Listener function.\n   */\n  listenImageChange(listener) {}\n\n  /**\n   * Load not yet loaded URI.\n   */\n  load() {}\n\n  /**\n   * @param {function(import(\"../events/Event.js\").default): void} listener Listener function.\n   */\n  unlistenImageChange(listener) {}\n\n  /**\n   * Calculate additional canvas size needed for the miter.\n   * @param {string} lineJoin Line join\n   * @param {number} strokeWidth Stroke width\n   * @param {number} miterLimit Miter limit\n   * @return {number} Additional canvas size needed\n   * @private\n   */\n  calculateLineJoinSize_(lineJoin, strokeWidth, miterLimit) {\n    if (\n      strokeWidth === 0 ||\n      this.points_ === Infinity ||\n      (lineJoin !== 'bevel' && lineJoin !== 'miter')\n    ) {\n      return strokeWidth;\n    }\n    // m  | ^\n    // i  | |\\                  .\n    // t >|  #\\\n    // e  | |\\ \\              .\n    // r      \\s\\\n    //      |  \\t\\          .                 .\n    //          \\r\\                      .   .\n    //      |    \\o\\      .          .  . . .\n    //          e \\k\\            .  .    . .\n    //      |      \\e\\  .    .  .       . .\n    //       d      \\ \\  .  .          . .\n    //      | _ _a_ _\\#  .            . .\n    //   r1          / `             . .\n    //      |                       . .\n    //       b     /               . .\n    //      |                     . .\n    //           / r2            . .\n    //      |                        .   .\n    //         /                           .   .\n    //      |α                                   .   .\n    //       /                                         .   .\n    //      ° center\n    let r1 = this.radius_;\n    let r2 = this.radius2_ === undefined ? r1 : this.radius2_;\n    if (r1 < r2) {\n      const tmp = r1;\n      r1 = r2;\n      r2 = tmp;\n    }\n    const points =\n      this.radius2_ === undefined ? this.points_ : this.points_ * 2;\n    const alpha = (2 * Math.PI) / points;\n    const a = r2 * Math.sin(alpha);\n    const b = Math.sqrt(r2 * r2 - a * a);\n    const d = r1 - b;\n    const e = Math.sqrt(a * a + d * d);\n    const miterRatio = e / a;\n    if (lineJoin === 'miter' && miterRatio <= miterLimit) {\n      return miterRatio * strokeWidth;\n    }\n    // Calculate the distance from center to the stroke corner where\n    // it was cut short because of the miter limit.\n    //              l\n    //        ----+---- <= distance from center to here is maxr\n    //       /####|k ##\\\n    //      /#####^#####\\\n    //     /#### /+\\# s #\\\n    //    /### h/+++\\# t #\\\n    //   /### t/+++++\\# r #\\\n    //  /### a/+++++++\\# o #\\\n    // /### p/++ fill +\\# k #\\\n    ///#### /+++++^+++++\\# e #\\\n    //#####/+++++/+\\+++++\\#####\\\n    const k = strokeWidth / 2 / miterRatio;\n    const l = (strokeWidth / 2) * (d / e);\n    const maxr = Math.sqrt((r1 + k) * (r1 + k) + l * l);\n    const bevelAdd = maxr - r1;\n    if (this.radius2_ === undefined || lineJoin === 'bevel') {\n      return bevelAdd * 2;\n    }\n    // If outer miter is over the miter limit the inner miter may reach through the\n    // center and be longer than the bevel, same calculation as above but swap r1 / r2.\n    const aa = r1 * Math.sin(alpha);\n    const bb = Math.sqrt(r1 * r1 - aa * aa);\n    const dd = r2 - bb;\n    const ee = Math.sqrt(aa * aa + dd * dd);\n    const innerMiterRatio = ee / aa;\n    if (innerMiterRatio <= miterLimit) {\n      const innerLength = (innerMiterRatio * strokeWidth) / 2 - r2 - r1;\n      return 2 * Math.max(bevelAdd, innerLength);\n    }\n    return bevelAdd * 2;\n  }\n\n  /**\n   * @return {RenderOptions}  The render options\n   * @protected\n   */\n  createRenderOptions() {\n    let lineJoin = defaultLineJoin;\n    let miterLimit = 0;\n    let lineDash = null;\n    let lineDashOffset = 0;\n    let strokeStyle;\n    let strokeWidth = 0;\n\n    if (this.stroke_) {\n      strokeStyle = this.stroke_.getColor();\n      if (strokeStyle === null) {\n        strokeStyle = defaultStrokeStyle;\n      }\n      strokeStyle = asColorLike(strokeStyle);\n      strokeWidth = this.stroke_.getWidth();\n      if (strokeWidth === undefined) {\n        strokeWidth = defaultLineWidth;\n      }\n      lineDash = this.stroke_.getLineDash();\n      lineDashOffset = this.stroke_.getLineDashOffset();\n      lineJoin = this.stroke_.getLineJoin();\n      if (lineJoin === undefined) {\n        lineJoin = defaultLineJoin;\n      }\n      miterLimit = this.stroke_.getMiterLimit();\n      if (miterLimit === undefined) {\n        miterLimit = defaultMiterLimit;\n      }\n    }\n\n    const add = this.calculateLineJoinSize_(lineJoin, strokeWidth, miterLimit);\n    const maxRadius = Math.max(this.radius_, this.radius2_ || 0);\n    const size = Math.ceil(2 * maxRadius + add);\n\n    return {\n      strokeStyle: strokeStyle,\n      strokeWidth: strokeWidth,\n      size: size,\n      lineDash: lineDash,\n      lineDashOffset: lineDashOffset,\n      lineJoin: lineJoin,\n      miterLimit: miterLimit,\n    };\n  }\n\n  /**\n   * @protected\n   */\n  render() {\n    this.renderOptions_ = this.createRenderOptions();\n    const size = this.renderOptions_.size;\n    this.canvas_ = {};\n    this.size_ = [size, size];\n  }\n\n  /**\n   * @private\n   * @param {RenderOptions} renderOptions Render options.\n   * @param {CanvasRenderingContext2D} context The rendering context.\n   * @param {number} pixelRatio The pixel ratio.\n   */\n  draw_(renderOptions, context, pixelRatio) {\n    context.scale(pixelRatio, pixelRatio);\n    // set origin to canvas center\n    context.translate(renderOptions.size / 2, renderOptions.size / 2);\n\n    this.createPath_(context);\n\n    if (this.fill_) {\n      let color = this.fill_.getColor();\n      if (color === null) {\n        color = defaultFillStyle;\n      }\n      context.fillStyle = asColorLike(color);\n      context.fill();\n    }\n    if (this.stroke_) {\n      context.strokeStyle = renderOptions.strokeStyle;\n      context.lineWidth = renderOptions.strokeWidth;\n      if (renderOptions.lineDash) {\n        context.setLineDash(renderOptions.lineDash);\n        context.lineDashOffset = renderOptions.lineDashOffset;\n      }\n      context.lineJoin = renderOptions.lineJoin;\n      context.miterLimit = renderOptions.miterLimit;\n      context.stroke();\n    }\n  }\n\n  /**\n   * @private\n   * @param {RenderOptions} renderOptions Render options.\n   */\n  createHitDetectionCanvas_(renderOptions) {\n    if (this.fill_) {\n      let color = this.fill_.getColor();\n\n      // determine if fill is transparent (or pattern or gradient)\n      let opacity = 0;\n      if (typeof color === 'string') {\n        color = asArray(color);\n      }\n      if (color === null) {\n        opacity = 1;\n      } else if (Array.isArray(color)) {\n        opacity = color.length === 4 ? color[3] : 1;\n      }\n      if (opacity === 0) {\n        // if a transparent fill style is set, create an extra hit-detection image\n        // with a default fill style\n        const context = createCanvasContext2D(\n          renderOptions.size,\n          renderOptions.size\n        );\n        this.hitDetectionCanvas_ = context.canvas;\n\n        this.drawHitDetectionCanvas_(renderOptions, context);\n      }\n    }\n    if (!this.hitDetectionCanvas_) {\n      this.hitDetectionCanvas_ = this.getImage(1);\n    }\n  }\n\n  /**\n   * @private\n   * @param {CanvasRenderingContext2D} context The context to draw in.\n   */\n  createPath_(context) {\n    let points = this.points_;\n    const radius = this.radius_;\n    if (points === Infinity) {\n      context.arc(0, 0, radius, 0, 2 * Math.PI);\n    } else {\n      const radius2 = this.radius2_ === undefined ? radius : this.radius2_;\n      if (this.radius2_ !== undefined) {\n        points *= 2;\n      }\n      const startAngle = this.angle_ - Math.PI / 2;\n      const step = (2 * Math.PI) / points;\n      for (let i = 0; i < points; i++) {\n        const angle0 = startAngle + i * step;\n        const radiusC = i % 2 === 0 ? radius : radius2;\n        context.lineTo(radiusC * Math.cos(angle0), radiusC * Math.sin(angle0));\n      }\n      context.closePath();\n    }\n  }\n\n  /**\n   * @private\n   * @param {RenderOptions} renderOptions Render options.\n   * @param {CanvasRenderingContext2D} context The context.\n   */\n  drawHitDetectionCanvas_(renderOptions, context) {\n    // set origin to canvas center\n    context.translate(renderOptions.size / 2, renderOptions.size / 2);\n\n    this.createPath_(context);\n\n    context.fillStyle = defaultFillStyle;\n    context.fill();\n    if (this.stroke_) {\n      context.strokeStyle = renderOptions.strokeStyle;\n      context.lineWidth = renderOptions.strokeWidth;\n      if (renderOptions.lineDash) {\n        context.setLineDash(renderOptions.lineDash);\n        context.lineDashOffset = renderOptions.lineDashOffset;\n      }\n      context.lineJoin = renderOptions.lineJoin;\n      context.miterLimit = renderOptions.miterLimit;\n      context.stroke();\n    }\n  }\n}\n\nexport default RegularShape;\n","/**\n * @module ol/style/Stroke\n */\n\n/**\n * @typedef {Object} Options\n * @property {import(\"../color.js\").Color|import(\"../colorlike.js\").ColorLike} [color] A color, gradient or pattern.\n * See {@link module:ol/color~Color} and {@link module:ol/colorlike~ColorLike} for possible formats.\n * Default null; if null, the Canvas/renderer default black will be used.\n * @property {CanvasLineCap} [lineCap='round'] Line cap style: `butt`, `round`, or `square`.\n * @property {CanvasLineJoin} [lineJoin='round'] Line join style: `bevel`, `round`, or `miter`.\n * @property {Array<number>} [lineDash] Line dash pattern. Default is `null` (no dash).\n * @property {number} [lineDashOffset=0] Line dash offset.\n * @property {number} [miterLimit=10] Miter limit.\n * @property {number} [width] Width.\n */\n\n/**\n * @classdesc\n * Set stroke style for vector features.\n * Note that the defaults given are the Canvas defaults, which will be used if\n * option is not defined. The `get` functions return whatever was entered in\n * the options; they will not return the default.\n * @api\n */\nclass Stroke {\n  /**\n   * @param {Options} [options] Options.\n   */\n  constructor(options) {\n    options = options || {};\n\n    /**\n     * @private\n     * @type {import(\"../color.js\").Color|import(\"../colorlike.js\").ColorLike}\n     */\n    this.color_ = options.color !== undefined ? options.color : null;\n\n    /**\n     * @private\n     * @type {CanvasLineCap|undefined}\n     */\n    this.lineCap_ = options.lineCap;\n\n    /**\n     * @private\n     * @type {Array<number>|null}\n     */\n    this.lineDash_ = options.lineDash !== undefined ? options.lineDash : null;\n\n    /**\n     * @private\n     * @type {number|undefined}\n     */\n    this.lineDashOffset_ = options.lineDashOffset;\n\n    /**\n     * @private\n     * @type {CanvasLineJoin|undefined}\n     */\n    this.lineJoin_ = options.lineJoin;\n\n    /**\n     * @private\n     * @type {number|undefined}\n     */\n    this.miterLimit_ = options.miterLimit;\n\n    /**\n     * @private\n     * @type {number|undefined}\n     */\n    this.width_ = options.width;\n  }\n\n  /**\n   * Clones the style.\n   * @return {Stroke} The cloned style.\n   * @api\n   */\n  clone() {\n    const color = this.getColor();\n    return new Stroke({\n      color: Array.isArray(color) ? color.slice() : color || undefined,\n      lineCap: this.getLineCap(),\n      lineDash: this.getLineDash() ? this.getLineDash().slice() : undefined,\n      lineDashOffset: this.getLineDashOffset(),\n      lineJoin: this.getLineJoin(),\n      miterLimit: this.getMiterLimit(),\n      width: this.getWidth(),\n    });\n  }\n\n  /**\n   * Get the stroke color.\n   * @return {import(\"../color.js\").Color|import(\"../colorlike.js\").ColorLike} Color.\n   * @api\n   */\n  getColor() {\n    return this.color_;\n  }\n\n  /**\n   * Get the line cap type for the stroke.\n   * @return {CanvasLineCap|undefined} Line cap.\n   * @api\n   */\n  getLineCap() {\n    return this.lineCap_;\n  }\n\n  /**\n   * Get the line dash style for the stroke.\n   * @return {Array<number>|null} Line dash.\n   * @api\n   */\n  getLineDash() {\n    return this.lineDash_;\n  }\n\n  /**\n   * Get the line dash offset for the stroke.\n   * @return {number|undefined} Line dash offset.\n   * @api\n   */\n  getLineDashOffset() {\n    return this.lineDashOffset_;\n  }\n\n  /**\n   * Get the line join type for the stroke.\n   * @return {CanvasLineJoin|undefined} Line join.\n   * @api\n   */\n  getLineJoin() {\n    return this.lineJoin_;\n  }\n\n  /**\n   * Get the miter limit for the stroke.\n   * @return {number|undefined} Miter limit.\n   * @api\n   */\n  getMiterLimit() {\n    return this.miterLimit_;\n  }\n\n  /**\n   * Get the stroke width.\n   * @return {number|undefined} Width.\n   * @api\n   */\n  getWidth() {\n    return this.width_;\n  }\n\n  /**\n   * Set the color.\n   *\n   * @param {import(\"../color.js\").Color|import(\"../colorlike.js\").ColorLike} color Color.\n   * @api\n   */\n  setColor(color) {\n    this.color_ = color;\n  }\n\n  /**\n   * Set the line cap.\n   *\n   * @param {CanvasLineCap|undefined} lineCap Line cap.\n   * @api\n   */\n  setLineCap(lineCap) {\n    this.lineCap_ = lineCap;\n  }\n\n  /**\n   * Set the line dash.\n   *\n   * @param {Array<number>|null} lineDash Line dash.\n   * @api\n   */\n  setLineDash(lineDash) {\n    this.lineDash_ = lineDash;\n  }\n\n  /**\n   * Set the line dash offset.\n   *\n   * @param {number|undefined} lineDashOffset Line dash offset.\n   * @api\n   */\n  setLineDashOffset(lineDashOffset) {\n    this.lineDashOffset_ = lineDashOffset;\n  }\n\n  /**\n   * Set the line join.\n   *\n   * @param {CanvasLineJoin|undefined} lineJoin Line join.\n   * @api\n   */\n  setLineJoin(lineJoin) {\n    this.lineJoin_ = lineJoin;\n  }\n\n  /**\n   * Set the miter limit.\n   *\n   * @param {number|undefined} miterLimit Miter limit.\n   * @api\n   */\n  setMiterLimit(miterLimit) {\n    this.miterLimit_ = miterLimit;\n  }\n\n  /**\n   * Set the width.\n   *\n   * @param {number|undefined} width Width.\n   * @api\n   */\n  setWidth(width) {\n    this.width_ = width;\n  }\n}\n\nexport default Stroke;\n","/**\n * @module ol/style/Style\n */\n\nimport CircleStyle from './Circle.js';\nimport Fill from './Fill.js';\nimport Stroke from './Stroke.js';\nimport {assert} from '../asserts.js';\n\n/**\n * A function that takes an {@link module:ol/Feature~Feature} and a `{number}`\n * representing the view's resolution. The function should return a\n * {@link module:ol/style/Style~Style} or an array of them. This way e.g. a\n * vector layer can be styled. If the function returns `undefined`, the\n * feature will not be rendered.\n *\n * @typedef {function(import(\"../Feature.js\").FeatureLike, number):(Style|Array<Style>|void)} StyleFunction\n */\n\n/**\n * A {@link Style}, an array of {@link Style}, or a {@link StyleFunction}.\n * @typedef {Style|Array<Style>|StyleFunction} StyleLike\n */\n\n/**\n * A function that takes an {@link module:ol/Feature~Feature} as argument and returns an\n * {@link module:ol/geom/Geometry~Geometry} that will be rendered and styled for the feature.\n *\n * @typedef {function(import(\"../Feature.js\").FeatureLike):\n *     (import(\"../geom/Geometry.js\").default|import(\"../render/Feature.js\").default|undefined)} GeometryFunction\n */\n\n/**\n * Custom renderer function. Takes two arguments:\n *\n * 1. The pixel coordinates of the geometry in GeoJSON notation.\n * 2. The {@link module:ol/render~State} of the layer renderer.\n *\n * @typedef {function((import(\"../coordinate.js\").Coordinate|Array<import(\"../coordinate.js\").Coordinate>|Array<Array<import(\"../coordinate.js\").Coordinate>>|Array<Array<Array<import(\"../coordinate.js\").Coordinate>>>),import(\"../render.js\").State): void} RenderFunction\n */\n\n/**\n * @typedef {Object} Options\n * @property {string|import(\"../geom/Geometry.js\").default|GeometryFunction} [geometry] Feature property or geometry\n * or function returning a geometry to render for this style.\n * @property {import(\"./Fill.js\").default} [fill] Fill style.\n * @property {import(\"./Image.js\").default} [image] Image style.\n * @property {RenderFunction} [renderer] Custom renderer. When configured, `fill`, `stroke` and `image` will be\n * ignored, and the provided function will be called with each render frame for each geometry.\n * @property {RenderFunction} [hitDetectionRenderer] Custom renderer for hit detection. If provided will be used\n * in hit detection rendering.\n * @property {import(\"./Stroke.js\").default} [stroke] Stroke style.\n * @property {import(\"./Text.js\").default} [text] Text style.\n * @property {number} [zIndex] Z index.\n */\n\n/**\n * @classdesc\n * Container for vector feature rendering styles. Any changes made to the style\n * or its children through `set*()` methods will not take effect until the\n * feature or layer that uses the style is re-rendered.\n *\n * ## Feature styles\n *\n * If no style is defined, the following default style is used:\n * ```js\n *  import {Circle, Fill, Stroke, Style} from 'ol/style.js';\n *\n *  const fill = new Fill({\n *    color: 'rgba(255,255,255,0.4)',\n *  });\n *  const stroke = new Stroke({\n *    color: '#3399CC',\n *    width: 1.25,\n *  });\n *  const styles = [\n *    new Style({\n *      image: new Circle({\n *        fill: fill,\n *        stroke: stroke,\n *        radius: 5,\n *      }),\n *      fill: fill,\n *      stroke: stroke,\n *    }),\n *  ];\n * ```\n *\n * A separate editing style has the following defaults:\n * ```js\n *  import {Circle, Fill, Stroke, Style} from 'ol/style.js';\n *\n *  const styles = {};\n *  const white = [255, 255, 255, 1];\n *  const blue = [0, 153, 255, 1];\n *  const width = 3;\n *  styles['Polygon'] = [\n *    new Style({\n *      fill: new Fill({\n *        color: [255, 255, 255, 0.5],\n *      }),\n *    }),\n *  ];\n *  styles['MultiPolygon'] =\n *      styles['Polygon'];\n *  styles['LineString'] = [\n *    new Style({\n *      stroke: new Stroke({\n *        color: white,\n *        width: width + 2,\n *      }),\n *    }),\n *    new Style({\n *      stroke: new Stroke({\n *        color: blue,\n *        width: width,\n *      }),\n *    }),\n *  ];\n *  styles['MultiLineString'] = styles['LineString'];\n *\n *  styles['Circle'] = styles['Polygon'].concat(\n *    styles['LineString']\n *  );\n *\n *  styles['Point'] = [\n *    new Style({\n *      image: new Circle({\n *        radius: width * 2,\n *        fill: new Fill({\n *          color: blue,\n *        }),\n *        stroke: new Stroke({\n *          color: white,\n *          width: width / 2,\n *        }),\n *      }),\n *      zIndex: Infinity,\n *    }),\n *  ];\n *  styles['MultiPoint'] =\n *      styles['Point'];\n *  styles['GeometryCollection'] =\n *      styles['Polygon'].concat(\n *          styles['LineString'],\n *          styles['Point']\n *      );\n * ```\n *\n * @api\n */\nclass Style {\n  /**\n   * @param {Options} [options] Style options.\n   */\n  constructor(options) {\n    options = options || {};\n\n    /**\n     * @private\n     * @type {string|import(\"../geom/Geometry.js\").default|GeometryFunction}\n     */\n    this.geometry_ = null;\n\n    /**\n     * @private\n     * @type {!GeometryFunction}\n     */\n    this.geometryFunction_ = defaultGeometryFunction;\n\n    if (options.geometry !== undefined) {\n      this.setGeometry(options.geometry);\n    }\n\n    /**\n     * @private\n     * @type {import(\"./Fill.js\").default}\n     */\n    this.fill_ = options.fill !== undefined ? options.fill : null;\n\n    /**\n     * @private\n     * @type {import(\"./Image.js\").default}\n     */\n    this.image_ = options.image !== undefined ? options.image : null;\n\n    /**\n     * @private\n     * @type {RenderFunction|null}\n     */\n    this.renderer_ = options.renderer !== undefined ? options.renderer : null;\n\n    /**\n     * @private\n     * @type {RenderFunction|null}\n     */\n    this.hitDetectionRenderer_ =\n      options.hitDetectionRenderer !== undefined\n        ? options.hitDetectionRenderer\n        : null;\n\n    /**\n     * @private\n     * @type {import(\"./Stroke.js\").default}\n     */\n    this.stroke_ = options.stroke !== undefined ? options.stroke : null;\n\n    /**\n     * @private\n     * @type {import(\"./Text.js\").default}\n     */\n    this.text_ = options.text !== undefined ? options.text : null;\n\n    /**\n     * @private\n     * @type {number|undefined}\n     */\n    this.zIndex_ = options.zIndex;\n  }\n\n  /**\n   * Clones the style.\n   * @return {Style} The cloned style.\n   * @api\n   */\n  clone() {\n    let geometry = this.getGeometry();\n    if (geometry && typeof geometry === 'object') {\n      geometry = /** @type {import(\"../geom/Geometry.js\").default} */ (\n        geometry\n      ).clone();\n    }\n    return new Style({\n      geometry: geometry,\n      fill: this.getFill() ? this.getFill().clone() : undefined,\n      image: this.getImage() ? this.getImage().clone() : undefined,\n      renderer: this.getRenderer(),\n      stroke: this.getStroke() ? this.getStroke().clone() : undefined,\n      text: this.getText() ? this.getText().clone() : undefined,\n      zIndex: this.getZIndex(),\n    });\n  }\n\n  /**\n   * Get the custom renderer function that was configured with\n   * {@link #setRenderer} or the `renderer` constructor option.\n   * @return {RenderFunction|null} Custom renderer function.\n   * @api\n   */\n  getRenderer() {\n    return this.renderer_;\n  }\n\n  /**\n   * Sets a custom renderer function for this style. When set, `fill`, `stroke`\n   * and `image` options of the style will be ignored.\n   * @param {RenderFunction|null} renderer Custom renderer function.\n   * @api\n   */\n  setRenderer(renderer) {\n    this.renderer_ = renderer;\n  }\n\n  /**\n   * Sets a custom renderer function for this style used\n   * in hit detection.\n   * @param {RenderFunction|null} renderer Custom renderer function.\n   * @api\n   */\n  setHitDetectionRenderer(renderer) {\n    this.hitDetectionRenderer_ = renderer;\n  }\n\n  /**\n   * Get the custom renderer function that was configured with\n   * {@link #setHitDetectionRenderer} or the `hitDetectionRenderer` constructor option.\n   * @return {RenderFunction|null} Custom renderer function.\n   * @api\n   */\n  getHitDetectionRenderer() {\n    return this.hitDetectionRenderer_;\n  }\n\n  /**\n   * Get the geometry to be rendered.\n   * @return {string|import(\"../geom/Geometry.js\").default|GeometryFunction}\n   * Feature property or geometry or function that returns the geometry that will\n   * be rendered with this style.\n   * @api\n   */\n  getGeometry() {\n    return this.geometry_;\n  }\n\n  /**\n   * Get the function used to generate a geometry for rendering.\n   * @return {!GeometryFunction} Function that is called with a feature\n   * and returns the geometry to render instead of the feature's geometry.\n   * @api\n   */\n  getGeometryFunction() {\n    return this.geometryFunction_;\n  }\n\n  /**\n   * Get the fill style.\n   * @return {import(\"./Fill.js\").default} Fill style.\n   * @api\n   */\n  getFill() {\n    return this.fill_;\n  }\n\n  /**\n   * Set the fill style.\n   * @param {import(\"./Fill.js\").default} fill Fill style.\n   * @api\n   */\n  setFill(fill) {\n    this.fill_ = fill;\n  }\n\n  /**\n   * Get the image style.\n   * @return {import(\"./Image.js\").default} Image style.\n   * @api\n   */\n  getImage() {\n    return this.image_;\n  }\n\n  /**\n   * Set the image style.\n   * @param {import(\"./Image.js\").default} image Image style.\n   * @api\n   */\n  setImage(image) {\n    this.image_ = image;\n  }\n\n  /**\n   * Get the stroke style.\n   * @return {import(\"./Stroke.js\").default} Stroke style.\n   * @api\n   */\n  getStroke() {\n    return this.stroke_;\n  }\n\n  /**\n   * Set the stroke style.\n   * @param {import(\"./Stroke.js\").default} stroke Stroke style.\n   * @api\n   */\n  setStroke(stroke) {\n    this.stroke_ = stroke;\n  }\n\n  /**\n   * Get the text style.\n   * @return {import(\"./Text.js\").default} Text style.\n   * @api\n   */\n  getText() {\n    return this.text_;\n  }\n\n  /**\n   * Set the text style.\n   * @param {import(\"./Text.js\").default} text Text style.\n   * @api\n   */\n  setText(text) {\n    this.text_ = text;\n  }\n\n  /**\n   * Get the z-index for the style.\n   * @return {number|undefined} ZIndex.\n   * @api\n   */\n  getZIndex() {\n    return this.zIndex_;\n  }\n\n  /**\n   * Set a geometry that is rendered instead of the feature's geometry.\n   *\n   * @param {string|import(\"../geom/Geometry.js\").default|GeometryFunction} geometry\n   *     Feature property or geometry or function returning a geometry to render\n   *     for this style.\n   * @api\n   */\n  setGeometry(geometry) {\n    if (typeof geometry === 'function') {\n      this.geometryFunction_ = geometry;\n    } else if (typeof geometry === 'string') {\n      this.geometryFunction_ = function (feature) {\n        return /** @type {import(\"../geom/Geometry.js\").default} */ (\n          feature.get(geometry)\n        );\n      };\n    } else if (!geometry) {\n      this.geometryFunction_ = defaultGeometryFunction;\n    } else if (geometry !== undefined) {\n      this.geometryFunction_ = function () {\n        return /** @type {import(\"../geom/Geometry.js\").default} */ (geometry);\n      };\n    }\n    this.geometry_ = geometry;\n  }\n\n  /**\n   * Set the z-index.\n   *\n   * @param {number|undefined} zIndex ZIndex.\n   * @api\n   */\n  setZIndex(zIndex) {\n    this.zIndex_ = zIndex;\n  }\n}\n\n/**\n * Convert the provided object into a style function.  Functions passed through\n * unchanged.  Arrays of Style or single style objects wrapped in a\n * new style function.\n * @param {StyleFunction|Array<Style>|Style} obj\n *     A style function, a single style, or an array of styles.\n * @return {StyleFunction} A style function.\n */\nexport function toFunction(obj) {\n  let styleFunction;\n\n  if (typeof obj === 'function') {\n    styleFunction = obj;\n  } else {\n    /**\n     * @type {Array<Style>}\n     */\n    let styles;\n    if (Array.isArray(obj)) {\n      styles = obj;\n    } else {\n      assert(typeof (/** @type {?} */ (obj).getZIndex) === 'function', 41); // Expected an `Style` or an array of `Style`\n      const style = /** @type {Style} */ (obj);\n      styles = [style];\n    }\n    styleFunction = function () {\n      return styles;\n    };\n  }\n  return styleFunction;\n}\n\n/**\n * @type {Array<Style>|null}\n */\nlet defaultStyles = null;\n\n/**\n * @param {import(\"../Feature.js\").FeatureLike} feature Feature.\n * @param {number} resolution Resolution.\n * @return {Array<Style>} Style.\n */\nexport function createDefaultStyle(feature, resolution) {\n  // We don't use an immediately-invoked function\n  // and a closure so we don't get an error at script evaluation time in\n  // browsers that do not support Canvas. (import(\"./Circle.js\").CircleStyle does\n  // canvas.getContext('2d') at construction time, which will cause an.error\n  // in such browsers.)\n  if (!defaultStyles) {\n    const fill = new Fill({\n      color: 'rgba(255,255,255,0.4)',\n    });\n    const stroke = new Stroke({\n      color: '#3399CC',\n      width: 1.25,\n    });\n    defaultStyles = [\n      new Style({\n        image: new CircleStyle({\n          fill: fill,\n          stroke: stroke,\n          radius: 5,\n        }),\n        fill: fill,\n        stroke: stroke,\n      }),\n    ];\n  }\n  return defaultStyles;\n}\n\n/**\n * Default styles for editing features.\n * @return {Object<import(\"../geom/Geometry.js\").Type, Array<Style>>} Styles\n */\nexport function createEditingStyle() {\n  /** @type {Object<import(\"../geom/Geometry.js\").Type, Array<Style>>} */\n  const styles = {};\n  const white = [255, 255, 255, 1];\n  const blue = [0, 153, 255, 1];\n  const width = 3;\n  styles['Polygon'] = [\n    new Style({\n      fill: new Fill({\n        color: [255, 255, 255, 0.5],\n      }),\n    }),\n  ];\n  styles['MultiPolygon'] = styles['Polygon'];\n\n  styles['LineString'] = [\n    new Style({\n      stroke: new Stroke({\n        color: white,\n        width: width + 2,\n      }),\n    }),\n    new Style({\n      stroke: new Stroke({\n        color: blue,\n        width: width,\n      }),\n    }),\n  ];\n  styles['MultiLineString'] = styles['LineString'];\n\n  styles['Circle'] = styles['Polygon'].concat(styles['LineString']);\n\n  styles['Point'] = [\n    new Style({\n      image: new CircleStyle({\n        radius: width * 2,\n        fill: new Fill({\n          color: blue,\n        }),\n        stroke: new Stroke({\n          color: white,\n          width: width / 2,\n        }),\n      }),\n      zIndex: Infinity,\n    }),\n  ];\n  styles['MultiPoint'] = styles['Point'];\n\n  styles['GeometryCollection'] = styles['Polygon'].concat(\n    styles['LineString'],\n    styles['Point']\n  );\n\n  return styles;\n}\n\n/**\n * Function that is called with a feature and returns its default geometry.\n * @param {import(\"../Feature.js\").FeatureLike} feature Feature to get the geometry for.\n * @return {import(\"../geom/Geometry.js\").default|import(\"../render/Feature.js\").default|undefined} Geometry to render.\n */\nfunction defaultGeometryFunction(feature) {\n  return feature.getGeometry();\n}\n\nexport default Style;\n","/**\n * @module ol/style/Text\n */\nimport Fill from './Fill.js';\nimport {toSize} from '../size.js';\n\n/**\n * @typedef {'point' | 'line'} TextPlacement\n * Default text placement is `'point'`. Note that\n * `'line'` requires the underlying geometry to be a {@link module:ol/geom/LineString~LineString},\n * {@link module:ol/geom/Polygon~Polygon}, {@link module:ol/geom/MultiLineString~MultiLineString} or\n * {@link module:ol/geom/MultiPolygon~MultiPolygon}.\n */\n\n/**\n * @typedef {'left' | 'center' | 'right'} TextJustify\n */\n\n/**\n * The default fill color to use if no fill was set at construction time; a\n * blackish `#333`.\n *\n * @const {string}\n */\nconst DEFAULT_FILL_COLOR = '#333';\n\n/**\n * @typedef {Object} Options\n * @property {string} [font] Font style as CSS `font` value, see:\n * https://developer.mozilla.org/en-US/docs/Web/API/CanvasRenderingContext2D/font. Default is `'10px sans-serif'`\n * @property {number} [maxAngle=Math.PI/4] When `placement` is set to `'line'`, allow a maximum angle between adjacent characters.\n * The expected value is in radians, and the default is 45° (`Math.PI / 4`).\n * @property {number} [offsetX=0] Horizontal text offset in pixels. A positive will shift the text right.\n * @property {number} [offsetY=0] Vertical text offset in pixels. A positive will shift the text down.\n * @property {boolean} [overflow=false] For polygon labels or when `placement` is set to `'line'`, allow text to exceed\n * the width of the polygon at the label position or the length of the path that it follows.\n * @property {TextPlacement} [placement='point'] Text placement.\n * @property {number} [repeat] Repeat interval. When set, the text will be repeated at this interval, which specifies\n * the distance between two text anchors in pixels. Only available when `placement` is set to `'line'`. Overrides 'textAlign'.\n * @property {number|import(\"../size.js\").Size} [scale] Scale.\n * @property {boolean} [rotateWithView=false] Whether to rotate the text with the view.\n * @property {number} [rotation=0] Rotation in radians (positive rotation clockwise).\n * @property {string|Array<string>} [text] Text content or rich text content. For plain text provide a string, which can\n * contain line breaks (`\\n`). For rich text provide an array of text/font tuples. A tuple consists of the text to\n * render and the font to use (or `''` to use the text style's font). A line break has to be a separate tuple (i.e. `'\\n', ''`).\n * **Example:** `['foo', 'bold 10px sans-serif', ' bar', 'italic 10px sans-serif', ' baz', '']` will yield \"**foo** *bar* baz\".\n * **Note:** Rich text is not supported for `placement: 'line'` or the immediate rendering API.\n * @property {CanvasTextAlign} [textAlign] Text alignment. Possible values: `'left'`, `'right'`, `'center'`, `'end'` or `'start'`.\n * Default is `'center'` for `placement: 'point'`. For `placement: 'line'`, the default is to let the renderer choose a\n * placement where `maxAngle` is not exceeded.\n * @property {TextJustify} [justify] Text justification within the text box.\n * If not set, text is justified towards the `textAlign` anchor.\n * Otherwise, use options `'left'`, `'center'`, or `'right'` to justify the text within the text box.\n * **Note:** `justify` is ignored for immediate rendering and also for `placement: 'line'`.\n * @property {CanvasTextBaseline} [textBaseline='middle'] Text base line. Possible values: `'bottom'`, `'top'`, `'middle'`, `'alphabetic'`,\n * `'hanging'`, `'ideographic'`.\n * @property {import(\"./Fill.js\").default|null} [fill] Fill style. If none is provided, we'll use a dark fill-style (#333). Specify `null` for no fill.\n * @property {import(\"./Stroke.js\").default} [stroke] Stroke style.\n * @property {import(\"./Fill.js\").default} [backgroundFill] Fill style for the text background when `placement` is\n * `'point'`. Default is no fill.\n * @property {import(\"./Stroke.js\").default} [backgroundStroke] Stroke style for the text background  when `placement`\n * is `'point'`. Default is no stroke.\n * @property {Array<number>} [padding=[0, 0, 0, 0]] Padding in pixels around the text for decluttering and background. The order of\n * values in the array is `[top, right, bottom, left]`.\n */\n\n/**\n * @classdesc\n * Set text style for vector features.\n * @api\n */\nclass Text {\n  /**\n   * @param {Options} [options] Options.\n   */\n  constructor(options) {\n    options = options || {};\n\n    /**\n     * @private\n     * @type {string|undefined}\n     */\n    this.font_ = options.font;\n\n    /**\n     * @private\n     * @type {number|undefined}\n     */\n    this.rotation_ = options.rotation;\n\n    /**\n     * @private\n     * @type {boolean|undefined}\n     */\n    this.rotateWithView_ = options.rotateWithView;\n\n    /**\n     * @private\n     * @type {number|import(\"../size.js\").Size|undefined}\n     */\n    this.scale_ = options.scale;\n\n    /**\n     * @private\n     * @type {import(\"../size.js\").Size}\n     */\n    this.scaleArray_ = toSize(options.scale !== undefined ? options.scale : 1);\n\n    /**\n     * @private\n     * @type {string|Array<string>|undefined}\n     */\n    this.text_ = options.text;\n\n    /**\n     * @private\n     * @type {CanvasTextAlign|undefined}\n     */\n    this.textAlign_ = options.textAlign;\n\n    /**\n     * @private\n     * @type {TextJustify|undefined}\n     */\n    this.justify_ = options.justify;\n\n    /**\n     * @private\n     * @type {number|undefined}\n     */\n    this.repeat_ = options.repeat;\n\n    /**\n     * @private\n     * @type {CanvasTextBaseline|undefined}\n     */\n    this.textBaseline_ = options.textBaseline;\n\n    /**\n     * @private\n     * @type {import(\"./Fill.js\").default}\n     */\n    this.fill_ =\n      options.fill !== undefined\n        ? options.fill\n        : new Fill({color: DEFAULT_FILL_COLOR});\n\n    /**\n     * @private\n     * @type {number}\n     */\n    this.maxAngle_ =\n      options.maxAngle !== undefined ? options.maxAngle : Math.PI / 4;\n\n    /**\n     * @private\n     * @type {TextPlacement}\n     */\n    this.placement_ =\n      options.placement !== undefined ? options.placement : 'point';\n\n    /**\n     * @private\n     * @type {boolean}\n     */\n    this.overflow_ = !!options.overflow;\n\n    /**\n     * @private\n     * @type {import(\"./Stroke.js\").default}\n     */\n    this.stroke_ = options.stroke !== undefined ? options.stroke : null;\n\n    /**\n     * @private\n     * @type {number}\n     */\n    this.offsetX_ = options.offsetX !== undefined ? options.offsetX : 0;\n\n    /**\n     * @private\n     * @type {number}\n     */\n    this.offsetY_ = options.offsetY !== undefined ? options.offsetY : 0;\n\n    /**\n     * @private\n     * @type {import(\"./Fill.js\").default}\n     */\n    this.backgroundFill_ = options.backgroundFill\n      ? options.backgroundFill\n      : null;\n\n    /**\n     * @private\n     * @type {import(\"./Stroke.js\").default}\n     */\n    this.backgroundStroke_ = options.backgroundStroke\n      ? options.backgroundStroke\n      : null;\n\n    /**\n     * @private\n     * @type {Array<number>|null}\n     */\n    this.padding_ = options.padding === undefined ? null : options.padding;\n  }\n\n  /**\n   * Clones the style.\n   * @return {Text} The cloned style.\n   * @api\n   */\n  clone() {\n    const scale = this.getScale();\n    return new Text({\n      font: this.getFont(),\n      placement: this.getPlacement(),\n      repeat: this.getRepeat(),\n      maxAngle: this.getMaxAngle(),\n      overflow: this.getOverflow(),\n      rotation: this.getRotation(),\n      rotateWithView: this.getRotateWithView(),\n      scale: Array.isArray(scale) ? scale.slice() : scale,\n      text: this.getText(),\n      textAlign: this.getTextAlign(),\n      justify: this.getJustify(),\n      textBaseline: this.getTextBaseline(),\n      fill: this.getFill() ? this.getFill().clone() : undefined,\n      stroke: this.getStroke() ? this.getStroke().clone() : undefined,\n      offsetX: this.getOffsetX(),\n      offsetY: this.getOffsetY(),\n      backgroundFill: this.getBackgroundFill()\n        ? this.getBackgroundFill().clone()\n        : undefined,\n      backgroundStroke: this.getBackgroundStroke()\n        ? this.getBackgroundStroke().clone()\n        : undefined,\n      padding: this.getPadding() || undefined,\n    });\n  }\n\n  /**\n   * Get the `overflow` configuration.\n   * @return {boolean} Let text overflow the length of the path they follow.\n   * @api\n   */\n  getOverflow() {\n    return this.overflow_;\n  }\n\n  /**\n   * Get the font name.\n   * @return {string|undefined} Font.\n   * @api\n   */\n  getFont() {\n    return this.font_;\n  }\n\n  /**\n   * Get the maximum angle between adjacent characters.\n   * @return {number} Angle in radians.\n   * @api\n   */\n  getMaxAngle() {\n    return this.maxAngle_;\n  }\n\n  /**\n   * Get the label placement.\n   * @return {TextPlacement} Text placement.\n   * @api\n   */\n  getPlacement() {\n    return this.placement_;\n  }\n\n  /**\n   * Get the repeat interval of the text.\n   * @return {number|undefined} Repeat interval in pixels.\n   * @api\n   */\n  getRepeat() {\n    return this.repeat_;\n  }\n\n  /**\n   * Get the x-offset for the text.\n   * @return {number} Horizontal text offset.\n   * @api\n   */\n  getOffsetX() {\n    return this.offsetX_;\n  }\n\n  /**\n   * Get the y-offset for the text.\n   * @return {number} Vertical text offset.\n   * @api\n   */\n  getOffsetY() {\n    return this.offsetY_;\n  }\n\n  /**\n   * Get the fill style for the text.\n   * @return {import(\"./Fill.js\").default} Fill style.\n   * @api\n   */\n  getFill() {\n    return this.fill_;\n  }\n\n  /**\n   * Determine whether the text rotates with the map.\n   * @return {boolean|undefined} Rotate with map.\n   * @api\n   */\n  getRotateWithView() {\n    return this.rotateWithView_;\n  }\n\n  /**\n   * Get the text rotation.\n   * @return {number|undefined} Rotation.\n   * @api\n   */\n  getRotation() {\n    return this.rotation_;\n  }\n\n  /**\n   * Get the text scale.\n   * @return {number|import(\"../size.js\").Size|undefined} Scale.\n   * @api\n   */\n  getScale() {\n    return this.scale_;\n  }\n\n  /**\n   * Get the symbolizer scale array.\n   * @return {import(\"../size.js\").Size} Scale array.\n   */\n  getScaleArray() {\n    return this.scaleArray_;\n  }\n\n  /**\n   * Get the stroke style for the text.\n   * @return {import(\"./Stroke.js\").default} Stroke style.\n   * @api\n   */\n  getStroke() {\n    return this.stroke_;\n  }\n\n  /**\n   * Get the text to be rendered.\n   * @return {string|Array<string>|undefined} Text.\n   * @api\n   */\n  getText() {\n    return this.text_;\n  }\n\n  /**\n   * Get the text alignment.\n   * @return {CanvasTextAlign|undefined} Text align.\n   * @api\n   */\n  getTextAlign() {\n    return this.textAlign_;\n  }\n\n  /**\n   * Get the justification.\n   * @return {TextJustify|undefined} Justification.\n   * @api\n   */\n  getJustify() {\n    return this.justify_;\n  }\n\n  /**\n   * Get the text baseline.\n   * @return {CanvasTextBaseline|undefined} Text baseline.\n   * @api\n   */\n  getTextBaseline() {\n    return this.textBaseline_;\n  }\n\n  /**\n   * Get the background fill style for the text.\n   * @return {import(\"./Fill.js\").default} Fill style.\n   * @api\n   */\n  getBackgroundFill() {\n    return this.backgroundFill_;\n  }\n\n  /**\n   * Get the background stroke style for the text.\n   * @return {import(\"./Stroke.js\").default} Stroke style.\n   * @api\n   */\n  getBackgroundStroke() {\n    return this.backgroundStroke_;\n  }\n\n  /**\n   * Get the padding for the text.\n   * @return {Array<number>|null} Padding.\n   * @api\n   */\n  getPadding() {\n    return this.padding_;\n  }\n\n  /**\n   * Set the `overflow` property.\n   *\n   * @param {boolean} overflow Let text overflow the path that it follows.\n   * @api\n   */\n  setOverflow(overflow) {\n    this.overflow_ = overflow;\n  }\n\n  /**\n   * Set the font.\n   *\n   * @param {string|undefined} font Font.\n   * @api\n   */\n  setFont(font) {\n    this.font_ = font;\n  }\n\n  /**\n   * Set the maximum angle between adjacent characters.\n   *\n   * @param {number} maxAngle Angle in radians.\n   * @api\n   */\n  setMaxAngle(maxAngle) {\n    this.maxAngle_ = maxAngle;\n  }\n\n  /**\n   * Set the x offset.\n   *\n   * @param {number} offsetX Horizontal text offset.\n   * @api\n   */\n  setOffsetX(offsetX) {\n    this.offsetX_ = offsetX;\n  }\n\n  /**\n   * Set the y offset.\n   *\n   * @param {number} offsetY Vertical text offset.\n   * @api\n   */\n  setOffsetY(offsetY) {\n    this.offsetY_ = offsetY;\n  }\n\n  /**\n   * Set the text placement.\n   *\n   * @param {TextPlacement} placement Placement.\n   * @api\n   */\n  setPlacement(placement) {\n    this.placement_ = placement;\n  }\n\n  /**\n   * Set the repeat interval of the text.\n   * @param {number|undefined} [repeat] Repeat interval in pixels.\n   * @api\n   */\n  setRepeat(repeat) {\n    this.repeat_ = repeat;\n  }\n\n  /**\n   * Set whether to rotate the text with the view.\n   *\n   * @param {boolean} rotateWithView Rotate with map.\n   * @api\n   */\n  setRotateWithView(rotateWithView) {\n    this.rotateWithView_ = rotateWithView;\n  }\n\n  /**\n   * Set the fill.\n   *\n   * @param {import(\"./Fill.js\").default} fill Fill style.\n   * @api\n   */\n  setFill(fill) {\n    this.fill_ = fill;\n  }\n\n  /**\n   * Set the rotation.\n   *\n   * @param {number|undefined} rotation Rotation.\n   * @api\n   */\n  setRotation(rotation) {\n    this.rotation_ = rotation;\n  }\n\n  /**\n   * Set the scale.\n   *\n   * @param {number|import(\"../size.js\").Size|undefined} scale Scale.\n   * @api\n   */\n  setScale(scale) {\n    this.scale_ = scale;\n    this.scaleArray_ = toSize(scale !== undefined ? scale : 1);\n  }\n\n  /**\n   * Set the stroke.\n   *\n   * @param {import(\"./Stroke.js\").default} stroke Stroke style.\n   * @api\n   */\n  setStroke(stroke) {\n    this.stroke_ = stroke;\n  }\n\n  /**\n   * Set the text.\n   *\n   * @param {string|Array<string>|undefined} text Text.\n   * @api\n   */\n  setText(text) {\n    this.text_ = text;\n  }\n\n  /**\n   * Set the text alignment.\n   *\n   * @param {CanvasTextAlign|undefined} textAlign Text align.\n   * @api\n   */\n  setTextAlign(textAlign) {\n    this.textAlign_ = textAlign;\n  }\n\n  /**\n   * Set the justification.\n   *\n   * @param {TextJustify|undefined} justify Justification.\n   * @api\n   */\n  setJustify(justify) {\n    this.justify_ = justify;\n  }\n\n  /**\n   * Set the text baseline.\n   *\n   * @param {CanvasTextBaseline|undefined} textBaseline Text baseline.\n   * @api\n   */\n  setTextBaseline(textBaseline) {\n    this.textBaseline_ = textBaseline;\n  }\n\n  /**\n   * Set the background fill.\n   *\n   * @param {import(\"./Fill.js\").default} fill Fill style.\n   * @api\n   */\n  setBackgroundFill(fill) {\n    this.backgroundFill_ = fill;\n  }\n\n  /**\n   * Set the background stroke.\n   *\n   * @param {import(\"./Stroke.js\").default} stroke Stroke style.\n   * @api\n   */\n  setBackgroundStroke(stroke) {\n    this.backgroundStroke_ = stroke;\n  }\n\n  /**\n   * Set the padding (`[top, right, bottom, left]`).\n   *\n   * @param {Array<number>|null} padding Padding.\n   * @api\n   */\n  setPadding(padding) {\n    this.padding_ = padding;\n  }\n}\n\nexport default Text;\n","/**\n * @module ol/style/flat\n */\n\nimport Circle from '../style/Circle.js';\nimport Fill from './Fill.js';\nimport Icon from './Icon.js';\nimport RegularShape from './RegularShape.js';\nimport Stroke from './Stroke.js';\nimport Style from './Style.js';\nimport Text from './Text.js';\n\n/**\n * For static styling, the [layer.setStyle()]{@link module:ol/layer/Vector~VectorLayer#setStyle} method\n * can be called with an object literal that has fill, stroke, text, icon, regular shape, and/or circle properties.\n * @api\n *\n * @typedef {FlatFill & FlatStroke & FlatText & FlatIcon & FlatShape & FlatCircle} FlatStyle\n */\n\n/**\n * A flat style literal or an array of the same.\n *\n * @typedef {FlatStyle|Array<FlatStyle>} FlatStyleLike\n */\n\n/**\n * Fill style properties applied to polygon features.\n *\n * @typedef {Object} FlatFill\n * @property {import(\"../color.js\").Color|import(\"../colorlike.js\").ColorLike} [fill-color] The fill color.\n */\n\n/**\n * Stroke style properties applied to line strings and polygon boundaries.  To apply a stroke, at least one of\n * `stroke-color` or `stroke-width` must be provided.\n *\n * @typedef {Object} FlatStroke\n * @property {import(\"../color.js\").Color|import(\"../colorlike.js\").ColorLike} [stroke-color] The stroke color.\n * @property {number} [stroke-width] Stroke pixel width.\n * @property {CanvasLineCap} [stroke-line-cap='round'] Line cap style: `butt`, `round`, or `square`.\n * @property {CanvasLineJoin} [stroke-line-join='round'] Line join style: `bevel`, `round`, or `miter`.\n * @property {Array<number>} [stroke-line-dash] Line dash pattern.\n * @property {number} [stroke-line-dash-offset=0] Line dash offset.\n * @property {number} [stroke-miter-limit=10] Miter limit.\n */\n\n/**\n * Label style properties applied to all features.  At a minimum, a `text-value` must be provided.\n *\n * @typedef {Object} FlatText\n * @property {string|Array<string>} [text-value] Text content or rich text content. For plain text provide a string, which can\n * contain line breaks (`\\n`). For rich text provide an array of text/font tuples. A tuple consists of the text to\n * render and the font to use (or `''` to use the text style's font). A line break has to be a separate tuple (i.e. `'\\n', ''`).\n * **Example:** `['foo', 'bold 10px sans-serif', ' bar', 'italic 10px sans-serif', ' baz', '']` will yield \"**foo** *bar* baz\".\n * **Note:** Rich text is not supported for `'text-placement': 'line'` or the immediate rendering API.\n * @property {string} [text-font] Font style as CSS `font` value, see:\n * https://developer.mozilla.org/en-US/docs/Web/API/CanvasRenderingContext2D/font. Default is `'10px sans-serif'`\n * @property {number} [text-max-angle=Math.PI/4] When `text-placement` is set to `'line'`, allow a maximum angle between adjacent characters.\n * The expected value is in radians, and the default is 45° (`Math.PI / 4`).\n * @property {number} [text-offset-x=0] Horizontal text offset in pixels. A positive will shift the text right.\n * @property {number} [text-offset-y=0] Vertical text offset in pixels. A positive will shift the text down.\n * @property {boolean} [text-overflow=false] For polygon labels or when `placement` is set to `'line'`, allow text to exceed\n * the width of the polygon at the label position or the length of the path that it follows.\n * @property {import(\"./Text.js\").TextPlacement} [text-placement='point'] Text placement.\n * @property {number} [text-repeat] Repeat interval in pixels. When set, the text will be repeated at this interval. Only available when\n * `text-placement` is set to `'line'`. Overrides `text-align`.\n * @property {number|import(\"../size.js\").Size} [text-scale] Scale.\n * @property {boolean} [text-rotate-with-view=false] Whether to rotate the text with the view.\n * @property {number} [text-rotation=0] Rotation in radians (positive rotation clockwise).\n * @property {CanvasTextAlign} [text-align] Text alignment. Possible values: `'left'`, `'right'`, `'center'`, `'end'` or `'start'`.\n * Default is `'center'` for `'text-placement': 'point'`. For `'text-placement': 'line'`, the default is to let the renderer choose a\n * placement where `text-max-angle` is not exceeded.\n * @property {import('./Text.js').TextJustify} [text-justify] Text justification within the text box.\n * If not set, text is justified towards the `textAlign` anchor.\n * Otherwise, use options `'left'`, `'center'`, or `'right'` to justify the text within the text box.\n * **Note:** `text-justify` is ignored for immediate rendering and also for `'text-placement': 'line'`.\n * @property {CanvasTextBaseline} [text-baseline='middle'] Text base line. Possible values: `'bottom'`, `'top'`, `'middle'`, `'alphabetic'`,\n * `'hanging'`, `'ideographic'`.\n * @property {Array<number>} [text-padding=[0, 0, 0, 0]] Padding in pixels around the text for decluttering and background. The order of\n * values in the array is `[top, right, bottom, left]`.\n * @property {import(\"../color.js\").Color|import(\"../colorlike.js\").ColorLike} [text-fill-color] The fill color. Specify `'none'` to avoid hit detection on the fill.\n * @property {import(\"../color.js\").Color|import(\"../colorlike.js\").ColorLike} [text-background-fill-color] The fill color.\n * @property {import(\"../color.js\").Color|import(\"../colorlike.js\").ColorLike} [text-stroke-color] The stroke color.\n * @property {CanvasLineCap} [text-stroke-line-cap='round'] Line cap style: `butt`, `round`, or `square`.\n * @property {CanvasLineJoin} [text-stroke-line-join='round'] Line join style: `bevel`, `round`, or `miter`.\n * @property {Array<number>} [text-stroke-line-dash] Line dash pattern.\n * @property {number} [text-stroke-line-dash-offset=0] Line dash offset.\n * @property {number} [text-stroke-miter-limit=10] Miter limit.\n * @property {number} [text-stroke-width] Stroke pixel width.\n * @property {import(\"../color.js\").Color|import(\"../colorlike.js\").ColorLike} [text-background-stroke-color] The stroke color.\n * @property {CanvasLineCap} [text-background-stroke-line-cap='round'] Line cap style: `butt`, `round`, or `square`.\n * @property {CanvasLineJoin} [text-background-stroke-line-join='round'] Line join style: `bevel`, `round`, or `miter`.\n * @property {Array<number>} [text-background-stroke-line-dash] Line dash pattern.\n * @property {number} [text-background-stroke-line-dash-offset=0] Line dash offset.\n * @property {number} [text-background-stroke-miter-limit=10] Miter limit.\n * @property {number} [text-background-stroke-width] Stroke pixel width.\n */\n\n/**\n * Icon style properties applied to point features.  One of `icon-src` or `icon-img` must be provided to render\n * points with an icon.\n *\n * @typedef {Object} FlatIcon\n * @property {string} [icon-src] Image source URI.\n * @property {HTMLImageElement|HTMLCanvasElement} [icon-img] Image object for the icon. If the `icon-src` option is not provided then the\n * provided image must already be loaded. And in that case, it is required\n * to provide the size of the image, with the `icon-img-size` option.\n * @property {import(\"../size.js\").Size} [icon-img-size] Image size in pixels. Only required if `icon-img` is set and `icon-src` is not.\n * The provided size needs to match the actual size of the image.\n * @property {Array<number>} [icon-anchor=[0.5, 0.5]] Anchor. Default value is the icon center.\n * @property {import(\"./Icon.js\").IconOrigin} [icon-anchor-origin='top-left'] Origin of the anchor: `bottom-left`, `bottom-right`,\n * `top-left` or `top-right`.\n * @property {import(\"./Icon.js\").IconAnchorUnits} [icon-anchor-x-units='fraction'] Units in which the anchor x value is\n * specified. A value of `'fraction'` indicates the x value is a fraction of the icon. A value of `'pixels'` indicates\n * the x value in pixels.\n * @property {import(\"./Icon.js\").IconAnchorUnits} [icon-anchor-y-units='fraction'] Units in which the anchor y value is\n * specified. A value of `'fraction'` indicates the y value is a fraction of the icon. A value of `'pixels'` indicates\n * the y value in pixels.\n * @property {import(\"../color.js\").Color|string} [icon-color] Color to tint the icon. If not specified,\n * the icon will be left as is.\n * @property {null|string} [icon-cross-origin] The `crossOrigin` attribute for loaded images. Note that you must provide a\n * `icon-cross-origin` value if you want to access pixel data with the Canvas renderer.\n * See https://developer.mozilla.org/en-US/docs/Web/HTML/CORS_enabled_image for more detail.\n * @property {Array<number>} [icon-offset=[0, 0]] Offset, which, together with the size and the offset origin, define the\n * sub-rectangle to use from the original icon image.\n * @property {Array<number>} [icon-displacement=[0,0]] Displacement of the icon.\n * @property {import(\"./Icon.js\").IconOrigin} [icon-offset-origin='top-left'] Origin of the offset: `bottom-left`, `bottom-right`,\n * `top-left` or `top-right`.\n * @property {number} [icon-opacity=1] Opacity of the icon.\n * @property {number|import(\"../size.js\").Size} [icon-scale=1] Scale.\n * @property {number} [icon-width] Width of the icon. If not specified, the actual image width will be used. Cannot be combined\n * with `scale`.\n * @property {number} [icon-height] Height of the icon. If not specified, the actual image height will be used. Cannot be combined\n * with `scale`.\n * @property {number} [icon-rotation=0] Rotation in radians (positive rotation clockwise).\n * @property {boolean} [icon-rotate-with-view=false] Whether to rotate the icon with the view.\n * @property {import(\"../size.js\").Size} [icon-size] Icon size in pixel. Can be used together with `icon-offset` to define the\n * sub-rectangle to use from the origin (sprite) icon image.\n * @property {\"declutter\"|\"obstacle\"|\"none\"|undefined} [icon-declutter-mode] Declutter mode\n */\n\n/**\n * Regular shape style properties for rendering point features.  At least `shape-points` must be provided.\n *\n * @typedef {Object} FlatShape\n * @property {number} [shape-points] Number of points for stars and regular polygons. In case of a polygon, the number of points\n * is the number of sides.\n * @property {import(\"../color.js\").Color|import(\"../colorlike.js\").ColorLike} [shape-fill-color] The fill color.\n * @property {import(\"../color.js\").Color|import(\"../colorlike.js\").ColorLike} [shape-stroke-color] The stroke color.\n * @property {number} [shape-stroke-width] Stroke pixel width.\n * @property {CanvasLineCap} [shape-stroke-line-cap='round'] Line cap style: `butt`, `round`, or `square`.\n * @property {CanvasLineJoin} [shape-stroke-line-join='round'] Line join style: `bevel`, `round`, or `miter`.\n * @property {Array<number>} [shape-stroke-line-dash] Line dash pattern.\n * @property {number} [shape-stroke-line-dash-offset=0] Line dash offset.\n * @property {number} [shape-stroke-miter-limit=10] Miter limit.\n * @property {number} [shape-radius] Radius of a regular polygon.\n * @property {number} [shape-radius1] First radius of a star. Ignored if radius is set.\n * @property {number} [shape-radius2] Second radius of a star.\n * @property {number} [shape-angle=0] Shape's angle in radians. A value of 0 will have one of the shape's point facing up.\n * @property {Array<number>} [shape-displacement=[0,0]] Displacement of the shape\n * @property {number} [shape-rotation=0] Rotation in radians (positive rotation clockwise).\n * @property {boolean} [shape-rotate-with-view=false] Whether to rotate the shape with the view.\n * @property {number|import(\"../size.js\").Size} [shape-scale=1] Scale. Unless two dimensional scaling is required a better\n * result may be obtained with appropriate settings for `shape-radius`, `shape-radius1` and `shape-radius2`.\n * @property {\"declutter\"|\"obstacle\"|\"none\"|undefined} [shape-declutter-mode] Declutter mode.\n */\n\n/**\n * Circle style properties for rendering point features.  At least `circle-radius` must be provided.\n *\n * @typedef {Object} FlatCircle\n * @property {number} [circle-radius] Circle radius.\n * @property {import(\"../color.js\").Color|import(\"../colorlike.js\").ColorLike} [circle-fill-color] The fill color.\n * @property {import(\"../color.js\").Color|import(\"../colorlike.js\").ColorLike} [circle-stroke-color] The stroke color.\n * @property {number} [circle-stroke-width] Stroke pixel width.\n * @property {CanvasLineCap} [circle-stroke-line-cap='round'] Line cap style: `butt`, `round`, or `square`.\n * @property {CanvasLineJoin} [circle-stroke-line-join='round'] Line join style: `bevel`, `round`, or `miter`.\n * @property {Array<number>} [circle-stroke-line-dash] Line dash pattern.\n * @property {number} [circle-stroke-line-dash-offset=0] Line dash offset.\n * @property {number} [circle-stroke-miter-limit=10] Miter limit.\n * @property {Array<number>} [circle-displacement=[0,0]] displacement\n * @property {number|import(\"../size.js\").Size} [circle-scale=1] Scale. A two dimensional scale will produce an ellipse.\n * Unless two dimensional scaling is required a better result may be obtained with an appropriate setting for `circle-radius`.\n * @property {number} [circle-rotation=0] Rotation in radians\n * (positive rotation clockwise, meaningful only when used in conjunction with a two dimensional scale).\n * @property {boolean} [circle-rotate-with-view=false] Whether to rotate the shape with the view\n * (meaningful only when used in conjunction with a two dimensional scale).\n * @property {\"declutter\"|\"obstacle\"|\"none\"|undefined} [circle-declutter-mode] Declutter mode\n */\n\n/**\n * @param {FlatStyle} flatStyle A flat style literal.\n * @return {import(\"./Style.js\").default} A style instance.\n */\nexport function toStyle(flatStyle) {\n  const style = new Style({\n    fill: getFill(flatStyle, ''),\n    stroke: getStroke(flatStyle, ''),\n    text: getText(flatStyle),\n    image: getImage(flatStyle),\n  });\n\n  return style;\n}\n\n/**\n * @param {FlatStyle} flatStyle The flat style.\n * @param {string} prefix The property prefix.\n * @return {Fill|null|undefined} The fill (if any).\n */\nfunction getFill(flatStyle, prefix) {\n  const color = flatStyle[prefix + 'fill-color'];\n  if (!color) {\n    return;\n  }\n  if (color === 'none') {\n    return null;\n  }\n\n  return new Fill({color: color});\n}\n\n/**\n * @param {FlatStyle} flatStyle The flat style.\n * @param {string} prefix The property prefix.\n * @return {Stroke|undefined} The stroke (if any).\n */\nfunction getStroke(flatStyle, prefix) {\n  const width = flatStyle[prefix + 'stroke-width'];\n  const color = flatStyle[prefix + 'stroke-color'];\n  if (!width && !color) {\n    return;\n  }\n\n  return new Stroke({\n    width: width,\n    color: color,\n    lineCap: flatStyle[prefix + 'stroke-line-cap'],\n    lineJoin: flatStyle[prefix + 'stroke-line-join'],\n    lineDash: flatStyle[prefix + 'stroke-line-dash'],\n    lineDashOffset: flatStyle[prefix + 'stroke-line-dash-offset'],\n    miterLimit: flatStyle[prefix + 'stroke-miter-limit'],\n  });\n}\n\n/**\n * @param {FlatStyle} flatStyle The flat style.\n * @return {Text|undefined} The text (if any).\n */\nfunction getText(flatStyle) {\n  const value = flatStyle['text-value'];\n  if (!value) {\n    return;\n  }\n\n  const text = new Text({\n    text: value,\n    font: flatStyle['text-font'],\n    maxAngle: flatStyle['text-max-angle'],\n    offsetX: flatStyle['text-offset-x'],\n    offsetY: flatStyle['text-offset-y'],\n    overflow: flatStyle['text-overflow'],\n    placement: flatStyle['text-placement'],\n    repeat: flatStyle['text-repeat'],\n    scale: flatStyle['text-scale'],\n    rotateWithView: flatStyle['text-rotate-with-view'],\n    rotation: flatStyle['text-rotation'],\n    textAlign: flatStyle['text-align'],\n    justify: flatStyle['text-justify'],\n    textBaseline: flatStyle['text-baseline'],\n    padding: flatStyle['text-padding'],\n    fill: getFill(flatStyle, 'text-'),\n    backgroundFill: getFill(flatStyle, 'text-background-'),\n    stroke: getStroke(flatStyle, 'text-'),\n    backgroundStroke: getStroke(flatStyle, 'text-background-'),\n  });\n\n  return text;\n}\n\n/**\n * @param {FlatStyle} flatStyle The flat style.\n * @return {import(\"./Image.js\").default|undefined} The image (if any).\n */\nfunction getImage(flatStyle) {\n  const iconSrc = flatStyle['icon-src'];\n  const iconImg = flatStyle['icon-img'];\n  if (iconSrc || iconImg) {\n    const icon = new Icon({\n      src: iconSrc,\n      img: iconImg,\n      imgSize: flatStyle['icon-img-size'],\n      anchor: flatStyle['icon-anchor'],\n      anchorOrigin: flatStyle['icon-anchor-origin'],\n      anchorXUnits: flatStyle['icon-anchor-x-units'],\n      anchorYUnits: flatStyle['icon-anchor-y-units'],\n      color: flatStyle['icon-color'],\n      crossOrigin: flatStyle['icon-cross-origin'],\n      offset: flatStyle['icon-offset'],\n      displacement: flatStyle['icon-displacement'],\n      opacity: flatStyle['icon-opacity'],\n      scale: flatStyle['icon-scale'],\n      width: flatStyle['icon-width'],\n      height: flatStyle['icon-height'],\n      rotation: flatStyle['icon-rotation'],\n      rotateWithView: flatStyle['icon-rotate-with-view'],\n      size: flatStyle['icon-size'],\n      declutterMode: flatStyle['icon-declutter-mode'],\n    });\n    return icon;\n  }\n\n  const shapePoints = flatStyle['shape-points'];\n  if (shapePoints) {\n    const prefix = 'shape-';\n    const shape = new RegularShape({\n      points: shapePoints,\n      fill: getFill(flatStyle, prefix),\n      stroke: getStroke(flatStyle, prefix),\n      radius: flatStyle['shape-radius'],\n      radius1: flatStyle['shape-radius1'],\n      radius2: flatStyle['shape-radius2'],\n      angle: flatStyle['shape-angle'],\n      displacement: flatStyle['shape-displacement'],\n      rotation: flatStyle['shape-rotation'],\n      rotateWithView: flatStyle['shape-rotate-with-view'],\n      scale: flatStyle['shape-scale'],\n      declutterMode: flatStyle['shape-declutter-mode'],\n    });\n\n    return shape;\n  }\n\n  const circleRadius = flatStyle['circle-radius'];\n  if (circleRadius) {\n    const prefix = 'circle-';\n    const circle = new Circle({\n      radius: circleRadius,\n      fill: getFill(flatStyle, prefix),\n      stroke: getStroke(flatStyle, prefix),\n      displacement: flatStyle['circle-displacement'],\n      scale: flatStyle['circle-scale'],\n      rotation: flatStyle['circle-rotation'],\n      rotateWithView: flatStyle['circle-rotate-with-view'],\n      declutterMode: flatStyle['circle-declutter-mode'],\n    });\n\n    return circle;\n  }\n\n  return;\n}\n\n/**\n * @return {import('./flat.js').FlatStyle} The default flat style.\n */\nexport function createDefaultStyle() {\n  return {\n    'fill-color': 'rgba(255,255,255,0.4)',\n    'stroke-color': '#3399CC',\n    'stroke-width': 1.25,\n    'circle-radius': 5,\n    'circle-fill-color': 'rgba(255,255,255,0.4)',\n    'circle-stroke-width': 1.25,\n    'circle-stroke-color': '#3399CC',\n  };\n}\n"],"names":["Component","Inject","MAT_DIALOG_DATA","Map","View","fromLonLat","TileLayer","OSM","VectorLayer","VectorSource","Feature","Point","Fill","Style","Text","FullScreen","Subject","SharedExpMapComponent","constructor","data","experienceData","ngOnInit","console","log","checkCoordinates","lat","geographicalCoordinates","latitude","long","longitude","initMap","resourceFeature","geometry","setStyle","text","font","textBaseline","fill","color","map","view","center","zoom","layers","source","features","controls","ngAfterViewInit","setTarget","ngOnDestroy","ngUnsubscribe","next","complete","args","selector","template","Injectable","HttpClient","BehaviorSubject","FormGroup","ResourcesService","http","undefined","featuredImage","images","videos","listenForSetup","setupListener$","asObservable","listenForGeneralInfo","generalInfoListener$","listenForPolicyRental","policyRentalListener$","listenForPolicyMenu","policyMenuListener$","listenForPolicy","policyListener$","getTemplateType","resourceTemplateType$","getResourceId","resourceId$","getBookingType","bookingType$","getFacilitiesByCategory","facilitiesByCategory$","getAttributesData","attributesFromResourceTemplate$","addTripsId","tripId","settingsTripsItineraries$","getValue","concat","addTemplate","templateType","getListOfDomains","get","getAllResourceCategoriesByResourceDomain","id","getAllResourceTypesByResourceCategory","getListResourceTemplateFiltered","page","size","sort","dir","filterParams","sortAfter","length","filterDir","post","getAttributesFromTemplate","addResource","userId","updateResource","put","getResourceById","getAttributes","getAttributesByNames","uploadResourceImage","resourceId","file","uploadDocAttachements","type","getAttributeById","attrId","changeStatusForResource","status","getAllCountries","getCityFilter","filters","getTimepickerByResourceId","addRelatedresources","targetResourceId","eventId","removeRelatedResource","providedIn","EventEmitter","Input","Output","CommonModule","MatLegacyTooltipModule","FormsModule","ReactiveFormsModule","MatLegacyMenuModule","MatLegacyRadioModule","SeatsViewerComponent","checkIfEditMode","isEditMode","createEmptySeatsMatrix","hasBookedWithReservation","checkIfBookedWithReservation","ngOnChanges","createMaxZoneWidth","seatSelection","observed","zone","culturalRoom","zones","row","rowsForBooking","seat","seats","seatStatus","selectedSeatsMatrix","checkIfMaxWidth","columns","rowIndex","rows","columnIndex","push","maxZoneWidth","toggleSeat","zoneIndex","seatIndex","selectedZone","selectedRow","selectedSeat","rowOffset","index","price","rowLabel","seatColumnLabel","flat","filter","emit","onChangeSeatStatus","event","currentRow","regenerateSeatLabels","isRowEmpty","regenerateRowLabels","seatLabelCounter","rowLabelAsNumber","rowsGenerationType","toString","numberToLetters","number","str","q","r","Math","floor","String","fromCharCode","rowIsEmpty","forEach","standalone","imports","t","i","exports","module","define","amd","self","RBush","e","a","h","n","o","s","l","f","exp","u","sqrt","m","max","c","min","p","d","x","_maxEntries","_minEntries","ceil","clear","indexOf","children","minX","minY","maxX","maxY","leaf","height","pop","prototype","all","_all","search","toBBox","collides","load","insert","_build","slice","_splitRoot","_insert","remove","splice","_condense","compareMinX","compareMinY","toJSON","fromJSON","apply","pow","_chooseSubtree","_split","_adjustParentBBoxes","_chooseSplitAxis","_chooseSplitIndex","v","M","_allDistMargin","BaseObject","EventType","assert","listen","unlistenByKey","geometryOrProperties","on","once","un","id_","geometryName_","style_","styleFunction_","geometryChangeKey_","addChangeListener","handleGeometryChanged_","getSimplifiedGeometry","setGeometry","properties","setProperties","clone","hasProperties","getProperties","setGeometryName","getGeometryName","getGeometry","style","getStyle","getId","getStyleFunction","handleGeometryChange_","changed","CHANGE","set","createStyleFunction","setId","name","removeChangeListener","obj","styles","Array","isArray","getZIndex","asColorLike","Control","MapProperty","CLASS_CONTROL","CLASS_UNSELECTABLE","CLASS_UNSUPPORTED","replaceNode","events","FullScreenEventType","ENTERFULLSCREEN","LEAVEFULLSCREEN","options","element","document","createElement","target","keys_","keys","source_","isInFullscreen_","boundHandleMapTargetChange_","handleMapTargetChange_","bind","cssClassName_","className","documentListeners_","activeClassName_","activeClassName","split","inactiveClassName_","inactiveClassName","label","labelNode_","createTextNode","labelActive","labelActiveNode_","tipLabel","button_","title","setAttribute","appendChild","addEventListener","CLICK","handleClick_","setClassName_","preventDefault","handleFullScreen_","getMap","doc","getOwnerDocument","isFullScreenSupported","isFullScreen","exitFullScreen","getElementById","getTargetElement","requestFullScreenWithKeys","requestFullScreen","handleFullScreenChange_","wasInFullscreen","dispatchEvent","updateSize","fullscreen","classList","add","setMap","oldMap","TARGET","listeners","ii","body","requestFullscreen","fullscreenEnabled","fullscreenElement","exitFullscreen","VOID","withCredentials","loadFeaturesXhr","url","format","extent","resolution","projection","success","failure","xhr","XMLHttpRequest","open","getType","responseType","onload","responseText","responseXML","DOMParser","parseFromString","response","readFeatures","featureProjection","readProjection","onerror","send","dataProjection","addFeatures","setWithCredentials","xhrWithCredentials","lineStringLength","flatCoordinates","offset","end","stride","x1","y1","x2","y2","linearRingLength","perimeter","dx","dy","lerp","lineChunk","chunkLength","chunks","cursor","chunkM","currentChunk","segmentLength","y","missing","matchingChunk","maxAngle","chunkStart","chunkEnd","start","acos","m12","m23","x12","y12","x23","y23","rotate","drawTextOnPath","startM","scale","measureAndCacheTextWidth","cache","rotation","segmentM","advance","interpolate","beginX","beginY","startOffset","startLength","endM","endX","endY","reverse","PI","result","singleSegment","previousAngle","atan2","replace","angle","delta","abs","iStart","charLength","len","chars","substring","Layer","createDefaultStyle","toFunction","toStyleFunction","toStyle","Property","RENDER_ORDER","BaseVectorLayer","baseOptions","Object","assign","renderBuffer","updateWhileAnimating","updateWhileInteracting","declutter_","declutter","renderBuffer_","updateWhileAnimating_","updateWhileInteracting_","getDeclutter","getFeatures","pixel","getRenderBuffer","getRenderOrder","getUpdateWhileAnimating","getUpdateWhileInteracting","renderDeclutter","frameState","declutterTree","getRenderer","setRenderOrder","renderOrder","styleLike","CanvasVectorLayerRenderer","createRenderer","fromUserExtent","fromUserResolution","toUserExtent","Infinity","bbox","tile","tileGrid","z","getZForResolution","tileRange","getTileRangeForExtentAndZ","extents","tileCoord","getTileCoordExtent","VectorContext","drawCustom","feature","renderer","hitDetectionRenderer","drawGeometry","drawCircle","circleGeometry","drawFeature","drawGeometryCollection","geometryCollectionGeometry","drawLineString","lineStringGeometry","drawMultiLineString","multiLineStringGeometry","drawMultiPoint","multiPointGeometry","drawMultiPolygon","multiPolygonGeometry","drawPoint","pointGeometry","drawPolygon","polygonGeometry","drawText","setFillStrokeStyle","fillStyle","strokeStyle","setImageStyle","imageStyle","declutterImageWithText","setTextStyle","textStyle","CanvasInstruction","Relationship","buffer","containsCoordinate","coordinateRelationship","defaultFillStyle","defaultLineCap","defaultLineDash","defaultLineDashOffset","defaultLineJoin","defaultLineWidth","defaultMiterLimit","defaultStrokeStyle","equals","reverseSubArray","inflateCoordinates","inflateCoordinatesArray","inflateMultiCoordinatesArray","CanvasBuilder","tolerance","maxExtent","pixelRatio","maxLineWidth","beginGeometryInstruction1_","beginGeometryInstruction2_","bufferedMaxExtent_","instructions","coordinates","tmpCoordinate_","hitDetectionInstructions","state","applyPixelRatio","dashArray","dash","appendFlatPointCoordinates","getBufferedMaxExtent","tmpCoord","myEnd","appendFlatLineCoordinates","closed","skipFirst","lastXCoord","lastYCoord","nextCoord","skipped","lastRel","nextRel","INTERSECTING","drawCustomCoordinates_","ends","builderEnds","builderEnd","beginGeometry","getStride","builderBegin","builderEndss","getOrientedFlatCoordinates","endss","getEndss","myEnds","CUSTOM","getFlatCoordinates","getEnds","endGeometry","BEGIN_GEOMETRY","finish","reverseHitDetectionInstructions","instruction","begin","END_GEOMETRY","fillStyleColor","getColor","strokeStyleColor","strokeStyleLineCap","getLineCap","lineCap","strokeStyleLineDash","getLineDash","lineDash","strokeStyleLineDashOffset","getLineDashOffset","lineDashOffset","strokeStyleLineJoin","getLineJoin","lineJoin","strokeStyleWidth","getWidth","lineWidth","strokeStyleMiterLimit","getMiterLimit","miterLimit","createFill","fillInstruction","SET_FILL_STYLE","applyStroke","createStroke","SET_STROKE_STYLE","updateFillStyle","currentFillStyle","call","updateStrokeStyle","currentStrokeStyle","currentLineCap","currentLineDash","currentLineDashOffset","currentLineJoin","currentLineWidth","currentMiterLimit","endGeometryInstruction","width","Builder","ImageBuilder","LineStringBuilder","PolygonBuilder","TextBuilder","BATCH_CONSTRUCTORS","BuilderGroup","tolerance_","maxExtent_","pixelRatio_","resolution_","buildersByZIndex_","builderInstructions","zKey","builders","builderKey","builderInstruction","getBuilder","zIndex","builderType","zIndexKey","replays","replay","Constructor","TEXT_ALIGN","applyTransform","compose","composeTransform","create","createTransform","setFromArray","transformSetFromArray","createEmpty","createOrUpdate","intersects","defaultPadding","defaultTextAlign","defaultTextBaseline","drawImageOrLabel","getTextDimensions","transform2D","tmpExtent","p1","p2","p3","p4","getDeclutterBox","replayImageOrLabelArgs","declutterBox","rtlRegEx","RegExp","horizontalTextAlign","align","test","createTextChunks","acc","line","Executor","overlaps","alignFill_","coordinateCache_","renderedTransform_","pixelCoordinates_","viewRotation_","fillStates","strokeStates","textStates","widths_","labels_","createLabel","textKey","fillKey","strokeKey","key","strokeState","fillState","textState","textIsArray","justify","textAlign","strokeWidth","reduce","widths","heights","lineWidths","renderWidth","contextInstructions","w","leftRight","strokeInstructions","fillInstructions","lineHeight","lineOffset","widthHeightIndex","lineWidthIndex","previousFont","fillStrokeArgs","replayTextBackground_","context","strokeInstruction","beginPath","moveTo","lineTo","fill_","setStrokeStyle_","stroke","calculateImageOrLabelDimensions_","sheetWidth","sheetHeight","centerX","centerY","anchorX","anchorY","originX","originY","snapToPixel","padding","fillStroke","boxW","boxH","boxX","boxY","transform","round","drawImageX","drawImageY","drawImageW","drawImageH","value","canvasTransform","replayImageOrLabel_","contextScale","imageOrLabel","dimensions","opacity","box","canvas","strokePadding","origin","repeatSize","save","translate","restore","setLineDash","drawLabelWithPointPlacement_","baseline","execute_","featureCallback","hitExtent","pixelCoordinates","dd","prevX","prevY","roundX","roundY","image","pendingFill","pendingStroke","lastFillInstruction","lastStrokeInstruction","coordinateCache","viewRotation","viewRotationFromTransform","batchSize","currentGeometry","getExtent","BEGIN_PATH","NaN","CIRCLE","arc","CLOSE_PATH","closePath","fn","coords","DRAW_IMAGE","rotateWithView","declutterMode","labelWithAnchor","textOffsetX","textOffsetY","geometryWidths","backgroundFill","backgroundStroke","widthIndex","imageArgs","imageDeclutterBox","DRAW_CHARS","overflow","measurePixelRatio","offsetY","pixelRatioScale","textScale","cachedWidths","pathLength","textLength","parts","drawChars","cc","part","FILL","MOVE_TO_LINE_TO","STROKE","execute","executeHitDetection","ascending","extendCoordinate","createCanvasContext2D","isEmpty","ORDER","ExecutorGroup","allInstructions","overlaps_","executorsByZIndex_","hitDetectionContext_","hitDetectionTransform_","createExecutors_","clip","flatClipCoords","getClipCoords","executors","instructionByZindex","hasExecutors","candidates","forEachFeatureAtCoordinate","coordinate","hitTolerance","callback","declutteredFeatures","contextSize","newContext","willReadFrequently","clearRect","indexes","getPixelIndexArray","imageData","getImageData","includes","idx","zs","Number","j","executor","builderTypes","jj","circlePixelIndexArrayCache","radius","maxDistanceSq","distances","distanceSq","distance","pixelIndex","CanvasImageBuilder","hitDetectionImage_","image_","imagePixelRatio_","anchorX_","anchorY_","height_","opacity_","originX_","originY_","rotateWithView_","rotation_","scale_","width_","declutterMode_","declutterImageWithText_","myBegin","sharedData","anchor","getAnchor","getSize","getOrigin","getPixelRatio","getHitDetectionImage","getImage","getOpacity","getRotateWithView","getRotation","getScaleArray","getDeclutterMode","defaultFont","toFixed","transformGeom2D","CanvasImmediateRenderer","squaredTolerance","userTransform","context_","extent_","transform_","transformRotation_","squaredTolerance_","userTransform_","contextFillState_","contextStrokeState_","contextTextState_","fillState_","strokeState_","imageAnchorX_","imageAnchorY_","imageHeight_","imageOpacity_","imageOriginX_","imageOriginY_","imageRotateWithView_","imageRotation_","imageScale_","imageWidth_","text_","textOffsetX_","textOffsetY_","textRotateWithView_","textRotation_","textScale_","textFillState_","textStrokeState_","textState_","tmpLocalTransform_","drawImages_","localTransform","alpha","globalAlpha","setTransform","drawImage","drawText_","setContextFillState_","setContextStrokeState_","setContextTextState_","strokeText","fillText","moveToLineTo_","close","drawRings_","simplifyTransformed","getCenter","getFill","getStroke","getText","getGeometryFunction","geometries","getGeometriesArray","flatMidpoint","getFlatMidpoint","geometryExtent","flatMidpoints","getFlatMidpoints","flatInteriorPoint","getFlatInteriorPoint","flatInteriorPoints","getFlatInteriorPoints","contextFillState","contextStrokeState","contextTextState","imageSize","imagePixelRatio","imageAnchor","imageOrigin","imageScale","textFillStyle","textFillStyleColor","textStrokeStyle","textStrokeStyleColor","textStrokeStyleLineCap","textStrokeStyleLineDash","textStrokeStyleLineDashOffset","textStrokeStyleLineJoin","textStrokeStyleWidth","textStrokeStyleMiterLimit","textFont","getFont","getOffsetX","getOffsetY","textRotateWithView","textRotation","textText","textTextAlign","getTextAlign","textTextBaseline","getTextBaseline","Instruction","beginPathInstruction","closePathInstruction","CanvasLineStringBuilder","drawFlatCoordinates_","moveToLineToInstruction","lastStroke","snap","CanvasPolygonBuilder","drawFlatCoordinatess_","numEnds","setFillStrokeStyles_","circleInstruction","registerFont","getUid","CanvasTextBuilder","textKey_","fillKey_","strokeKey_","geometryType","placement","repeat","flatOffset","oo","chunk","chunkBegin","range","drawChars_","interiorPoints","beg","keep","saveTextStates_","p0","getOverflow","getMaxAngle","getPlacement","getRepeat","getJustify","getBackgroundFill","getBackgroundStroke","getPadding","join","Icon","clamp","HIT_DETECT_RESOLUTION","createHitDetectionImageData","transforms","styleFunction","imageSmoothingEnabled","featureCount","indexFactor","featuresByZIndex","featureStyleFunction","padStart","originalStyle","setColor","setText","imgSize","getImageSize","imgContext","img","fillRect","setImage","anchorXUnits","anchorYUnits","getScale","byGeometryType","getGeometriesArrayRecursive","zIndexKeys","geomAndStyle","k","kk","hitDetect","resultFeatures","g","b","CanvasBuilderGroup","CanvasLayerRenderer","canvasPool","RenderEventType","ViewHint","makeInverse","makeScale","transformToString","containsExtent","intersectsExtent","wrapX","wrapExtentX","releaseCanvas","defaultOrder","defaultRenderOrder","getTolerance","getRenderTolerance","getSquaredTolerance","getSquaredRenderTolerance","renderFeature","getTransformFromProjections","getUserProjection","toUserResolution","wrapCoordinateX","vectorLayer","boundHandleStyleImageChange_","handleStyleImageChange_","animatingOrInteracting_","hitDetectionImageData_","renderedFeatures_","renderedRevision_","renderedResolution_","renderedExtent_","wrappedRenderedExtent_","renderedRotation_","renderedCenter_","renderedProjection_","renderedRenderOrder_","replayGroup_","replayGroupChanged","declutterExecutorGroup","clipping","compositionContext_","renderWorlds","executorGroup","viewState","projectionExtent","vectorSource","getLayer","getSource","viewHints","ANIMATING","INTERACTING","multiWorld","getWrapX","canWrapX","worldWidth","endWorld","world","getRenderTransform","setupCompositionContext_","compositionContext","releaseCompositionContext_","renderFrame","layerState","layerStatesArray","layerIndex","pixelTransform","inversePixelTransform","useContainer","getBackground","replayGroup","render","hasRenderListeners","hasListener","PRERENDER","POSTRENDER","containerReused","preRender","clipped","layerExtent","clipUnrotated","postRender","container","Promise","resolve","layer","startX","offsetX","matches","match","lastIndexOf","executorGroups","some","item","handleFontsChanged","getVisible","renderIfReadyAndVisible","prepareFrame","animating","interacting","ready","frameStateExtent","vectorLayerRevision","getRevision","vectorLayerRenderBuffer","vectorLayerRenderOrder","renderedExtent","loadExtents","gutter","loadExtent","declutterBuilderGroup","userProjection","userExtent","loadFeatures","dirty","getFeaturesInExtent","replayGroupInstructions","getOverlaps","builderGroup","loading","ImageState","SIMPLIFY_TOLERANCE","GEOMETRY_RENDERERS","renderPointGeometry","renderLineStringGeometry","renderPolygonGeometry","renderMultiPointGeometry","renderMultiLineStringGeometry","renderMultiPolygonGeometry","renderGeometryCollectionGeometry","renderCircleGeometry","feature1","feature2","parseInt","circleReplay","textReplay","listener","imageState","getImageState","LOADED","ERROR","unlistenImageChange","IDLE","listenImageChange","renderFeatureInternal","simplifiedGeometry","renderGeometry","geometryRenderer","getGeometries","getHitDetectionRenderer","lineStringReplay","polygonReplay","imageBuilderGroup","imageReplay","textBuilderGroup","Collection","CollectionEventType","Event","ObjectEventType","Source","VectorEventType","TRUE","allStrategy","wrapAndSliceX","extend","VectorSourceEvent","attributions","loader_","format_","url_","loader","strategy_","strategy","useSpatialIndex","featuresRtree_","loadedExtentsRtree_","loadingExtentsCount_","nullGeometryFeatures_","idIndex_","uidIndex_","featureChangeKeys_","featuresCollection_","collection","getArray","addFeaturesInternal","bindFeaturesCollection_","addFeature","addFeatureInternal","featureKey","addToIndex_","setupChangeEvents_","ADDFEATURE","handleFeatureChange_","PROPERTYCHANGE","valid","newFeatures","geometryFeatures","modifyingCollection","evt","REMOVEFEATURE","ADD","REMOVE","removeFeature","fast","featureId","removeAndIgnoreReturn","removeFeatureInternal","clearEvent","CLEAR","forEachFeature","forEachFeatureAtCoordinateDirect","forEachFeatureInExtent","intersectsCoordinate","forEachInExtent","forEachFeatureIntersectingExtent","getFeaturesCollection","getAll","values","getFeaturesAtCoordinate","getInExtent","anExtent","getClosestFeatureToCoordinate","closestFeature","closestPoint","minSquaredDistance","previousMinSquaredDistance","closestPointXY","minDistance","getFeatureById","getFeatureByUid","uid","getFormat","getUrl","update","sid","removeFromIdIndex_","CHANGEFEATURE","hasFeature","getLength","loadedExtentsRtree","extentsToLoad","extentToLoad","alreadyLoaded","object","FEATURESLOADSTART","FEATURESLOADEND","FEATURESLOADERROR","refresh","removeLoadedExtent","featureChangeKeys","removed","setLoader","setUrl","RBush_","maxEntries","rbush_","items_","items","forEach_","rbush","RegularShape","CircleStyle","points","displacement","getRadius","getDisplacement","setOpacity","setRadius","radius_","color_","ImageStyle","asArray","getIconImage","calculateScale","wantedWidth","wantedHeight","anchor_","normalizedAnchor_","anchorOrigin_","anchorOrigin","anchorXUnits_","anchorYUnits_","crossOrigin_","crossOrigin","imgSize_","src","iconImage_","offset_","offsetOrigin_","offsetOrigin","origin_","size_","HTMLCanvasElement","initialOptions_","setScale","getSrc","setAnchor","iconImageSize","getHeight","removeEventListener","EventTarget","asString","shared","iconImageCache","listenImage","taintedTestContext","IconImage","canvas_","unlisten_","imageState_","src_","tainted_","initializeImage_","Image","isTainted_","dispatchChangeEvent_","handleImageError_","unlistenImage_","handleImageLoad_","replaceColor_","LOADING","ctx","getContext","globalCompositeOperation","iconImage","abstract","toSize","scaleArray_","displacement_","setDisplacement","setRotateWithView","setRotation","hitDetectionCanvas_","points_","radius1","radius2_","radius2","angle_","stroke_","renderOptions_","getPoints","getRadius2","getAngle","setFill","createHitDetectionCanvas_","renderOptions","draw_","setStroke","calculateLineJoinSize_","r1","r2","tmp","sin","miterRatio","maxr","bevelAdd","aa","bb","ee","innerMiterRatio","innerLength","createRenderOptions","maxRadius","createPath_","drawHitDetectionCanvas_","startAngle","step","angle0","radiusC","cos","Stroke","lineCap_","lineDash_","lineDashOffset_","lineJoin_","miterLimit_","setLineCap","setLineDashOffset","setLineJoin","setMiterLimit","setWidth","geometry_","geometryFunction_","defaultGeometryFunction","renderer_","hitDetectionRenderer_","zIndex_","setRenderer","setHitDetectionRenderer","setZIndex","defaultStyles","createEditingStyle","white","blue","DEFAULT_FILL_COLOR","font_","textAlign_","justify_","repeat_","textBaseline_","maxAngle_","placement_","overflow_","offsetX_","offsetY_","backgroundFill_","backgroundStroke_","padding_","setOverflow","setFont","setMaxAngle","setOffsetX","setOffsetY","setPlacement","setRepeat","setTextAlign","setJustify","setTextBaseline","setBackgroundFill","setBackgroundStroke","setPadding","Circle","flatStyle","prefix","iconSrc","iconImg","icon","shapePoints","shape","circleRadius","circle"],"sourceRoot":"webpack:///","x_google_ignoreList":[3,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43]}